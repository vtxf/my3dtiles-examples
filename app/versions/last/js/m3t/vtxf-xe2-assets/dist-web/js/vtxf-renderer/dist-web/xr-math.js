/*! For license information please see xr-math.js.LICENSE.txt */
var vtxf;(()=>{"use strict";var e={8753:(e,r,t)=>{var n;Object.defineProperty(r,"__esModule",{value:!0}),r.copyright=void 0;var o=null!==(n="".concat("vtxf-renderer","/").concat(t.j))&&void 0!==n?n:"-",i="vtxf-renderer",a=((Date.now()-1736154849e3)/36e5).toFixed(1),u="%c🌏 ".concat(o,"%c ").concat("0.3.43",".").concat("a5c4a49d98584e947ccea709e80eb430cb1fea04".slice(0,8),".").concat("2025-01-06T09:14:09.000Z"," (距今").concat(a,"个小时)\n%c").concat(i?i+"\n":"","当前网站正在使用").concat(o,"，此软件版权归").concat("vtxf","所有\n%c ");r.copyright=Object.seal({get owner(){return"vtxf"},get ownerlink(){return"www.czmtoy.com"},get info(){return u},get date(){return"2025-01-06T09:14:09.000Z"},get author(){return"vtxf"},get version(){return"0.3.43"},get name(){return"vtxf-renderer"},get commitId(){return"a5c4a49d98584e947ccea709e80eb430cb1fea04"},print:function(){!force&&window._xe2_no_copy_print||console.info(this.info,"\n            font-size: 18px;\n            font-weight: 1000;\n            line-height: 1;\n            color: rgb(0, 120, 215);\n            padding-top: 20px;\n            padding-bottom: 10px;\n            ","\n            font-size: 10px;\n            font-weight: 1000;\n            color: rgb(0, 120, 215);\n            ","\n            font-size: 10px;\n            line-height: 1.5;\n            color: rgb(0, 120, 215);\n            padding-bottom: 2px;\n            padding-left: 35px;\n            ")}}),window.g_xe2CopyRights=window.g_xe2CopyRights||{},window.g_xe2CopyRights[o]=r.copyright},1327:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BoundingSphere=void 0;var n=t(3178),o=t(1548),i=t(3030),a=t(5174),u=t(3221);!function(e){function r(e,r){return r=r||(0,i.createNumbers)(3),u.Vector.set(r,e[0],e[1],e[2]),r}function t(e){return e[3]}function c(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function s(e,r){e[3]=r}e.getCenter=r,e.getRadius=t,e.setCenter=c,e.setRadius=s,e.fromCenterRadius=function(e,r,t){return u.Vector.set(t,e[0],e[1],e[2],r)};var f=(0,i.createNumbers)(3),l=(0,i.createNumbers)(3);e.intersectPlane=function(e,o){var i=r(e,f),c=t(e),s=a.Plane.getNormal(o,l),d=u.Vector.dot(s,i)+a.Plane.getDistance(o);return d<-c?n.Intersect.OUTSIDE:d<c?n.Intersect.INTERSECTING:n.Intersect.INSIDE};var d=(0,i.createNumbers)(3);e.transform=function(e,n,a){a=a||(0,i.createNumbers)(4);var u=r(e,d),f=t(e);return o.Matrix4.affineMultiplyByPoint(n,u,u),f*=o.Matrix4.getMaximumScale(n),c(a,u),s(a,f),a};var v=(0,i.createNumbers)(3),m=(0,i.createNumbers)(3),h=(0,i.createNumbers)(3),y=(0,i.createNumbers)(3);e.union=function(e,r,t){t=t||(0,i.createNumbers)(4);var n=u.Vector.set(v,e[0],e[1],e[2]),o=e[3],a=u.Vector.set(m,r[0],r[1],r[2]),c=r[3],s=u.Vector.subtract(a,n,h),f=u.Vector.magnitude(s);if(o>=f+c)return u.Vector.clone(e,t),t;if(c>=f+o)return u.Vector.clone(r,t),t;var l=.5*(o+f+c),d=u.Vector.multiplyByScalar(s,(-o+l)/f,y);return u.Vector.add(d,n,d),u.Vector.set(t,d[0],d[1],d[2],l),t};var p=(0,i.createNumbers)(3);e.fromCornerPoints=function(e,r,t){var n=u.Vector.lerp(e,r,.5,p),o=u.Vector.distance(n,r);return u.Vector.set(t,n[0],n[1],n[2],o)}}(r.BoundingSphere||(r.BoundingSphere={}))},5490:function(e,r,t){var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r._getCullingVolumeFromProjectionMatrix=void 0;var i=o(t(7925)),a=t(3030),u=t(3221);function c(e,r,t){return e[4*(t-1)+(r-1)]}r._getCullingVolumeFromProjectionMatrix=function(e,r){var t,o,s=e;if(6!==(r=r||new i.default([(0,a.createNumbers)(4),(0,a.createNumbers)(4),(0,a.createNumbers)(4),(0,a.createNumbers)(4),(0,a.createNumbers)(4),(0,a.createNumbers)(4)])).planes.length)throw new Error("!target.planes || target.planes.length !== 6");u.Vector.set(r.planes[0],c(s,4,1)+c(s,1,1),c(s,4,2)+c(s,1,2),c(s,4,3)+c(s,1,3),c(s,4,4)+c(s,1,4)),u.Vector.set(r.planes[1],c(s,4,1)-c(s,1,1),c(s,4,2)-c(s,1,2),c(s,4,3)-c(s,1,3),c(s,4,4)-c(s,1,4)),u.Vector.set(r.planes[2],c(s,4,1)+c(s,2,1),c(s,4,2)+c(s,2,2),c(s,4,3)+c(s,2,3),c(s,4,4)+c(s,2,4)),u.Vector.set(r.planes[3],c(s,4,1)-c(s,2,1),c(s,4,2)-c(s,2,2),c(s,4,3)-c(s,2,3),c(s,4,4)-c(s,2,4)),u.Vector.set(r.planes[4],c(s,4,1)+c(s,3,1),c(s,4,2)+c(s,3,2),c(s,4,3)+c(s,3,3),c(s,4,4)+c(s,3,4)),u.Vector.set(r.planes[5],c(s,4,1)-c(s,3,1),c(s,4,2)-c(s,3,2),c(s,4,3)-c(s,3,3),c(s,4,4)-c(s,3,4));try{for(var f=n(r.planes),l=f.next();!l.done;l=f.next()){var d=l.value;u.Vector.normalize(d,d)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=f.return)&&o.call(f)}finally{if(t)throw t.error}}return r}},7925:function(e,r,t){var n=this&&this.__values||function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0}),r.CullingVolume=void 0;var o=t(1327),i=t(3178),a=t(5601),u=t(5174),c=t(5490),s=function(){function e(e){void 0===e&&(e=[]),this.planes=e}return e.fromProjectionMatrix=function(e,r){return(0,c._getCullingVolumeFromProjectionMatrix)(e,r)},e.prototype.computeVisibilityWithPlaneMask=function(r,t,n){if(n===e.MASK_OUTSIDE||n===e.MASK_INSIDE)return n;var u=e.MASK_INSIDE,c=this.planes;if(c)for(var s=0,f=c.length;s<f;++s){var l=s<31?1<<s:0;if(!(s<31)||n&l){var d=void 0;if("box"===r?d=a.OrientedBoundingBox.intersectPlane(t,c[s]):"sphere"===r&&(d=o.BoundingSphere.intersectPlane(t,c[s])),d===i.Intersect.OUTSIDE)return e.MASK_OUTSIDE;d===i.Intersect.INTERSECTING&&(u|=l)}}return u},e.prototype.transform=function(e){var r,t;try{for(var o=n(this.planes),i=o.next();!i.done;i=o.next()){var a=i.value;u.Plane.transform(a,e,a)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}},e.MASK_OUTSIDE=4294967295,e.MASK_INSIDE=0,e.MASK_INDETERMINATE=2147483647,e}();r.CullingVolume=s,r.default=s},3178:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.Intersect=void 0,(t=r.Intersect||(r.Intersect={})).OUTSIDE=-1,t.INTERSECTING=0,t.INSIDE=1},1820:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InverseViewMatrix=void 0;var n=t(3221),o=function(){function e(){}return e.getDirection=function(e,r){return n.Vector.set(r,-e[8],-e[9],-e[10])},e.getRight=function(e,r){return n.Vector.set(r,e[0],e[1],e[2])},e.getUp=function(e,r){return n.Vector.set(r,e[4],e[5],e[6])},e.getEye=function(e,r){return n.Vector.set(r,e[12],e[13],e[14])},e}();r.InverseViewMatrix=o},7874:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Matrix3=void 0;var n,o=t(3030),i=t(3221);(n=r.Matrix3||(r.Matrix3={})).multiply=function(e,r,t){var n=e[0]*r[0]+e[3]*r[1]+e[6]*r[2],i=e[1]*r[0]+e[4]*r[1]+e[7]*r[2],a=e[2]*r[0]+e[5]*r[1]+e[8]*r[2],u=e[0]*r[3]+e[3]*r[4]+e[6]*r[5],c=e[1]*r[3]+e[4]*r[4]+e[7]*r[5],s=e[2]*r[3]+e[5]*r[4]+e[8]*r[5],f=e[0]*r[6]+e[3]*r[7]+e[6]*r[8],l=e[1]*r[6]+e[4]*r[7]+e[7]*r[8],d=e[2]*r[6]+e[5]*r[7]+e[8]*r[8];return(t=t||(0,o.createNumbers)(9))[0]=n,t[1]=i,t[2]=a,t[3]=u,t[4]=c,t[5]=s,t[6]=f,t[7]=l,t[8]=d,t},n.multiplyByVector=function(e,r,t){var n=r[0],o=r[1],a=r[2],u=e[0]*n+e[3]*o+e[6]*a,c=e[1]*n+e[4]*o+e[7]*a,s=e[2]*n+e[5]*o+e[8]*a;return i.Vector.set(t,u,c,s)},n.fromQuaternion=function(e,r){var t=e[0]*e[0],n=e[0]*e[1],a=e[0]*e[2],u=e[0]*e[3],c=e[1]*e[1],s=e[1]*e[2],f=e[1]*e[3],l=e[2]*e[2],d=e[2]*e[3],v=e[3]*e[3],m=t-c-l+v,h=2*(n-d),y=2*(a+f),p=2*(n+d),b=-t+c-l+v,_=2*(s-u),g=2*(a-f),M=2*(s+u),N=-t-c+l+v;return r=r||(0,o.createNumbers)(9),i.Vector.set(r,m,p,g,h,b,M,y,_,N),r},n.getScale=function(e,r){return(r=r||(0,o.createNumbers)(3))[0]=i.Vector.magnitude([e[0],e[1],e[2]]),r[1]=i.Vector.magnitude([e[3],e[4],e[5]]),r[2]=i.Vector.magnitude([e[6],e[7],e[8]]),r},n.getElementIndex=function(e,r){return 3*e+r},n.IDENTITY=Object.freeze([1,0,0,0,1,0,0,0,1]),n.COLUMN0ROW0=0,n.COLUMN0ROW1=1,n.COLUMN0ROW2=2,n.COLUMN1ROW0=3,n.COLUMN1ROW1=4,n.COLUMN1ROW2=5,n.COLUMN2ROW0=6,n.COLUMN2ROW1=7,n.COLUMN2ROW2=8},9313:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._fromDirectionUpRightAndTranslation=r._fromMatrix3AndTranslation=r._fromTranslation=void 0;var n=t(3030),o=t(3221),i=t(6044);r._fromTranslation=function(e,r){return(r=r||(0,n.createNumbers)(16))[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},r._fromMatrix3AndTranslation=function(e,r,t){return r=r||i.Vector3.ZERO,(t=t||(0,n.createNumbers)(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r._fromDirectionUpRightAndTranslation=function(e,r,t,n,a){var u=null!=n?n:i.Vector3.ZERO;return o.Vector.set(a,t[0],t[1],t[2],0,r[0],r[1],r[2],0,-e[0],-e[1],-e[2],0,u[0],u[1],u[2],1)}},6300:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._inverseTransformation=void 0;var n=t(3030);r._inverseTransformation=function(e,r){var t=e[0],o=e[1],i=e[2],a=e[4],u=e[5],c=e[6],s=e[8],f=e[9],l=e[10],d=e[12],v=e[13],m=e[14],h=-t*d-o*v-i*m,y=-a*d-u*v-c*m,p=-s*d-f*v-l*m;return(r=r||(0,n.createNumbers)(16))[0]=t,r[1]=a,r[2]=s,r[3]=0,r[4]=o,r[5]=u,r[6]=f,r[7]=0,r[8]=i,r[9]=c,r[10]=l,r[11]=0,r[12]=h,r[13]=y,r[14]=p,r[15]=1,r}},2235:function(e,r,t){var n=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r._getMaximumScale=r._setScale=r._getScale=void 0;var i=t(3030),a=t(3221),u=t(3286);function c(e,r){return(r=r||(0,i.createNumbers)(3))[0]=a.Vector.magnitude([e[0],e[1],e[2]]),r[1]=a.Vector.magnitude([e[4],e[5],e[6]]),r[2]=a.Vector.magnitude([e[8],e[9],e[10]]),r}r._getScale=c;var s=(0,i.createNumbers)(3);r._setScale=function(e,r,t){var n=c(e,s),o=a.Vector.divide(r,n,s);return(0,u._multiplyByScale)(e,o,t)};var f=(0,i.createNumbers)(3);r._getMaximumScale=function(e){var r=c(e,f);return Math.max.apply(Math,o([],n(a.Vector.itr(r)),!1))}},9528:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._setColumn=r._getColumn=void 0;var n=t(3030),o=t(3221);r._getColumn=function(e,r,t){if(r<0||r>3)throw new Error("index < 0 || index > 3");var o=4*r,i=e[o],a=e[o+1],u=e[o+2],c=e[o+3];return(t=t||(0,n.createNumbers)(4))[0]=i,t[1]=a,t[2]=u,t[3]=c,t},r._setColumn=function(e,r,t,n){if(r<0||r>3)throw new Error("index < 0 || index > 3");var i=4*r;return(n=o.Vector.clone(e,n))[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3],n}},1548:function(e,r,t){var n=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r.Matrix4=void 0;var i=t(7874),a=t(3030),u=t(9806),c=t(3221),s=t(6044),f=t(9528),l=t(4608),d=t(3286),v=t(3700),m=t(2687),h=t(7019),y=t(9313),p=t(6300),b=t(2235);!function(e){function r(e,r,t){return(0,y._fromMatrix3AndTranslation)(e,r,t)}e.getElementIndex=function(e,r){if(e<0||e>3||r<0||r>3)throw new Error("column < 0 || column > 3 || row < 0 || row > 3");return 4*e+r},e.getColumn=function(e,r,t){return(0,f._getColumn)(e,r,t)},e.setColumn=function(e,r,t,n){return(0,f._setColumn)(e,r,t,n)},e.getRow=function(e,r,t){return(0,v._getRow)(e,r,t)},e.setRow=function(e,r,t,n){(0,v._setRow)(e,r,t,n)},e.getTranslation=function(e,r){return(0,m._getTranslation)(e,r)},e.setTranslation=function(e,r,t){return(0,m._setTranslation)(e,r,t)},e.getScale=function(e,r){return(0,b._getScale)(e,r)},e.setScale=function(e,r,t){return(0,b._setScale)(e,r,t)},e.getMaximumScale=function(e){return(0,b._getMaximumScale)(e)},e.multiply=function(e,r,t){return(0,d._multiply)(e,r,t)},e.multiplyTransformation=function(e,r,t){return(0,d._multiplyTransformation)(e,r,t)},e.multiplyByMatrix3=function(e,r,t){return(0,d._multiplyByMatrix3)(e,r,t)},e.multiplyByTranslation=function(e,r,t){return(0,d._multiplyByTranslation)(e,r,t)},e.multiplyByUniformScale=function(e,r,t){(0,d._multiplyByUniformScale)(e,r,t)},e.multiplyByScale=function(e,r,t){return(0,d._multiplyByScale)(e,r,t)},e.multiplyByVector=function(e,r,t){return(0,d._multiplyByVector)(e,r,t)},e.multiplyByPointAsVector=function(e,r,t){return(0,d._multiplyByPointAsVector)(e,r,t)},e.affineMultiplyByPoint=function(e,r,t){return(0,d._affineMultiplyByPoint)(e,r,t)},e.multiplyByPoint=function(e,r,t){return(0,d._multiplyByPoint)(e,r,t)},e.continuousMultiply=function(e,r){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return d._continuousMultiply.apply(void 0,o([e,r],n(t),!1))},e.transpose=function(e,r){return(0,h._transpose)(e,r)},e.getMatrix3=function(e,r){return(r=r||(0,a.createNumbers)(9))[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},e.setMatrix3=function(r,t){(t=t||c.Vector.clone(e.IDENTITY))[0]=r[0],t[1]=r[1],t[2]=r[2],t[4]=r[3],t[5]=r[4],t[6]=r[5],t[8]=r[6],t[9]=r[7],t[10]=r[8]},e.inverse=function(e,r){return(0,l.inverse)(e,r)},e.inverseTransformation=function(e,r){return(0,p._inverseTransformation)(e,r)},e.IDENTITY=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),e.ZERO=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.fromTranslation=function(e,r){return(0,y._fromTranslation)(e,r)},e.fromMatrix3AndTranslation=r;var t=(0,a.createNumbers)(9);e.fromRotateQuatAndTranslation=function(e,n,o){return i.Matrix3.fromQuaternion(e,t),r(t,n,o)},e.fromDirectionUpRightAndTranslation=function(e,r,t,n,o){return(0,y._fromDirectionUpRightAndTranslation)(e,r,t,n,o)},e.fromScale=function(e,r){return c.Vector.set(r,e[0],0,0,0,0,e[1],0,0,0,0,e[2],0,0,0,0,1)};var _=u.Quaternion.fromAxisAngle([1,0,0],.5*Math.PI),g=i.Matrix3.fromQuaternion(_);e.Z2NY=e.fromMatrix3AndTranslation(g);var M=(0,a.createNumbers)(4),N=(0,a.createNumbers)(9);e.fromAxisAngle=function(r,t,n){return u.Quaternion.fromAxisAngle(r,t,M),i.Matrix3.fromQuaternion(M,N),e.fromMatrix3AndTranslation(N,s.Vector3.ZERO,n)}}(r.Matrix4||(r.Matrix4={}))},4608:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.inverse=void 0;var n=t(1548),o=t(3030),i=t(3221),a=(0,o.createNumbers)(9),u=(0,o.createNumbers)(9),c=(0,o.createNumbers)(4),s=(0,o.createNumbers)(4,0,0,0,1);r.inverse=function(e,r){var t=e[0],f=e[4],l=e[8],d=e[12],v=e[1],m=e[5],h=e[9],y=e[13],p=e[2],b=e[6],_=e[10],g=e[14],M=e[3],N=e[7],x=e[11],w=e[15],V=_*w,O=g*x,S=b*w,P=g*N,T=b*x,I=_*N,B=p*w,E=g*M,j=p*x,A=_*M,R=p*N,C=b*M,z=V*m+P*h+T*y-(O*m+S*h+I*y),U=O*v+B*h+A*y-(V*v+E*h+j*y),D=S*v+E*m+R*y-(P*v+B*m+C*y),Q=I*v+j*m+C*h-(T*v+A*m+R*h),W=O*f+S*l+I*d-(V*f+P*l+T*d),F=V*t+E*l+j*d-(O*t+B*l+A*d),q=P*t+B*f+C*d-(S*t+E*f+R*d),L=T*t+A*f+R*l-(I*t+j*f+C*l),Z=(V=l*y)*N+(P=d*m)*x+(T=f*h)*w-((O=d*h)*N+(S=f*y)*x+(I=l*m)*w),k=O*M+(B=t*y)*x+(A=l*v)*w-(V*M+(E=d*v)*x+(j=t*h)*w),H=S*M+E*N+(R=t*m)*w-(P*M+B*N+(C=f*v)*w),K=I*M+j*N+C*x-(T*M+A*N+R*x),Y=S*_+I*g+O*b-(T*g+V*b+P*_),G=j*g+V*p+E*_-(B*_+A*g+O*p),X=B*b+C*g+P*p-(R*g+S*p+E*b),J=R*_+T*p+A*b-(j*b+C*_+I*p),$=t*z+f*U+l*D+d*Q;if(r=r||(0,o.createNumbers)(16),Math.abs($)<1e-21){if(i.Vector.equalsEpsilon(n.Matrix4.getMatrix3(e,a),u,1e-7)&&i.Vector.equals(n.Matrix4.getRow(e,3,c),s))return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=-e[12],r[13]=-e[13],r[14]=-e[14],r[15]=1,r;throw new Error("matrix is not invertible because its determinate is zero.")}return $=1/$,r[0]=z*$,r[1]=U*$,r[2]=D*$,r[3]=Q*$,r[4]=W*$,r[5]=F*$,r[6]=q*$,r[7]=L*$,r[8]=Z*$,r[9]=k*$,r[10]=H*$,r[11]=K*$,r[12]=Y*$,r[13]=G*$,r[14]=X*$,r[15]=J*$,r}},3286:function(e,r,t){var n=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(r,"__esModule",{value:!0}),r._continuousMultiply=r._multiplyByPoint=r._affineMultiplyByPoint=r._multiplyByPointAsVector=r._multiplyByVector=r._multiplyByScale=r._multiplyByUniformScale=r._multiplyByTranslation=r._multiplyByMatrix3=r._multiplyTransformation=r._multiply=void 0;var o=t(3030),i=t(3221);function a(e,r,t){var n=e[0],i=e[1],a=e[2],u=e[3],c=e[4],s=e[5],f=e[6],l=e[7],d=e[8],v=e[9],m=e[10],h=e[11],y=e[12],p=e[13],b=e[14],_=e[15],g=r[0],M=r[1],N=r[2],x=r[3],w=r[4],V=r[5],O=r[6],S=r[7],P=r[8],T=r[9],I=r[10],B=r[11],E=r[12],j=r[13],A=r[14],R=r[15],C=n*g+c*M+d*N+y*x,z=i*g+s*M+v*N+p*x,U=a*g+f*M+m*N+b*x,D=u*g+l*M+h*N+_*x,Q=n*w+c*V+d*O+y*S,W=i*w+s*V+v*O+p*S,F=a*w+f*V+m*O+b*S,q=u*w+l*V+h*O+_*S,L=n*P+c*T+d*I+y*B,Z=i*P+s*T+v*I+p*B,k=a*P+f*T+m*I+b*B,H=u*P+l*T+h*I+_*B,K=n*E+c*j+d*A+y*R,Y=i*E+s*j+v*A+p*R,G=a*E+f*j+m*A+b*R,X=u*E+l*j+h*A+_*R;return(t=t||(0,o.createNumbers)(16))[0]=C,t[1]=z,t[2]=U,t[3]=D,t[4]=Q,t[5]=W,t[6]=F,t[7]=q,t[8]=L,t[9]=Z,t[10]=k,t[11]=H,t[12]=K,t[13]=Y,t[14]=G,t[15]=X,t}r._multiply=a,r._multiplyTransformation=function(e,r,t){var n=e[0],i=e[1],a=e[2],u=e[4],c=e[5],s=e[6],f=e[8],l=e[9],d=e[10],v=e[12],m=e[13],h=e[14],y=r[0],p=r[1],b=r[2],_=r[4],g=r[5],M=r[6],N=r[8],x=r[9],w=r[10],V=r[12],O=r[13],S=r[14],P=n*y+u*p+f*b,T=i*y+c*p+l*b,I=a*y+s*p+d*b,B=n*_+u*g+f*M,E=i*_+c*g+l*M,j=a*_+s*g+d*M,A=n*N+u*x+f*w,R=i*N+c*x+l*w,C=a*N+s*x+d*w,z=n*V+u*O+f*S+v,U=i*V+c*O+l*S+m,D=a*V+s*O+d*S+h;return(t=t||(0,o.createNumbers)(16))[0]=P,t[1]=T,t[2]=I,t[3]=0,t[4]=B,t[5]=E,t[6]=j,t[7]=0,t[8]=A,t[9]=R,t[10]=C,t[11]=0,t[12]=z,t[13]=U,t[14]=D,t[15]=1,t},r._multiplyByMatrix3=function(e,r,t){var n=e[0],i=e[1],a=e[2],u=e[4],c=e[5],s=e[6],f=e[8],l=e[9],d=e[10],v=r[0],m=r[1],h=r[2],y=r[3],p=r[4],b=r[5],_=r[6],g=r[7],M=r[8],N=n*v+u*m+f*h,x=i*v+c*m+l*h,w=a*v+s*m+d*h,V=n*y+u*p+f*b,O=i*y+c*p+l*b,S=a*y+s*p+d*b,P=n*_+u*g+f*M,T=i*_+c*g+l*M,I=a*_+s*g+d*M;return(t=t||(0,o.createNumbers)(16))[0]=N,t[1]=x,t[2]=w,t[3]=0,t[4]=V,t[5]=O,t[6]=S,t[7]=0,t[8]=P,t[9]=T,t[10]=I,t[11]=0,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r._multiplyByTranslation=function(e,r,t){var n=r[0],i=r[1],a=r[2],u=n*e[0]+i*e[4]+a*e[8]+e[12],c=n*e[1]+i*e[5]+a*e[9]+e[13],s=n*e[2]+i*e[6]+a*e[10]+e[14];return(t=t||(0,o.createNumbers)(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=u,t[13]=c,t[14]=s,t[15]=e[15],t};var u=(0,o.createNumbers)(3);function c(e,r,t){if(1!==e[15])throw new Error("_multiplyByScale error: it should be affine matrix!");var n=r[0],a=r[1],u=r[2];return t=t||(0,o.createNumbers)(16),1===n&&1===a&&1===u?e!==t?i.Vector.clone(e,t):e:(t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=0,t[4]=a*e[4],t[5]=a*e[5],t[6]=a*e[6],t[7]=0,t[8]=u*e[8],t[9]=u*e[9],t[10]=u*e[10],t[11]=0,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=1,t)}function s(e,r,t){var n=r[0],i=r[1],a=r[2],u=r[3],c=e[0]*n+e[4]*i+e[8]*a+e[12]*u,s=e[1]*n+e[5]*i+e[9]*a+e[13]*u,f=e[2]*n+e[6]*i+e[10]*a+e[14]*u,l=e[3]*n+e[7]*i+e[11]*a+e[15]*u;return(t=t||(0,o.createNumbers)(4))[0]=c,t[1]=s,t[2]=f,t[3]=l,t}r._multiplyByUniformScale=function(e,r,t){return u[0]=r,u[1]=r,u[2]=r,c(e,u,t)},r._multiplyByScale=c,r._multiplyByVector=s,r._multiplyByPointAsVector=function(e,r,t){var n=r[0],i=r[1],a=r[2],u=e[0]*n+e[4]*i+e[8]*a,c=e[1]*n+e[5]*i+e[9]*a,s=e[2]*n+e[6]*i+e[10]*a;return(t=t||(0,o.createNumbers)(3))[0]=u,t[1]=c,t[2]=s,t},r._affineMultiplyByPoint=function(e,r,t){if(1!==e[15])throw new Error("matrix[15] !== 1");var n=r[0],i=r[1],a=r[2],u=e[0]*n+e[4]*i+e[8]*a+e[12],c=e[1]*n+e[5]*i+e[9]*a+e[13],s=e[2]*n+e[6]*i+e[10]*a+e[14];return(t=t||(0,o.createNumbers)(3))[0]=u,t[1]=c,t[2]=s,t};var f=(0,o.createNumbers)(4);r._multiplyByPoint=function(e,r,t){i.Vector.set(f,r[0],r[1],r[2],1),s(e,f,f),t=t||(0,o.createNumbers)(3);var a=n(i.Vector.itr(f),4),u=a[0],c=a[1],l=a[2],d=a[3];return i.Vector.set(t,u/d,c/d,l/d),t},r._continuousMultiply=function(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var o=t.length;e!==r&&i.Vector.clone(r,e);for(var u=0;u<o;++u)Array.isArray(t[u])&&"function"==typeof t[u][0]?(0,t[u][0])(e,t[u][1],e):16===t[u].length&&a(e,t[u],e);return e}},3700:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._setRow=r._getRow=void 0;var n=t(3030),o=t(3221);r._getRow=function(e,r,t){if(r<0||r>3)throw new Error("index < 0 || index > 3");t=t||(0,n.createNumbers)(4);var o=e[r],i=e[r+4],a=e[r+8],u=e[r+12];return t[0]=o,t[1]=i,t[2]=a,t[3]=u,t},r._setRow=function(e,r,t,n){if(r<0||r>3)throw new Error("index < 0 || index > 3");return(n=o.Vector.clone(e,n))[r]=t[0],n[r+4]=t[1],n[r+8]=t[2],n[r+12]=t[3],n}},2687:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._setTranslation=r._getTranslation=void 0;var n=t(3030);r._getTranslation=function(e,r){return(r=r||(0,n.createNumbers)(3))[0]=e[12],r[1]=e[13],r[2]=e[14],r},r._setTranslation=function(e,r,t){return e!==(t=t||(0,n.createNumbers)(16))&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[15]=e[15]),t[12]=r[0],t[13]=r[1],t[14]=r[2],t}},7019:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._transpose=void 0;var n=t(3030);r._transpose=function(e,r){var t=e[1],o=e[2],i=e[3],a=e[6],u=e[7],c=e[11];return(r=r||(0,n.createNumbers)(16))[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=t,r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=o,r[9]=a,r[10]=e[10],r[11]=e[14],r[12]=i,r[13]=u,r[14]=c,r[15]=e[15],r}},3030:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ary2Ns=r.xyzw2N4=r.xyz2N3=r.xyz2N2=r.Xyzw2Ns=r.createNumbers=void 0,r.createNumbers=function(e){for(var r,t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e>16)throw new Error("length > 16");for(var o=new Array(e),i=0;i<e;++i)o[i]=null!==(r=t[i])&&void 0!==r?r:0;return o};var t=function(){function e(e,r){this._xyzw=e,this._length=r}return Object.defineProperty(e.prototype,0,{get:function(){var e;return null!==(e=this._xyzw.x)&&void 0!==e?e:0},set:function(e){this._xyzw.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,1,{get:function(){var e;return null!==(e=this._xyzw.y)&&void 0!==e?e:0},set:function(e){this._xyzw.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,2,{get:function(){var e;return null!==(e=this._xyzw.z)&&void 0!==e?e:0},set:function(e){this._xyzw.z=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,3,{get:function(){var e;return null!==(e=this._xyzw.w)&&void 0!==e?e:0},set:function(e){this._xyzw.w=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),e}();r.Xyzw2Ns=t,r.xyz2N2=function(e){return new t(e,2)},r.xyz2N3=function(e){return new t(e,3)},r.xyzw2N4=function(e){return new t(e,4)};var n=function(){function e(e,r,t,n){this._array=e,this._length=r,this._start=t,this._stride=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,0,{get:function(){return this._array[this._start+0*this._stride]},set:function(e){this._array[this._start+0*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,1,{get:function(){return this._array[this._start+1*this._stride]},set:function(e){this._array[this._start+1*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,2,{get:function(){return this._array[this._start+2*this._stride]},set:function(e){this._array[this._start+2*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,3,{get:function(){return this._array[this._start+3*this._stride]},set:function(e){this._array[this._start+3*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,4,{get:function(){return this._array[this._start+4*this._stride]},set:function(e){this._array[this._start+4*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,5,{get:function(){return this._array[this._start+5*this._stride]},set:function(e){this._array[this._start+5*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,6,{get:function(){return this._array[this._start+6*this._stride]},set:function(e){this._array[this._start+6*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,7,{get:function(){return this._array[this._start+7*this._stride]},set:function(e){this._array[this._start+7*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,8,{get:function(){return this._array[this._start+8*this._stride]},set:function(e){this._array[this._start+8*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,9,{get:function(){return this._array[this._start+9*this._stride]},set:function(e){this._array[this._start+9*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,10,{get:function(){return this._array[this._start+10*this._stride]},set:function(e){this._array[this._start+10*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,11,{get:function(){return this._array[this._start+11*this._stride]},set:function(e){this._array[this._start+11*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,12,{get:function(){return this._array[this._start+12*this._stride]},set:function(e){this._array[this._start+12*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,13,{get:function(){return this._array[this._start+13*this._stride]},set:function(e){this._array[this._start+13*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,14,{get:function(){return this._array[this._start+14*this._stride]},set:function(e){this._array[this._start+14*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,15,{get:function(){return this._array[this._start+15*this._stride]},set:function(e){this._array[this._start+15*this._stride]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,16,{get:function(){return this._array[this._start+16*this._stride]},set:function(e){this._array[this._start+16*this._stride]=e},enumerable:!1,configurable:!0}),e}();r.ary2Ns=function(e,r,t,o){return void 0===t&&(t=0),void 0===o&&(o=1),new n(e,r,t,o)}},5601:function(e,r,t){var n=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r.OrientedBoundingBox=void 0;var i=t(3030),a=t(3221),u=t(5174),c=t(3178),s=t(7874);!function(e){function r(e,r){return r=r||(0,i.createNumbers)(3),a.Vector.set(r,e[0],e[1],e[2]),r}function t(e,r){r=r||(0,i.createNumbers)(9);var t=e;return a.Vector.set(r,t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]),r}e.getCenter=r,e.getHalfAxes=t,e.setCenter=function(e,r){for(var t=0;t<3;++t)e[t]=r[t];return e},e.setHalfAxes=function(e,r){for(var t=0;t<9;++t)e[t+3]=r[t];return e};var f=(0,i.createNumbers)(3),l=(0,i.createNumbers)(9);e.getModelMatrix=function(e,n){var o=t(e,l),i=r(e,f);return a.Vector.set(n,o[0],o[1],o[2],0,o[3],o[4],o[5],0,o[6],o[7],o[8],0,i[0],i[1],i[2],1)};var d=(0,i.createNumbers)(3),v=(0,i.createNumbers)(3),m=(0,i.createNumbers)(9);e.intersectPlane=function(e,n){var o=r(e,d),i=u.Plane.getNormal(n,v),s=u.Plane.getDistance(n),f=t(e,m),l=i[0],h=i[1],y=i[2],p=Math.abs(l*f[0]+h*f[1]+y*f[2])+Math.abs(l*f[3]+h*f[4]+y*f[5])+Math.abs(l*f[6]+h*f[7]+y*f[8]),b=a.Vector.dot(i,o)+s;return b<=-p?c.Intersect.OUTSIDE:b>=p?c.Intersect.INSIDE:c.Intersect.INTERSECTING};var h=(0,i.createNumbers)(3);e.getBoundingSphere=function(e,r){r=r||(0,i.createNumbers)(4);var u=t(e,m),c=s.Matrix3.getScale(u,h),f=Math.max.apply(Math,o([],n(a.Vector.itr(c)),!1));return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=f,r}}(r.OrientedBoundingBox||(r.OrientedBoundingBox={}))},5174:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Plane=void 0;var n=t(3030),o=t(3221),i=t(1168),a=t(1548);!function(e){var r=(0,n.createNumbers)(3);function t(e,t){o.Vector.set(r,e[0],e[1],e[2]);var n=o.Vector.magnitudeSquared(r);if(Math.abs(n-1)>1e-9)throw new Error("plane必须是单位向量！");return o.Vector.dot(r,t)+e[3]}function u(e,r){return r=r||(0,n.createNumbers)(3),o.Vector.set(r,e[0],e[1],e[2]),r}e.distancePlaneToPoint=t,e.projectPointOntoPlane=function(e,i,a){a=a||(0,n.createNumbers)(3);var u=t(i,e);return o.Vector.set(r,i[0],i[1],i[2]),o.Vector.multiplyByScalar(r,-u,a),o.Vector.add(a,e,a),a},e.getNormal=u,e.getDistance=function(e){return e[3]},e.setNormal=function(e,r){for(var t=0;t<3;++t)e[t]=r[t];return e},e.setDistance=function(e,r){return e[3]=r,e};var c=(0,n.createNumbers)(3),s=(0,n.createNumbers)(3);e.distanceRayToPlane=function(e,r,n){void 0===n&&(n=1e-5);var a=i.Ray.getDirection(e,c),f=u(r,s),l=-o.Vector.dot(a,f);if(!(Math.abs(l)<n))return t(r,i.Ray.getOrigin(e,c))/l};var f=(0,n.createNumbers)(16),l=(0,n.createNumbers)(4),d=(0,n.createNumbers)(3);e.transform=function(e,r,t){t=t||(0,n.createNumbers)(4);var i=a.Matrix4.inverse(a.Matrix4.transpose(r,f),f),c=a.Matrix4.multiplyByVector(i,e,l),s=u(e,d);return o.Vector.multiplyByScalar(c,1/o.Vector.magnitude(s),t),t},e.fromPointNormal=function(e,r,t){if(Math.abs(1-o.Vector.magnitude(r))>1e-6)throw new Error("Math.abs(1 - Vector.magnitude(normal)) > 0.000001");var i=-o.Vector.dot(r,e);return t=t||(0,n.createNumbers)(4),o.Vector.set(t,r[0],r[1],r[2],i)},e.UNIT_X=(0,n.createNumbers)(4,1,0,0,0),e.UNIT_Y=(0,n.createNumbers)(4,0,1,0,0),e.UNIT_Z=(0,n.createNumbers)(4,0,0,1,0)}(r.Plane||(r.Plane={}))},262:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ProjectionMatrix=void 0;var n,o,i=t(3030);n=r.ProjectionMatrix||(r.ProjectionMatrix={}),(o=n.Perspective||(n.Perspective={})).compute=function(e,r,t,n,o){if(t<=0||n<=0||e<=0||e>=Math.PI)throw new Error("near <= 0 || far <= 0 || fovY <= 0 || fovY >= Math.PI");var a=1/Math.tan(.5*e),u=a/r,c=(n+t)/(t-n),s=2*n*t/(t-n);return(o=o||(0,i.createNumbers)(16))[0]=u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c,o[11]=-1,o[12]=0,o[13]=0,o[14]=s,o[15]=0,o},o.getSseDenominator=function(e){return 2/e[5]},o.getPerspectiveParams=function(e){var r=e,t=r[10],n=(t-1)/(t+1),o=r[14]*(n-1)/(-2*n),i=n*o,a=2*o/r[0],u=(a+r[8]*a)/2,c=u-a,s=2*o/r[5],f=(s+r[9]*s)/2;return{n:o,f:i,r:u,l:c,t:f,b:f-s}},o.resetNearFar=function(e,r,t,n,o,i,a,u){var c=e/a;return{l:t*=c,r:n*=c,b:o*=c,t:i*=c,n:a=e,f:r}},o.getFovAndAspectRatio=function(e,r,t,n,o,i){var a=(e+r)/2,u=(t+n)/2,c=r-a,s=n-u,f=2*Math.atan(c/o),l=2*Math.atan(s/o);return{xOffset:a,yOffset:u,fov:f>l?f:l,hFov:f,vFov:l,aspectRatio:c/s}}},9806:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Quaternion=void 0;var n=t(3030),o=t(3221),i=t(6044),a=t(7874),u=t(1548);!function(e){var r=(0,n.createNumbers)(3);function t(e,t,i){var a=t/2,u=Math.sin(a);o.Vector.normalize(e,r);var c=r[0]*u,s=r[1]*u,f=r[2]*u,l=Math.cos(a);return i=i||(0,n.createNumbers)(4),o.Vector.clone([c,s,f,l],i),i}e.fromAxisAngle=t;var c=(0,n.createNumbers)(3,1,2,0),s=(0,n.createNumbers)(3);function f(e,r){var t,o,i,u,f,l=e[a.Matrix3.COLUMN0ROW0],d=e[a.Matrix3.COLUMN1ROW1],v=e[a.Matrix3.COLUMN2ROW2],m=l+d+v;if(m>0)f=.5*(t=Math.sqrt(m+1)),t=.5/t,o=(e[a.Matrix3.COLUMN1ROW2]-e[a.Matrix3.COLUMN2ROW1])*t,i=(e[a.Matrix3.COLUMN2ROW0]-e[a.Matrix3.COLUMN0ROW2])*t,u=(e[a.Matrix3.COLUMN0ROW1]-e[a.Matrix3.COLUMN1ROW0])*t;else{var h=c,y=0;d>l&&(y=1),v>l&&v>d&&(y=2);var p=h[y],b=h[p];t=Math.sqrt(e[a.Matrix3.getElementIndex(y,y)]-e[a.Matrix3.getElementIndex(p,p)]-e[a.Matrix3.getElementIndex(b,b)]+1);var _=s;_[y]=.5*t,t=.5/t,f=(e[a.Matrix3.getElementIndex(b,p)]-e[a.Matrix3.getElementIndex(p,b)])*t,_[p]=(e[a.Matrix3.getElementIndex(p,y)]+e[a.Matrix3.getElementIndex(y,p)])*t,_[b]=(e[a.Matrix3.getElementIndex(b,y)]+e[a.Matrix3.getElementIndex(y,b)])*t,o=-_[0],i=-_[1],u=-_[2]}return r?(r[0]=o,r[1]=i,r[2]=u,r[3]=f,r):(0,n.createNumbers)(4,o,i,u,f)}e.fromRotationMatrix3=f;var l=(0,n.createNumbers)(9);e.fromRotationMatrix4=function(e,r){return f(u.Matrix4.getMatrix3(e,l),r)},e.multiply=function(e,r,t){var n=e[0],i=e[1],a=e[2],u=e[3],c=r[0],s=r[1],f=r[2],l=r[3],d=u*c+n*l+i*f-a*s,v=u*s-n*f+i*l+a*c,m=u*f+n*s-i*c+a*l,h=u*l-n*c-i*s-a*f;return o.Vector.set(t,d,v,m,h)};var d=(0,n.createNumbers)(3);e.rotationTo=function(e,r,n){var a=o.Vector.dot(e,r);return a<-.999999?(i.Vector3.cross(i.Vector3.UNIT_X,e,d),o.Vector.magnitudeSquared(d)<.001&&i.Vector3.cross(i.Vector3.UNIT_Y,e,d),o.Vector.normalize(d,d),t(d,Math.PI,n)):a>.999999?o.Vector.set(n,0,0,0,1):(i.Vector3.cross(e,r,d),n=o.Vector.set(n,d[0],d[1],d[2],1+a),o.Vector.normalize(n,n))};var v=(0,n.createNumbers)(4);e.lerp=function(e,r,t,n){return o.Vector.multiplyByScalar(r,t,v),n=o.Vector.multiplyByScalar(e,1-t,n),o.Vector.add(v,n,n)};var m=(0,n.createNumbers)(4),h=(0,n.createNumbers)(4),y=(0,n.createNumbers)(4);e.slerp=function(e,r,t,n){var i=o.Vector.dot(e,r),a=r;if(i<0&&(i=-i,a=o.Vector.negate(r,m)),1-i<1e-6)return o.Vector.lerp(e,a,t,n);var u=Math.acos(i);return o.Vector.multiplyByScalar(e,Math.sin((1-t)*u),h),o.Vector.multiplyByScalar(a,Math.sin(t*u),y),n=o.Vector.add(h,y,n),o.Vector.multiplyByScalar(n,1/Math.sin(u),n)}}(r.Quaternion||(r.Quaternion={}))},1168:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Ray=void 0;var n,o=t(3221);(n=r.Ray||(r.Ray={})).getOrigin=function(e,r){return o.Vector.set(r,e[0],e[1],e[2])},n.getDirection=function(e,r){return o.Vector.set(r,e[3],e[4],e[5])}},9115:(e,r)=>{var t,n,o,i,a,u,c,s,f;Object.defineProperty(r,"__esModule",{value:!0}),r.Tween=void 0,(t=r.Tween||(r.Tween={})).Linear=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*e/n+r},(f=t.Quad||(t.Quad={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*(e/=n)*e+r},f.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),-t*(e/=n)*(e-2)+r},f.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),(e/=n/2)<1?t/2*e*e+r:-t/2*(--e*(e-2)-1)+r},(s=t.Cubic||(t.Cubic={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*(e/=n)*e*e+r},s.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*((e=e/n-1)*e*e+1)+r},s.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),(e/=n/2)<1?t/2*e*e*e+r:t/2*((e-=2)*e*e+2)+r},(c=t.Quart||(t.Quart={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*(e/=n)*e*e*e+r},c.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),-t*((e=e/n-1)*e*e*e-1)+r},c.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),(e/=n/2)<1?t/2*e*e*e*e+r:-t/2*((e-=2)*e*e*e-2)+r},(u=t.Quint||(t.Quint={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*(e/=n)*e*e*e*e+r},u.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*((e=e/n-1)*e*e*e*e+1)+r},u.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),(e/=n/2)<1?t/2*e*e*e*e*e+r:t/2*((e-=2)*e*e*e*e+2)+r},(a=t.Sine||(t.Sine={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),-t*Math.cos(e/n*(Math.PI/2))+t+r},a.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*Math.sin(e/n*(Math.PI/2))+r},a.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),-t/2*(Math.cos(Math.PI*e/n)-1)+r},(i=t.Expo||(t.Expo={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),0==e?r:t*Math.pow(2,10*(e/n-1))+r},i.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),e==n?r+t:t*(1-Math.pow(2,-10*e/n))+r},i.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),0==e?r:e==n?r+t:(e/=n/2)<1?t/2*Math.pow(2,10*(e-1))+r:t/2*(2-Math.pow(2,-10*--e))+r},(o=t.Circ||(t.Circ={})).easeIn=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),-t*(Math.sqrt(1-(e/=n)*e)-1)+r},o.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),t*Math.sqrt(1-(e=e/n-1)*e)+r},o.easeInOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),(e/=n/2)<1?-t/2*(Math.sqrt(1-e*e)-1)+r:t/2*(Math.sqrt(1-(e-=2)*e)+1)+r},(n=t.Bounce||(t.Bounce={})).easeIn=function(e,r,n,o){return void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=1),n-t.Bounce.easeOut(o-e,0,n,o)+r},n.easeOut=function(e,r,t,n){return void 0===r&&(r=0),void 0===t&&(t=1),void 0===n&&(n=1),(e/=n)<1/2.75?t*(7.5625*e*e)+r:e<2/2.75?t*(7.5625*(e-=1.5/2.75)*e+.75)+r:e<2.5/2.75?t*(7.5625*(e-=2.25/2.75)*e+.9375)+r:t*(7.5625*(e-=2.625/2.75)*e+.984375)+r},n.easeInOut=function(e,r,n,o){return void 0===r&&(r=0),void 0===n&&(n=1),void 0===o&&(o=1),e<o/2?.5*t.Bounce.easeIn(2*e,0,n,o)+r:.5*t.Bounce.easeOut(2*e-o,0,n,o)+.5*n+r}},3221:function(e,r,t){var n=this&&this.__generator||function(e,r){var t,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(e,a)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector=void 0;var o=t(3030);!function(e){function r(e,r){for(var t=e.length,n=0;n<t;++n)if(!r(e[n],n))return!1;return!0}function t(e,r,t){for(var n=e.length,o=t,i=0;i<n;++i)o=r(o,e[i],i);return o}e.set=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];if(e=e||(0,o.createNumbers)(r.length),r.length>e.length)throw new Error("args.length > target.length");return e instanceof Float64Array?e.set(r):M(r,e),e},e.every=r,e.reduce=t,e.itr=function(e){var r;return n(this,(function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<e.length?[4,e[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return++r,[3,1];case 4:return[2]}}))};var i,a=function(e,r){return e+r*r};function u(e){return t(e,a,0)}e.magnitudeSquared=u,e.magnitude=function(e){var r=u(e);return Math.sqrt(r)},e.isNormalized=function(e,r){void 0===r&&(r=1e-5);var t=u(e);return Math.abs(t-1)<r};var c,s=function(e,r,t){return e+r*i[t]};e.dot=function(e,r){return p(e,r),i=r,t(e,s,0)};var f,l=function(e,r,t){return e+(r-c[t])*(r-c[t])};function d(e,r){return p(e,r),c=r,t(e,l,0)}e.distanceSquared=d,e.distance=function(e,r){return Math.sqrt(d(e,r))};var v,m,h=function(e,r){return e===f[r]};e.equals=function(e,t){return p(e,t),f=t,r(e,h)};var y=function(e,r){return Math.abs(e-v[r])<m};function p(e,r){if(e.length!==r.length)throw new Error("left.length !== right.length")}function b(e,r,t){var n=e.length;p(e,t=t||(0,o.createNumbers)(n));for(var i=0;i<n;++i)t[i]=r(e[i],i);return t}function _(e,r,t,n){p(e,r),n&&p(e,n);var i=e.length;n=n||(0,o.createNumbers)(i);for(var a=0;a<i;++a)n[a]=t(e[a],r[a]);return n}e.equalsEpsilon=function(e,t,n){return void 0===n&&(n=0),p(e,t),v=t,m=n,r(e,y)},e.op1=b,e.op2=_;var g=function(e){return e};function M(e,r){return b(e,g,r)}e.clone=M;var N=0,x=function(e,r){return e*N};function w(e,r,t){return N=r,b(e,x,t)}e.multiplyByScalar=w,e.normalize=function(e,r,t){void 0===t&&(t=0);var n=u(e);if(!(n<=t))return w(e,1/Math.sqrt(n),r)},e.negate=function(e,r){return w(e,-1,r)};var V=function(e){return Math.abs(e)};e.abs=function(e,r){return b(e,V,r)};var O=function(e){return e-Math.floor(e)};e.fract=function(e,r){return b(e,O,r)};var S=function(e,r){return e-r};e.subtract=function(e,r,t){return _(e,r,S,t)};var P=function(e,r){return e+r};e.add=function(e,r,t){return _(e,r,P,t)};var T=function(e,r){return e*r};e.multiply=function(e,r,t){return _(e,r,T,t)};var I,B=function(e,r){return e/r};e.divide=function(e,r,t){return _(e,r,B,t)};var E=function(e,r){return e*(1-I)+r*I};e.lerp=function(e,r,t,n){return I=t,_(e,r,E,n)}}(r.Vector||(r.Vector={}))},6044:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Vector3=void 0;var n,o=t(3030),i=t(3221);(n=r.Vector3||(r.Vector3={})).cross=function(e,r,t){var n=e[0],o=e[1],a=e[2],u=r[0],c=r[1],s=r[2],f=o*s-a*c,l=a*u-n*s,d=n*c-o*u;return i.Vector.set(t,f,l,d)},n.getOrthogonalityVector=function(e,r,t,o){if(!i.Vector.isNormalized(e))throw new Error("!Vector.isNormalized(constVector)");if(!(t=i.Vector.isNormalized(r)?i.Vector.clone(r,t):i.Vector.normalize(r,t)))throw new Error("vectorToFix is [0, 0, 0]!");return t=n.cross(e,t,t),i.Vector.normalize(t,t),o&&i.Vector.clone(t,o),n.cross(t,e,t),i.Vector.normalize(t,t)},n.UNIT_X=Object.freeze([1,0,0]),n.UNIT_Y=Object.freeze([0,1,0]),n.UNIT_Z=Object.freeze([0,0,1]),n.ZERO=Object.freeze([0,0,0]),n.ONE=Object.freeze([1,1,1]),n.SCRATCH0=(0,o.createNumbers)(3),n.SCRATCH1=(0,o.createNumbers)(3),n.SCRATCH2=(0,o.createNumbers)(3),n.SCRATCH3=(0,o.createNumbers)(3),n.SCRATCH4=(0,o.createNumbers)(3),n.SCRATCH5=(0,o.createNumbers)(3),n.SCRATCH6=(0,o.createNumbers)(3),n.SCRATCH7=(0,o.createNumbers)(3),n.SCRATCH8=(0,o.createNumbers)(3),n.SCRATCH9=(0,o.createNumbers)(3)},8641:function(e,r,t){var n=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r.Vector4=void 0;var i=t(3030),a=t(3221),u=(0,i.createNumbers)(4,1,255,65025,16581375),c=(0,i.createNumbers)(4,1/255,1/255,1/255,0),s=(0,i.createNumbers)(4,1,1/255,1/65025,1/16581375),f=(0,i.createNumbers)(4);!function(e){e.packDepth=function(e,r){if(e<0||e>1)throw new Error("depth < 0 || depth > 1");if(1===e)return a.Vector.set(r,1,0,0,0);r=a.Vector.multiplyByScalar(u,e,r),a.Vector.fract(r,r);var t=a.Vector.set(f,r[1],r[2],r[3],r[3]);return a.Vector.multiply(t,c,t),a.Vector.subtract(r,t,r)},e.unpackDepth=function(e){return a.Vector.dot(e,s)};var r=new Uint32Array(1),t=new Uint8Array(r.buffer);e.uint32ToFourUint8s=function(e,i){if(e>4294967295)throw new Error("uint32Number(".concat(e,") > 0xFFFFFFFF"));return r[0]=e,a.Vector.set.apply(a.Vector,o([i],n(t),!1))},e.fourUint8sToUint32=function(e){return a.Vector.clone(e,t),r[0]},e.ONE=(0,i.createNumbers)(4,1,1,1,1),e.ZERO=(0,i.createNumbers)(4,0,0,0,0)}(r.Vector4||(r.Vector4={}))},9542:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ViewMatrix=void 0;var n=t(7874),o=t(1548),i=t(3030),a=t(9806),u=t(3221),c=t(6044),s=(0,i.createNumbers)(3),f=(0,i.createNumbers)(3),l=(0,i.createNumbers)(3);!function(e){function r(e,r,t,n,o){return(o=o||(0,i.createNumbers)(16))[0]=n[0],o[1]=t[0],o[2]=-r[0],o[3]=0,o[4]=n[1],o[5]=t[1],o[6]=-r[1],o[7]=0,o[8]=n[2],o[9]=t[2],o[10]=-r[2],o[11]=0,o[12]=-u.Vector.dot(n,e),o[13]=-u.Vector.dot(t,e),o[14]=u.Vector.dot(r,e),o[15]=1,o}e.computeView=r;var t=(0,i.createNumbers)(3),d=(0,i.createNumbers)(3),v=(0,i.createNumbers)(3);function m(e,n,o){var i=t,a=d,c=v,s=n;return u.Vector.set(i,-s[6],-s[7],-s[8]),u.Vector.set(a,s[3],s[4],s[5]),u.Vector.set(c,s[0],s[1],s[2]),r(e,i,a,c,o)}e.fromRotationMatrix3AndPosition=m;var h=(0,i.createNumbers)(9);e.fromRotationQuatAndPosition=function(e,r,t){return n.Matrix3.fromQuaternion(r,h),m(e,h,t)},e.lookAt=function(r,t,n,o){var i=u.Vector.subtract(t,r,s);if(!u.Vector.normalize(i,i))throw new Error("direction is undefined!");return c.Vector3.getOrthogonalityVector(i,n,l,f),e.computeView(r,i,l,f,o)},e.lookAtWithDirection=function(r,t,n,o){if(Math.abs(u.Vector.magnitudeSquared(t)-1)>1e-5)throw new Error("direction is not normalized!");return c.Vector3.getOrthogonalityVector(t,n,l,f),e.computeView(r,t,l,f,o)},e.getDirection=function(e,r){return u.Vector.set(r,-e[2],-e[6],-e[10])},e.getRight=function(e,r){return u.Vector.set(r,e[0],e[4],e[8])},e.getUp=function(e,r){return u.Vector.set(r,e[1],e[5],e[9])};var y=(0,i.createNumbers)(9);function p(e,r){(r=r||(0,i.createNumbers)(9))[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[1],r[4]=e[5],r[5]=e[9],r[6]=e[2],r[7]=e[6],r[8]=e[10]}e.getRotationQuat=function(e,r){return p(e,y),a.Quaternion.fromRotationMatrix3(y,r)},e.getRotationMatrix=p,e.getEye=function(e,r){var t=e,n=-t[0]*t[12]-t[1]*t[13]-t[2]*t[14],o=-t[4]*t[12]-t[5]*t[13]-t[6]*t[14],i=-t[8]*t[12]-t[9]*t[13]-t[10]*t[14];return u.Vector.set(r,n,o,i)};var b=(0,i.createNumbers)(3);e.distanceFromEye=function(e,r){return-o.Matrix4.affineMultiplyByPoint(e,r,b)[2]},e.ratioScreenToWorldSpace=function(e,r,t){return r[3]*e[5]*.5/t};var _=(0,i.createNumbers)(4),g=(0,i.createNumbers)(3),M=(0,i.createNumbers)(16),N=(0,i.createNumbers)(16),x=(0,i.createNumbers)(16);e.rotateWithAxis=function(e,r,t,n,c){return c=c||(0,i.createNumbers)(16),o.Matrix4.fromTranslation(r,M),u.Vector.negate(r,g),o.Matrix4.fromTranslation(g,N),a.Quaternion.fromAxisAngle(t,-n,_),o.Matrix4.fromRotateQuatAndTranslation(_,void 0,x),o.Matrix4.continuousMultiply(c,e,M,x,N)},e.computeOrthographicOffCenter=function(e,r,t,n,o,a,u){var c=1/(r-e),s=1/(n-t),f=1/(a-o),l=-(r+e)*c,d=-(n+t)*s,v=-(a+o)*f;return c*=2,s*=2,f*=-2,(u=u||(0,i.createNumbers)(16))[0]=c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=f,u[11]=0,u[12]=l,u[13]=d,u[14]=v,u[15]=1,u}}(r.ViewMatrix||(r.ViewMatrix={}))},5879:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clamp=void 0,r.clamp=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=1),e<r?r:e>t?t:e}},8996:function(e,r,t){var n=this&&this.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),o=this&&this.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||n(r,e,t)};Object.defineProperty(r,"__esModule",{value:!0}),o(t(8753),r),o(t(1327),r),o(t(5879),r),o(t(7925),r),o(t(3178),r),o(t(1820),r),o(t(3207),r),o(t(7874),r),o(t(1548),r),o(t(3030),r),o(t(5601),r),o(t(5174),r),o(t(262),r),o(t(9806),r),o(t(1168),r),o(t(9115),r),o(t(3221),r),o(t(6044),r),o(t(8641),r),o(t(9542),r)},3207:function(e,r,t){this&&this.__read,this&&this.__spreadArray,Object.defineProperty(r,"__esModule",{value:!0}),r.Kriging=void 0;var n=t(9675);function o(e,r){return e.resize(8*r),new Float64Array(e.arrayBuffer,0,r)}function i(e,r,t){var n=t;if(n.length!==r*r)throw new Error("Z.length !== n * n");n.fill(0);for(var o=0;o<r;o++)n[o*r+o]=e;return n}function a(e,r,t,n,o){var i,a,u=o;if(u.length!==t*n)throw new Error("Z.length !== n * m");for(i=0;i<t;i++)for(a=0;a<n;a++)u[i*n+a]=e[i*n+a]+r[i*n+a];return u}function u(e,r,t,n,o,i){var a,u,c,s=i;if(s.length!==t*o)throw new Error("Z.length !== n * p");for(a=0;a<t;a++)for(u=0;u<o;u++)for(s[a*o+u]=0,c=0;c<n;c++)s[a*o+u]+=e[a*n+c]*r[c*o+u];return s}var c=new n.ScalableBuffer;function s(e,r){var t,n,i,a=o(c,r);for(t=0;t<r;t++)a[t]=e[t*r+t];for(t=0;t<r;t++){for(n=0;n<t;n++)a[t]-=e[t*r+n]*e[t*r+n];if(a[t]<=0)return!1;for(a[t]=Math.sqrt(a[t]),n=t+1;n<r;n++){for(i=0;i<t;i++)e[n*r+t]-=e[n*r+i]*e[t*r+i];e[n*r+t]/=a[t]}}for(t=0;t<r;t++)e[t*r+t]=a[t];return!0}function f(e,r){var t,n,o,i;for(t=0;t<r;t++)for(e[t*r+t]=1/e[t*r+t],n=t+1;n<r;n++){for(i=0,o=t;o<n;o++)i-=e[n*r+o]*e[o*r+t];e[n*r+t]=i/e[n*r+n]}for(t=0;t<r;t++)for(n=t+1;n<r;n++)e[t*r+n]=0;for(t=0;t<r;t++){for(e[t*r+t]*=e[t*r+t],o=t+1;o<r;o++)e[t*r+t]+=e[o*r+t]*e[o*r+t];for(n=t+1;n<r;n++)for(o=n;o<r;o++)e[t*r+n]+=e[o*r+t]*e[o*r+n]}for(t=0;t<r;t++)for(n=0;n<t;n++)e[t*r+n]=e[n*r+t]}var l=new n.ScalableBuffer,d=new n.ScalableBuffer,v=new n.ScalableBuffer,m=new n.ScalableBuffer;function h(e,r){var t,n,i,a,u,c,s,f,h,y=r,p=o(l,r*r),b=o(d,r),_=o(v,r),g=o(m,r),M=0,N=0;for(t=0;t<r;t++)for(n=0;n<r;n++)p[t*r+n]=t==n?1:0;for(n=0;n<r;n++)g[n]=0;for(t=0;t<r;t++){for(c=0,n=0;n<r;n++)if(1!=g[n])for(i=0;i<r;i++)0==g[i]&&Math.abs(e[n*r+i])>=c&&(c=Math.abs(e[n*r+i]),N=n,M=i);if(++g[M],N!=M){for(a=0;a<r;a++)h=e[N*r+a],e[N*r+a]=e[M*r+a],e[M*r+a]=h;for(a=0;a<y;a++)h=p[N*r+a],p[N*r+a]=p[M*r+a],p[M*r+a]=h}if(_[t]=N,b[t]=M,0==e[M*r+M])return!1;for(f=1/e[M*r+M],e[M*r+M]=1,a=0;a<r;a++)e[M*r+a]*=f;for(a=0;a<y;a++)p[M*r+a]*=f;for(u=0;u<r;u++)if(u!=M){for(s=e[u*r+M],e[u*r+M]=0,a=0;a<r;a++)e[u*r+a]-=e[M*r+a]*s;for(a=0;a<y;a++)p[u*r+a]-=p[M*r+a]*s}}for(a=r-1;a>=0;a--)if(_[a]!=b[a])for(i=0;i<r;i++)h=e[i*r+_[a]],e[i*r+_[a]]=e[i*r+b[a]],e[i*r+b[a]]=h;return!0}function y(e,r,t,n,o){return r+(n-r)/t*(1-Math.exp(-1/o*Math.pow(e/t,2)))}function p(e,r,t,n,o){return r+(n-r)/t*(1-Math.exp(-1/o*(e/t)))}function b(e,r,t,n,o){return e>t?r+(n-r)/t:r+(n-r)/t*(e/t*1.5-.5*Math.pow(e/t,3))}function _(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return Math.sqrt(t*t+n*n+o*o)}!function(e){var r=new n.ScalableBuffer,t=new n.ScalableBuffer,c=new n.ScalableBuffer,l=new n.ScalableBuffer,d=new n.ScalableBuffer,v=new n.ScalableBuffer,m=new n.ScalableBuffer,g=new n.ScalableBuffer,M=new n.ScalableBuffer,N=new n.ScalableBuffer,x=new n.ScalableBuffer,w=new n.ScalableBuffer,V=new n.ScalableBuffer,O=[];e.train=function(e,n,S,P,T,I,B,E){var j;switch(T){case"gaussian":j=y;break;case"exponential":j=p;break;case"spherical":j=b}var A,R,C,z,U={t:e,x:n,y:S,z:P,nugget:0,range:0,sill:0,A:1/3,n:0,model:j},D=e.length,Q=O;for(Q.length=(D*D-D)/2,A=0,C=0;A<D;A++)for(R=0;R<A;R++,C++)Q[C]=Q[C]||[0,0],Q[C][0]=_([n[A],S[A],P[A]],[n[R],S[R],P[R]]),Q[C][1]=Math.abs(e[A]-e[R]);Q.sort((function(e,r){return e[0]-r[0]})),U.range=Q[(D*D-D)/2-1][0];var W=(D*D-D)/2>30?30:(D*D-D)/2,F=U.range/W,q=o(w,W);q.fill(0);var L=o(V,W);if(L.fill(0),W<30)for(z=0;z<W;z++)q[z]=Q[z][0],L[z]=Q[z][1];else{for(A=0,R=0,C=0,z=0;A<W&&R<(D*D-D)/2;A++,C=0){for(;Q[R][0]<=(A+1)*F&&(q[z]+=Q[R][0],L[z]+=Q[R][1],C++,!(++R>=(D*D-D)/2)););C>0&&(q[z]/=C,L[z]/=C,z++)}if(z<2)return U}D=z,U.range=q[D-1]-q[0];var Z=o(r,2*D);Z.fill(1);var k=o(t,D),H=U.A;for(A=0;A<D;A++){switch(T){case"gaussian":Z[2*A+1]=1-Math.exp(-1/H*Math.pow(q[A]/U.range,2));break;case"exponential":Z[2*A+1]=1-Math.exp(-1/H*q[A]/U.range);break;case"spherical":Z[2*A+1]=q[A]/U.range*1.5-.5*Math.pow(q[A]/U.range,3)}k[A]=L[A]}var K=function(e,r,t,n){var o,i,a=n;if(a.length!==2*r)throw new Error("Z.length !== m * n");for(o=0;o<r;o++)for(i=0;i<2;i++)a[i*r+o]=e[2*o+i];return a}(Z,D,0,o(c,2*D)),Y=u(K,Z,2,D,2,o(l,4)),G=(Y=a(Y,i(1/B,2,o(m,4)),2,2,o(d,4))).slice(0);s(Y,2)?f(Y,2):(h(G,2),Y=G);var X=u(u(Y,K,2,2,D,o(M,2*D)),k,2,D,1,o(g,2));U.nugget=X[0],U.sill=X[1]*U.range+U.nugget,U.n=n.length,D=n.length;var J=o(v,D*D);for(A=0;A<D;A++){for(R=0;R<A;R++)J[A*D+R]=U.model(Math.pow(Math.pow(n[A]-n[R],2)+Math.pow(S[A]-S[R],2),.5),U.nugget,U.range,U.sill,U.A),J[R*D+A]=J[A*D+R];J[A*D+A]=U.model(0,U.nugget,U.range,U.sill,U.A)}var $=a(J,i(I,D,o(x,D*D)),D,D,o(N,D*D)),ee=$.slice(0);if(s($,D)?f($,D):(h(ee,D),$=ee),E.length!==D)throw new Error("mResult.length !== n");return U.M=u($,e,D,D,1,E),U};var S=new n.ScalableBuffer,P=new n.ScalableBuffer;e.predict=function(e,r,t,n){var i,a=o(S,n.n);for(i=0;i<n.n;i++){var c=_([e,r,t],[n.x[i],n.y[i],n.z[i]]);a[i]=n.model(c,n.nugget,n.range,n.sill,n.A)}if(!n.M)throw new Error("!variogram.M");return u(a,n.M,1,n.n,1,o(P,1))[0]}}(r.Kriging||(r.Kriging={}))},9675:e=>{e.exports=vtxf["xr-base-utils"]}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}t.j=156;var n=t(8996);(vtxf=void 0===vtxf?{}:vtxf)["xr-math"]=n})();