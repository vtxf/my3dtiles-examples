/*! For license information please see xr-utils.js.LICENSE.txt */
var vtxf;(()=>{"use strict";var e={5208:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loop=t.conditional=t.parse=void 0,t.parse=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;if(Array.isArray(n))n.forEach((function(n){return e(t,n,r,o)}));else if("function"==typeof n)n(t,r,o,e);else{var i=Object.keys(n)[0];Array.isArray(n[i])?(o[i]={},e(t,n[i],r,o[i])):o[i]=n[i](t,r,o,e)}return r},t.conditional=function(e,t){return function(n,r,o,i){t(n,r,o)&&i(n,e,r,o)}},t.loop=function(e,t){return function(n,r,o,i){for(var a=[],c=n.pos;t(n,r,o);){var s={};if(i(n,e,r,s),n.pos===c)break;c=n.pos,a.push(s)}return a}}},2515:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.readBits=t.readArray=t.readUnsigned=t.readString=t.peekBytes=t.readBytes=t.peekByte=t.readByte=t.buildStream=void 0,t.buildStream=function(e){return{data:e,pos:0}};t.readByte=function(){return function(e){return e.data[e.pos++]}},t.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var n=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};t.readBytes=n,t.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}},t.readString=function(e){return function(t){return Array.from(n(e)(t)).map((function(e){return String.fromCharCode(e)})).join("")}},t.readUnsigned=function(e){return function(t){var r=n(2)(t);return e?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]}},t.readArray=function(e,t){return function(r,o,i){for(var a="function"==typeof t?t(r,o,i):t,c=n(e),s=new Array(a),u=0;u<a;u++)s[u]=c(r);return s}},t.readBits=function(e){return function(t){for(var n=function(e){return e.data[e.pos++]}(t),r=new Array(8),o=0;o<8;o++)r[7-o]=!!(n&1<<o);return Object.keys(e).reduce((function(t,n){var o=e[n];return o.length?t[n]=function(e,t,n){for(var r=0,o=0;o<n;o++)r+=e[t+o]&&Math.pow(2,n-o-1);return r}(r,o.index,o.length):t[n]=r[o.index],t}),{})}}},8841:(e,t,n)=>{t.A=void 0;var r=n(5208),o=n(2515),i={blocks:function(e){for(var t=[],n=e.data.length,r=0,i=(0,o.readByte)()(e);0!==i&&i;i=(0,o.readByte)()(e)){if(e.pos+i>=n){var a=n-e.pos;t.push((0,o.readBytes)(a)(e)),r+=a;break}t.push((0,o.readBytes)(i)(e)),r+=i}for(var c=new Uint8Array(r),s=0,u=0;u<t.length;u++)c.set(t[u],s),s+=t[u].length;return c}},a=(0,r.conditional)({gce:[{codes:(0,o.readBytes)(2)},{byteSize:(0,o.readByte)()},{extras:(0,o.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,o.readUnsigned)(!0)},{transparentColorIndex:(0,o.readByte)()},{terminator:(0,o.readByte)()}]},(function(e){var t=(0,o.peekBytes)(2)(e);return 33===t[0]&&249===t[1]})),c=(0,r.conditional)({image:[{code:(0,o.readByte)()},{descriptor:[{left:(0,o.readUnsigned)(!0)},{top:(0,o.readUnsigned)(!0)},{width:(0,o.readUnsigned)(!0)},{height:(0,o.readUnsigned)(!0)},{lct:(0,o.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,o.readArray)(3,(function(e,t,n){return Math.pow(2,n.descriptor.lct.size+1)}))},(function(e,t,n){return n.descriptor.lct.exists})),{data:[{minCodeSize:(0,o.readByte)()},i]}]},(function(e){return 44===(0,o.peekByte)()(e)})),s=(0,r.conditional)({text:[{codes:(0,o.readBytes)(2)},{blockSize:(0,o.readByte)()},{preData:function(e,t,n){return(0,o.readBytes)(n.text.blockSize)(e)}},i]},(function(e){var t=(0,o.peekBytes)(2)(e);return 33===t[0]&&1===t[1]})),u=(0,r.conditional)({application:[{codes:(0,o.readBytes)(2)},{blockSize:(0,o.readByte)()},{id:function(e,t,n){return(0,o.readString)(n.blockSize)(e)}},i]},(function(e){var t=(0,o.peekBytes)(2)(e);return 33===t[0]&&255===t[1]})),l=(0,r.conditional)({comment:[{codes:(0,o.readBytes)(2)},i]},(function(e){var t=(0,o.peekBytes)(2)(e);return 33===t[0]&&254===t[1]})),f=[{header:[{signature:(0,o.readString)(3)},{version:(0,o.readString)(3)}]},{lsd:[{width:(0,o.readUnsigned)(!0)},{height:(0,o.readUnsigned)(!0)},{gct:(0,o.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,o.readByte)()},{pixelAspectRatio:(0,o.readByte)()}]},(0,r.conditional)({gct:(0,o.readArray)(3,(function(e,t){return Math.pow(2,t.lsd.gct.size+1)}))},(function(e,t){return t.lsd.gct.exists})),{frames:(0,r.loop)([a,u,l,c,s],(function(e){var t=(0,o.peekByte)()(e);return 33===t||44===t}))}];t.A=f},2075:(e,t,n)=>{n.r(t),n.d(t,{TaskProcessor:()=>d});var r=n(9675),o=n(1100);function i(e,t){return null!=e?e:t}const a=Error,c=Error;function s(){if(!(0,o.defined)(d._canTransferArrayBuffer)){var e=new Worker(l("transferTypedArrayTest.js"));e.postMessage=i(e.webkitPostMessage,e.postMessage);var t=new Int8Array([99]);try{e.postMessage({array:t},[t.buffer])}catch(e){return d._canTransferArrayBuffer=!1,d._canTransferArrayBuffer}var n=o.when.defer();e.onmessage=function(t){var r=t.data.array,i=(0,o.defined)(r)&&99===r[0];n.resolve(i),e.terminate(),d._canTransferArrayBuffer=i},d._canTransferArrayBuffer=n.promise}return d._canTransferArrayBuffer}function u(e,t){--e._activeTasks;var n=t.id;if((0,o.defined)(n)){var r=e._deferreds,i=r[n];if((0,o.defined)(t.error)){var s=t.error;"RuntimeError"===s.name?(s=new c(t.error.message)).stack=t.error.stack:"DeveloperError"===s.name&&((s=new a(t.error.message)).stack=t.error.stack),i.reject(s)}else i.resolve(t.result);delete r[n]}}function l(e){var t=function(e){return e=e.endsWith(".js")?e:e+".js",(0,r.getFinalUri)(e,d.workerBaseAbsoluteUri)}(e);if((0,r.isCrossOriginUrl)(t)){var n,o='importScripts("'+t+'");';try{n=new Blob([o],{type:"application/javascript"})}catch(e){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);i.append(o),n=i.getBlob("application/javascript")}t=(window.URL||window.webkitURL).createObjectURL(n)}return t}var f;function p(e){var t=new Worker(((0,o.defined)(f)||(f=l("cesiumWorkerBootstrapper.js")),f));t.postMessage=i(t.webkitPostMessage,t.postMessage);const n=(0,r.isAbsoluteUri)(d.workerBaseAbsoluteUri)?d.workerBaseAbsoluteUri:"";var a={loaderConfig:{paths:{Workers:n},baseUrl:n},workerModule:e._workerName};return t.postMessage(a),t.onmessage=function(t){u(e,t.data)},t}function d(e,t){this._workerName=e,this._maximumActiveTasks=i(t,5),this._activeTasks=0,this._deferreds={},this._nextID=0}var h=[];d.prototype.scheduleTask=function(e,t){if((0,o.defined)(this._worker)||(this._worker=p(this)),!(this._activeTasks>=this._maximumActiveTasks)){++this._activeTasks;var n=this;return(0,o.when)(s(),(function(r){(0,o.defined)(t)?r||(t.length=0):t=h;var i=n._nextID++,a=o.when.defer();return n._deferreds[i]=a,n._worker.postMessage({id:i,parameters:e,canTransferArrayBuffer:r},t),a.promise}))}},d.prototype.initWebAssemblyModule=function(e){(0,o.defined)(this._worker)||(this._worker=p(this));var t=o.when.defer(),n=this,r=this._worker;return getWebAssemblyLoaderConfig(this,e).then((function(e){return(0,o.when)(s(),(function(i){var a,c=e.wasmBinary;(0,o.defined)(c)&&i&&(a=[c]),r.onmessage=function(e){r.onmessage=function(e){u(n,e.data)},t.resolve(e.data)},r.postMessage({webAssemblyConfig:e},a)}))})),t},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return(0,o.defined)(this._worker)&&this._worker.terminate(),(0,r.destroyObject)(this)},d._defaultWorkerModulePrefix="Workers/",d._workerModulePrefix=d._defaultWorkerModulePrefix,d._canTransferArrayBuffer=void 0,d.workerBaseAbsoluteUri="xr-static/workers/core"},9704:(e,t,n)=>{n.r(t),n.d(t,{decompressFrame:()=>c,decompressFrames:()=>s,parseGIF:()=>a});var r=n(8841),o=n(5208),i=n(2515);const a=e=>{const t=new Uint8Array(e);return(0,o.parse)((0,i.buildStream)(t),r.A)},c=(e,t,n)=>{if(!e.image)return void console.warn("gif frame does not have associated image.");const{image:r}=e,o=r.descriptor.width*r.descriptor.height;var i=((e,t,n)=>{const r=4096,o=n;var i,a,c,s,u,l,f,p,d,h;const v=new Array(n),y=new Array(r),_=new Array(r),g=new Array(4097);for(u=1+(a=1<<(h=e)),i=a+2,f=-1,c=(1<<(s=h+1))-1,p=0;p<a;p++)y[p]=0,_[p]=p;var b,m,w,O,P,j;for(b=m=w=O=P=j=0,d=0;d<o;){if(0===O){if(m<s){b+=t[j]<<m,m+=8,j++;continue}if(p=b&c,b>>=s,m-=s,p>i||p==u)break;if(p==a){c=(1<<(s=h+1))-1,i=a+2,f=-1;continue}if(-1==f){g[O++]=_[p],f=p,w=p;continue}for(l=p,p==i&&(g[O++]=w,p=f);p>a;)g[O++]=_[p],p=y[p];w=255&_[p],g[O++]=w,i<r&&(y[i]=f,_[i]=w,!(++i&c)&&i<r&&(s++,c+=i)),f=l}O--,v[P++]=g[O],d++}for(d=P;d<o;d++)v[d]=0;return v})(r.data.minCodeSize,r.data.blocks,o);r.descriptor.lct.interlaced&&(i=((e,t)=>{const n=new Array(e.length),r=e.length/t,o=function(r,o){const i=e.slice(o*t,(o+1)*t);n.splice.apply(n,[r*t,t].concat(i))},i=[0,4,2,1],a=[8,8,4,2];for(var c=0,s=0;s<4;s++)for(var u=i[s];u<r;u+=a[s])o(u,c),c++;return n})(i,r.descriptor.width));const a={pixels:i,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?a.colorTable=r.lct:a.colorTable=t,e.gce&&(a.delay=10*(e.gce.delay||10),a.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(a.transparentIndex=e.gce.transparentColorIndex)),n&&(a.patch=(e=>{const t=e.pixels.length,n=new Uint8ClampedArray(4*t);for(var r=0;r<t;r++){const t=4*r,o=e.pixels[r],i=e.colorTable[o]||[0,0,0];n[t]=i[0],n[t+1]=i[1],n[t+2]=i[2],n[t+3]=o!==e.transparentIndex?255:0}return n})(a)),a},s=(e,t)=>e.frames.filter((e=>e.image)).map((n=>c(n,e.gct,t)))},9928:(e,t,n)=>{function r(e,t,n,r,o){this._format=e,this._width=t,this._height=n,this._buffer=r,this._mipLevels=o}n.r(t),n.d(t,{CompressedTextureBuffer:()=>r}),Object.defineProperties(r.prototype,{internalFormat:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},bufferView:{get:function(){return this._buffer}},mipLevels:{get:function(){return this._mipLevels}}}),r.clone=function(e){if(e)return new r(e._format,e._width,e._height,e._buffer,e._mipLevels)},r.prototype.clone=function(){return r.clone(this)}},8753:(e,t,n)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.copyright=void 0;var o=null!==(r="".concat("vtxf-renderer","/").concat(n.j))&&void 0!==r?r:"-",i="vtxf-renderer",a=((Date.now()-173466578e4)/36e5).toFixed(1),c="%c🌏 ".concat(o,"%c ").concat("0.3.42",".").concat("59e8a7ec8ee2c583ae7f5de72033c64bc304bb90".slice(0,8),".").concat("2024-12-20T03:36:20.000Z"," (距今").concat(a,"个小时)\n%c").concat(i?i+"\n":"","当前网站正在使用").concat(o,"，此软件版权归").concat("vtxf","所有\n%c ");t.copyright=Object.seal({get owner(){return"vtxf"},get ownerlink(){return"www.czmtoy.com"},get info(){return c},get date(){return"2024-12-20T03:36:20.000Z"},get author(){return"vtxf"},get version(){return"0.3.42"},get name(){return"vtxf-renderer"},get commitId(){return"59e8a7ec8ee2c583ae7f5de72033c64bc304bb90"},print:function(){!force&&window._xe2_no_copy_print||console.info(this.info,"\n            font-size: 18px;\n            font-weight: 1000;\n            line-height: 1;\n            color: rgb(0, 120, 215);\n            padding-top: 20px;\n            padding-bottom: 10px;\n            ","\n            font-size: 10px;\n            font-weight: 1000;\n            color: rgb(0, 120, 215);\n            ","\n            font-size: 10px;\n            line-height: 1.5;\n            color: rgb(0, 120, 215);\n            padding-bottom: 2px;\n            padding-left: 35px;\n            ")}}),window.g_xe2CopyRights=window.g_xe2CopyRights||{},window.g_xe2CopyRights[o]=t.copyright},2372:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationPlayer=void 0;var a=n(6434),c=n(9125),s=n(9125),u=n(1466),l=function(e){function t(t){void 0===t&&(t=5e3);var n=e.call(this)||this;return n._animation=new a.Animation(t),n.dispose((function(){n.destroyAllChannels(),n._animation.destroy()})),n._player=new u.Player(t),n.dispose((function(){return n._player.destroy()})),n._initAnimation(),n._selectedChannelChanged=new s.Event,n}return o(t,e),Object.defineProperty(t.prototype,"animation",{get:function(){return this._animation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"player",{get:function(){return this._player},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChannelChanged",{get:function(){return this._selectedChannelChanged||(this._selectedChannelChanged=new s.Event),this._selectedChannelChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChannel",{get:function(){return this._selectedChannel},set:function(e){if(this._selectedChannel!==e){var t=this._selectedChannel;this._selectedChannel=e,this._selectedChannelChanged&&this._selectedChannelChanged.emit(e,t)}},enumerable:!1,configurable:!0}),t.prototype._initAnimation=function(){var e=this,t=this._animation,n=this._player;t.progressFunc=function(e){},this.dispose((function(){t.progressFunc=void 0,t.enterFunc=void 0,t.leaveFunc=void 0})),this.dispose(n.currentTimeChangedEvent.disposableOn((function(e,r){n.playing?t.currentTime=e:(t.currentTime=e,t.currentTime=Number.NaN)}))),this.dispose(n.startPlayingEvent.disposableOn((function(e){t.currentTime=e}))),this.dispose(n.stopPlayingEvent.disposableOn((function(e){t.currentTime=Number.NaN}))),this.dispose(this._animation.changedEvent.disposableOn((function(t){e._player.duration=t.duration})))},t.prototype.addChannel=function(){var e=new a.Channel(1e3,2e3);if(this._selectedChannel){var t=this._animation.channels.indexOf(this._selectedChannel);this._animation.channels.splice(t+1,0,e)}else this._animation.channels.push(e);return e},t.prototype.removeChannel=function(){if(this._selectedChannel){var e=this._animation.channels.indexOf(this._selectedChannel);-1!==e&&(this._animation.channels.splice(e,1),this._selectedChannel.destroy()),this._selectedChannel=void 0}else console.warn("请先选择需要删除的Channel.")},t.prototype.raiseChannel=function(e){var t=this._animation.channels.indexOf(e);if(-1===t)console.warn("-1 === index");else if(0===t)console.warn("cannot raise current channel!");else{if(!(t>0))throw new Error("should not be here!");this._animation.channels.splice(t,1),this._animation.channels.splice(t-1,0,e)}},t.prototype.lowerChannel=function(e){var t=this._animation.channels.indexOf(e);if(-1===t)console.warn("-1 === index");else if(t===this._animation.channels.length-1)console.warn("cannot lower current channel!");else{if(!(t>=0))throw new Error("should not be here!");this._animation.channels.splice(t,1),this._animation.channels.splice(t+1,0,e)}},t.prototype.destroyAllChannels=function(){var e,t,n=this._animation;if(n.hasChannels){try{for(var r=i(n.channels),o=r.next();!o.done;o=r.next()){var c=o.value;(0,a.destroyAnimationWithChildren)(c.animation)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.channels.length=0,this._selectedChannel=void 0}},t}(c.Destroyable);t.AnimationPlayer=l},6434:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.destroyAnimationWithChildren=t.Animation=t.Channel=void 0;var a=n(9125),c=n(9675),s=n(9125),u=0,l=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=1e3);var r=e.call(this)||this;return r._startTime=Number.NaN,r._enabled=!0,r._animation=new f(n),r.dispose((function(){return r._animation.destroy()})),r.dispose((function(){r._changedEvent&&(r._changedEvent.reset(),r._changedEvent=void 0)})),r.startTime=t,r.dispose(r._animation.changedEvent.disposableOn((function(){r.changedEvent&&r.changedEvent.emit(r)}))),r}return o(t,e),Object.defineProperty(t.prototype,"changedEvent",{get:function(){return this._changedEvent||(this._changedEvent=new s.Event),this._changedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this._animation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(e){this._startTime!==e&&(this._startTime=e,this.changedEvent&&this.changedEvent.emit(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.changedEvent&&this.changedEvent.emit(this))},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.Channel=l;var f=function(e){function t(t){void 0===t&&(t=0);var n=e.call(this)||this;return n._duration=t,n._currentTime=Number.NaN,n.dispose((function(){n._channels&&(n._channels.destroy(),n._channels=void 0),n.enterFunc=void 0,n.leaveFunc=void 0,n.progressFunc=void 0,n._changedEvent&&(n._changedEvent.reset(),n._changedEvent=void 0)})),n}return o(t,e),Object.defineProperty(t.prototype,"changedEvent",{get:function(){return this._changedEvent||(this._changedEvent=new s.Event),this._changedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name||(this._name="Unknown".concat(++u)),this._name},set:function(e){this._name!==e&&(this._name=e,this._changedEvent&&this._changedEvent.emit(this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasChannels",{get:function(){return!(!this._channels||0===this._channels.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"channels",{get:function(){var e=this;if(!this._channels){var t=new WeakMap,n=new c.ObservableArray;this.dispose(n.toChangeEvent.disposableOn((function(n,r){for(var o=n.length,i=0;i<o;++i){var a=n[i];if(a.deleteCount>0)for(var c=a.start;c<a.deleteCount;++c){var s=r.get(c);if(!(d=t.get(s)))throw console.error("!disposeFunc"),new Error("!disposeFunc");d(),t.delete(s)}if(a.items.length>0)for(var u=a.items,l=u.length,f=0;f<l;++f){var p=u[f],d=p.changedEvent.disposableOn((function(t){e.recomputeDurationFromChildren(!1),e._changedEvent&&e._changedEvent.emit(e)}));t.set(p,d)}}return!0}))),this.dispose(n.changedEvent.disposableOn((function(){e.recomputeDurationFromChildren(!1),e._changedEvent&&e._changedEvent.emit(e)}))),this._channels=n}return this._channels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},set:function(e){this._duration!==e&&(this._duration,this._duration=e,this._changedEvent&&this._changedEvent.emit(this))},enumerable:!1,configurable:!0}),t.prototype.recomputeDurationFromChildren=function(e){void 0===e&&(e=!1);var t=this._channels;if(t&&t.length>0){for(var n=0,r=t.length,o=0;o<r;++o){var i=t.get(o),a=i.animation,c=i.startTime;e&&a.recomputeDurationFromChildren();var s=c+a.duration;n<s&&(n=s)}this.duration=n}},t.prototype.valid=function(e){return(e=null!=e?e:this._currentTime)>=0&&e<=this.duration},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._currentTime},set:function(e){if(this.valid(e)||(e=Number.NaN),Number.isNaN(e)&&Number.isNaN(this._currentTime));else if(this._currentTime!==e){var t=this._currentTime;if(Number.isNaN(e)?this.leaveFunc&&this.leaveFunc(t):Number.isNaN(this._currentTime)&&this.enterFunc&&this.enterFunc(e),this._currentTime=e,Number.isNaN(e)||this.progressFunc&&this.progressFunc(e,t),this._channels)for(var n=this._channels.length,r=0;r<n;++r){var o=this._channels.get(r),i=o.animation,a=o.startTime;if(o.enabled)if(Number.isNaN(e))i.currentTime=Number.NaN;else if(Number.isNaN(t)){var c=e-a;i.currentTime=c}else{var s=a+i.duration;c=e-a,e>t?(e<=a&&(i.currentTime=c),a>t&&a<=e&&(i.currentTime=0),e>a&&e<=s&&(i.currentTime=c),s>t&&s<=e&&(i.currentTime=i.duration),e>s&&(i.currentTime=c)):e<t&&(e>s&&(i.currentTime=c),s>t&&s<=e&&(i.currentTime=i.duration),e>a&&e<=s&&(i.currentTime=c),a>t&&a<=e&&(i.currentTime=0),e<=a&&(i.currentTime=c))}}}},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.Animation=f,t.destroyAnimationWithChildren=function e(t){var n,r;if(t.hasChannels)try{for(var o=i(t.channels),a=o.next();!a.done;a=o.next())e(a.value.animation)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.destroy()}},6408:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1571:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStops=void 0;var i=n(3194),a=n(9125),c=[0,0,0,0],s=function(){function e(){this._value=[],this._valueStr="[]",this.value=[{ratio:0,rgba:[0,0,1,1]},{ratio:.2,rgba:[0,1,0,1]},{ratio:.8,rgba:[1,1,0,1]},{ratio:1,rgba:[1,0,0,1]}]}return Object.defineProperty(e.prototype,"valueChanged",{get:function(){return this._valueChanged||(this._valueChanged=new a.Event),this._valueChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return JSON.parse(JSON.stringify(this._value))},set:function(e){if(0!==e.length){var t;if(this._value.length===e.length){var n=o([],r(e),!1).sort((function(e,t){return e.ratio-t.ratio}));if(t=JSON.stringify(n),this._valueStr===t)return}t=t||JSON.stringify(o([],r(e),!1).sort((function(e,t){return e.ratio-t.ratio})));var i=this._value;if(this._value=JSON.parse(t),0===this._value.length)throw console.error("this._colorStops.length === 0"),new Error("this._colorStops.length === 0");this._valueChanged&&this._valueChanged.emit(this._value,i)}else console.error("value.length === 0")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueStr",{get:function(){return this._valueStr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minRatio",{get:function(){return this._value[0].ratio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxRatio",{get:function(){return this._value[this._value.length-1].ratio},enumerable:!1,configurable:!0}),e.prototype._getRatioIndex=function(e){if(e<this._value[0].ratio||e>this._value[this._value.length-1].ratio)throw console.error("ratio <= this._colorStops[0].ratio || ratio >= this._colorStops[this._colorStops.length - 1].ratio"),new Error("ratio <= this._colorStops[0].ratio || ratio >= this._colorStops[this._colorStops.length - 1].ratio");for(var t=this._value.length,n=0;n<t-1;++n)if(e>=this._value[n].ratio&&e<=this._value[n+1].ratio)return n;throw console.error("shoud not be here!"),new Error("shoud not be here!")},e.prototype.getRatioColor=function(e,t){e=(0,i.clamp)(e,this.minRatio,this.maxRatio);for(var n=this._getRatioIndex(e),r=this._value[n],o=this._value[n+1],a=(e-r.ratio)/(o.ratio-r.ratio),c=0;c<4;++c)t[c]=r.rgba[c]*(1-a)+o.rgba[c]*a;if(!t.some(Number.isNaN))return t;console.error("result NaN")},e.prototype.getColorsInUint8=function(e){if(e.length%4!=0)throw console.error("result.length % 4 !== 0"),new Error("result.length % 4 !== 0");for(var t=e.length/4,n=1/t,r=0;r<t;++r){var o=c;this.getRatioColor((r+.5)*n,o)||o.splice(0,4,0,0,0,0);for(var i=0;i<4;++i)e[4*r+i]=255*o[i]|0}return e},e}();t.ColorStops=s},280:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ComplexImage=t.getTypeFromImageUri=void 0;var i=n(9675),a=n(9675),c=n(9372),s=n(1631),u=n(2310),l=n(3264),f=n(3609),p=n(6780),d=n(2239),h=n(662);function v(e){var t=e.substring(e.lastIndexOf(".")+1);return y.suffixTypes[t]}t.getTypeFromImageUri=v;var y=function(e){function t(){var t=e.call(this)||this;return t._enabled=t.disposeVar((0,a.react)(!1)),t._uri=t.disposeVar((0,a.react)("")),t._type=t.disposeVar((0,a.react)(void 0)),t._size=t.disposeVar((0,a.reactArrayWithUndefined)(void 0)),t._pixelFormat=t.disposeVar((0,a.react)("RGBA")),t._flipY=t.disposeVar((0,a.react)(!0)),t._crossOriginReact=t.disposeVar((0,a.react)("")),t._autoplayReact=t.disposeVar((0,a.react)(!0)),t._loopReact=t.disposeVar((0,a.react)(!0)),t._copyTextureEvent=t.disposeVar(new i.Event),t._imageProcessingResettingEvent=t.disposeVar((0,i.createNextAnimateFrameEvent)(t.enabledChanged,t.uriChanged,t.typeChanged)),t._imageProcessingResetting=t.disposeVar(new c.ObjResettingWithEvent(t._imageProcessingResettingEvent,(function(){do{if(!t.enabled)break;if(!t.uri)break;var e=t.type;if(e||(e=v(t.uri)),!e)break;if("img"===e)return new s.ImageProcessing(t,t.uri);if("video"===e)return new f.VideoProcessing(t,t.uri);if("gif"===e)return new p.GifProcessing(t,t.uri);if("hls"===e)return new d.HlsProcessing(t,t.uri);if("flv"===e)return new h.FlvProcessing(t,t.uri)}while(0)}))),t._createNativeTextureEvent=t.disposeVar((0,i.createNextAnimateFrameEvent)(t.enabledChanged,t.sizeChanged,t.pixelFormatChanged,t.flipYChanged)),t}return o(t,e),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled.value},set:function(e){this._enabled.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabledChanged",{get:function(){return this._enabled.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri.value},set:function(e){this._uri.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uriChanged",{get:function(){return this._uri.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type.value},set:function(e){this._type.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typeChanged",{get:function(){return this._type.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size.value},set:function(e){this._size.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeChanged",{get:function(){return this._size.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelFormat",{get:function(){return this._pixelFormat.value},set:function(e){this._pixelFormat.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelFormatChanged",{get:function(){return this._pixelFormat.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this._flipY.value},set:function(e){this._flipY.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipYChanged",{get:function(){return this._flipY.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"crossOrigin",{get:function(){return this._crossOriginReact.value},set:function(e){this._crossOriginReact.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"crossOriginChanged",{get:function(){return this._crossOriginReact.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){return this._autoplayReact.value},set:function(e){this._autoplayReact.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoplayChanged",{get:function(){return this._autoplayReact.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loopReact.value},set:function(e){this._loopReact.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loopChanged",{get:function(){return this._loopReact.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copyTextureEvent",{get:function(){return this._copyTextureEvent},enumerable:!1,configurable:!0}),t.prototype.copyTexture=function(e){this._createNativeTextureEvent.flush(),this._copyTextureEvent.emit(e)},Object.defineProperty(t.prototype,"imageProcessingResetting",{get:function(){return this._imageProcessingResetting},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"createNativeTextureEvent",{get:function(){return this._createNativeTextureEvent},enumerable:!1,configurable:!0}),t.prototype.copyFromCanvas=function(e){e.width<=0||e.height<=0?console.warn("canvas.width <= 0 || canvas.height <= 0"):(this.size=[e.width,e.height],this.pixelFormat="RGBA",this.copyTexture({source:e}))},t.types=l.complexImageTypes,t.czmPixelFormats=u.czmPixelFormats,t.suffixTypes={png:"img",jpg:"img",svg:"img",webp:"img",gif:"gif",mp4:"video",mov:"video",webm:"video",flv:"flv",m3u8:"hls"},t}(i.Destroyable);t.ComplexImage=y},3264:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.complexImageTypes=void 0,t.complexImageTypes=["img","gif","video","flv","hls"]},2310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.czmPixelFormats=void 0,t.czmPixelFormats=["DEPTH_COMPONENT","DEPTH_STENCIL","ALPHA","RED","RG","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","RGB_DXT1","RGBA_DXT1","RGBA_DXT3","RGBA_DXT5","RGB_PVRTC_4BPPV1","RGB_PVRTC_2BPPV1","RGBA_PVRTC_4BPPV1","RGBA_PVRTC_2BPPV1","RGBA_ASTC","RGB_ETC1","RGB8_ETC2","RGBA8_ETC2_EAC","RGBA_BC7"]},7589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},662:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlvProcessing=t.FlvJsLoading=void 0;var c=n(9675),s=n(9121),u=n(7191),l=n(4680),f=function(e){function t(){var n=e.call(this)||this;return n._loading=!1,n._loadedEvent=n.disposeVar(new c.Event),n._loaded=!1,n._loadedPromise=new Promise((function(e){n._loadedPromiseResolve=e})),n._processing=n.disposeVar((0,l.createProcessingFromAsyncFunc)((function(e){return i(n,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return this._loading=!0,window.flvjs?(console.info("可能系统已经加载flvjs，此处不再加载！"),[3,3]):[3,1];case 1:return n=u.SceneObject.context.getStrFromEnv(t.path),[4,e.promise((0,c.loadJs)(n))];case 2:r.sent(),r.label=3;case 3:return this._loading=!1,this._loaded=!0,this._loadedEvent.emit(),this._loadedPromiseResolve(),[2]}}))}))}))),n._processingStart=n._processing.start(),n}return o(t,e),Object.defineProperty(t.prototype,"loading",{get:function(){return this._loading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedEvent",{get:function(){return this._loadedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedPromise",{get:function(){return this._loadedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.instance=function(){return t._instance=t._instance||new t,t._instance},t.path="${xr-utils-script-dir}/xr-static/xr-utils/flvjs/1.6.2/flv.min.js",t}(c.Destroyable);t.FlvJsLoading=f;var p=function(e){function t(t,n){var r=e.call(this)||this;r._complexImage=t,r._videoSrc=n;var o,i=document.createElement("video");return i.src=r._videoSrc,i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex="-100",i.style.visibility="hidden",(o=function(){i.crossOrigin=r._complexImage.crossOrigin})(),r.dispose(r._complexImage.crossOriginChanged.disposableOn(o)),(o=function(){i.autoplay=r._complexImage.autoplay})(),r.dispose(r._complexImage.autoplayChanged.disposableOn(o)),(o=function(){i.loop=r._complexImage.loop})(),r.dispose(r._complexImage.loopChanged.disposableOn(o)),i.muted=!0,document.body.appendChild(i),r._element=i,r.dispose((function(){return document.body.removeChild(i)})),r}return o(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),t}(c.Destroyable),d=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._videoSrc=n,r._videoDom=r.disposeVar(new p(r._complexImage,"")),r._processing=r.disposeVar((0,l.createProcessingFromAsyncFunc)((function(e){return i(r,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(i){switch(i.label){case 0:return t=this.videoSrc,n=f.instance(),[4,e.promise(n.loadedPromise)];case 1:return i.sent(),r=window.flvjs,o=this.element,[4,(0,s.step)(e,(function(){return new Promise((function(e,n){if(r.isSupported()){var i=r.createPlayer({type:"flv",url:t});i.attachMediaElement(o),i.load(),i.play(),o.xbsjFlvPlayer=i}else n("flvjs不支持！")}))}))];case 2:return i.sent(),[2]}}))}))}))),r._processingStartup=r._processing.start(),r}return o(t,e),Object.defineProperty(t.prototype,"videoSrc",{get:function(){return this._videoSrc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoDom",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.videoDom.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t}(c.Destroyable),h=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._imageUri=n,r._videoDom=r.disposeVar(new d(r._complexImage,r._imageUri)),r._update=r.disposeVar((0,s.createAnimateFrameWithStartValues)((function(){return r.update()}))),r._updateStart=r._update.start(),r}return o(t,e),Object.defineProperty(t.prototype,"videoDom",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoElement",{get:function(){return this._videoDom.element},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(!(this.videoElement.readyState<2)){var e=this._complexImage,t=this.videoElement,n=t.videoWidth,r=t.videoHeight;e.size=[n,r],e.pixelFormat="RGBA",e.copyTexture({source:this.videoElement})}},t}(c.Destroyable);t.FlvProcessing=h},6780:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GifProcessing=void 0;var i=n(4190),a=n(9125),c=n(9121),s=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._imageUri=n,r._gif=r.disposeVar(new i.Gif),r._update=r.disposeVar((0,c.createAnimateFrameWithStartValues)((function(){return r.update()}))),r._updateStart=r._update.start(),r._gif.url=r._imageUri,r}return o(t,e),Object.defineProperty(t.prototype,"gif",{get:function(){return this._gif},enumerable:!1,configurable:!0}),t.prototype.update=function(){var e=this,t=this._gif.player;if(t.gifFrames){var n,r=this._complexImage,o=t.gifCanvas,i=o.width,a=o.height;r.size=[i,a],r.pixelFormat="RGBA",r.copyTexture({source:t.gifCanvas}),(n=function(){t.autoPlayOnLoad=e._complexImage.autoplay})(),this.dispose(this._complexImage.autoplayChanged.disposableOn(n)),(n=function(){t.loop=e._complexImage.loop})(),this.dispose(this._complexImage.loopChanged.disposableOn(n))}},t}(a.Destroyable);t.GifProcessing=s},2239:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HlsProcessing=t.HlsJsLoading=void 0;var c=n(9675),s=n(9121),u=n(7191),l=n(4680),f=function(e){function t(){var n=e.call(this)||this;return n._loading=!1,n._loadedEvent=n.disposeVar(new c.Event),n._loaded=!1,n._loadedPromise=new Promise((function(e){n._loadedPromiseResolve=e})),n._processing=n.disposeVar((0,l.createProcessingFromAsyncFunc)((function(e){return i(n,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return this._loading=!0,window.Hls?(console.info("可能系统已经加载hlsjs，此处不再加载！"),[3,3]):[3,1];case 1:return n=u.SceneObject.context.getStrFromEnv(t.path),[4,e.promise((0,c.loadJs)(n))];case 2:r.sent(),r.label=3;case 3:return this._loading=!1,this._loaded=!0,this._loadedEvent.emit(),this._loadedPromiseResolve(),[2]}}))}))}))),n._processingStart=n._processing.start(),n}return o(t,e),Object.defineProperty(t.prototype,"loading",{get:function(){return this._loading},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedEvent",{get:function(){return this._loadedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedPromise",{get:function(){return this._loadedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.instance=function(){return t._instance=t._instance||new t,t._instance},t.path="${xr-utils-script-dir}/xr-static/xr-utils/hlsjs/1.4.12/hls.min.js",t}(c.Destroyable);t.HlsJsLoading=f;var p=function(e){function t(t,n){var r=e.call(this)||this;r._complexImage=t,r._videoSrc=n;var o,i=document.createElement("video");return i.src=r._videoSrc,i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex="-100",i.style.visibility="hidden",(o=function(){i.crossOrigin=r._complexImage.crossOrigin})(),r.dispose(r._complexImage.crossOriginChanged.disposableOn(o)),(o=function(){i.autoplay=r._complexImage.autoplay})(),r.dispose(r._complexImage.autoplayChanged.disposableOn(o)),(o=function(){i.loop=r._complexImage.loop})(),r.dispose(r._complexImage.loopChanged.disposableOn(o)),i.muted=!0,document.body.appendChild(i),r._element=i,r.dispose((function(){return document.body.removeChild(i)})),r}return o(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),t}(c.Destroyable),d=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._videoSrc=n,r._videoDom=r.disposeVar(new p(r._complexImage,"")),r._processing=r.disposeVar((0,l.createProcessingFromAsyncFunc)((function(e){return i(r,void 0,void 0,(function(){var t,n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return t=this.videoSrc,n=f.instance(),[4,e.promise(n.loadedPromise)];case 1:return a.sent(),r=window.Hls,o=new r,i=this.element,[4,(0,s.step)(e,(function(){return new Promise((function(e,n){i.xbsjHLS=o,o.attachMedia(i),o.on(r.Events.MEDIA_ATTACHED,(function(){o.loadSource(t),o.on(r.Events.MANIFEST_PARSED,(function(t,n){i.play(),e()}))})),o.on(r.Events.ERROR,(function(e,t){t.type;var r=t.details;t.fatal&&(o.destroy(),n(r))}))}))}))];case 2:return a.sent(),[2]}}))}))}))),r._processingStartup=r._processing.start(),r}return o(t,e),Object.defineProperty(t.prototype,"videoSrc",{get:function(){return this._videoSrc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoDom",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.videoDom.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t}(c.Destroyable),h=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._imageUri=n,r._videoDom=r.disposeVar(new d(r._complexImage,r._imageUri)),r._update=r.disposeVar((0,s.createAnimateFrameWithStartValues)((function(){return r.update()}))),r._updateStart=r._update.start(),r}return o(t,e),Object.defineProperty(t.prototype,"videoDom",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoElement",{get:function(){return this._videoDom.element},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(!(this.videoElement.readyState<2)){var e=this._complexImage,t=this.videoElement,n=t.videoWidth,r=t.videoHeight;e.size=[n,r],e.pixelFormat="RGBA",e.copyTexture({source:this.videoElement})}},t}(c.Destroyable);t.HlsProcessing=h},1631:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageProcessing=void 0;var c=n(9675),s=n(4680),u=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._imageUri=n,r._processing=r.disposeVar((0,s.createProcessingFromAsyncFunc)((function(e){return i(r,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return t=this._complexImage,[4,e.promise((0,c.fetchImage)(this._imageUri,this._complexImage.crossOrigin))];case 1:return(n=r.sent())?(n instanceof HTMLImageElement&&(t.size=[n.naturalWidth,n.naturalHeight],t.pixelFormat="RGBA",t.copyTexture({source:n})),[2]):[2]}}))}))}))),r._processingStart=r._processing.start(),r}return o(t,e),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t}(c.Destroyable);t.ImageProcessing=u},3609:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VideoProcessing=void 0;var i=n(9675),a=n(9121),c=function(e){function t(t,n){var r=e.call(this)||this;r._complexImage=t,r._videoSrc=n;var o,i=document.createElement("video");return i.src=r._videoSrc,i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex="-100",i.style.visibility="hidden",i.style.width="0px",i.style.height="0px",(o=function(){i.crossOrigin=r._complexImage.crossOrigin})(),r.dispose(r._complexImage.crossOriginChanged.disposableOn(o)),(o=function(){i.autoplay=r._complexImage.autoplay})(),r.dispose(r._complexImage.autoplayChanged.disposableOn(o)),(o=function(){i.loop=r._complexImage.loop})(),r.dispose(r._complexImage.loopChanged.disposableOn(o)),i.muted=!0,document.body.appendChild(i),r._element=i,r.dispose((function(){return document.body.removeChild(i)})),r}return o(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),t}(i.Destroyable),s=function(e){function t(t,n){var r=e.call(this)||this;return r._complexImage=t,r._imageUri=n,r._videoDom=r.disposeVar(new c(r._complexImage,r._imageUri)),r._update=r.disposeVar((0,a.createAnimateFrameWithStartValues)((function(){return r.update()}))),r._updateStart=r._update.start(),r}return o(t,e),Object.defineProperty(t.prototype,"videoDom",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoElement",{get:function(){return this._videoDom.element},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(!(this.videoElement.readyState<2)){var e=this._complexImage,t=this.videoElement,n=t.videoWidth,r=t.videoHeight;e.size=[n,r],e.pixelFormat="RGBA",e.copyTexture({source:this.videoElement})}},t}(i.Destroyable);t.VideoProcessing=s},453:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(280),t),o(n(3264),t),o(n(2310),t),o(n(7589),t),o(n(1631),t),o(n(3609),t),o(n(6780),t),o(n(2239),t),o(n(662),t)},7213:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},c=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof u?u(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(t=e[n](t)).done,t.value)}))}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGetLocalFilePath=t.defaultLocalFileServer=t.LocalFileServer=t.LocalRootDir=t.getFileArrayBuffer=t.getFileJson=t.getFileText=t.getSubEntriesFromDir=void 0;var l=n(9125);function f(e){var t,n,r,o;return i(this,void 0,void 0,(function(){var i,u,l,f,p,d,h,v,y,_,g;return a(this,(function(a){switch(a.label){case 0:i=[],u=[],l=e.entries(),a.label=1;case 1:a.trys.push([1,6,7,12]),f=!0,p=c(l),a.label=2;case 2:return[4,p.next()];case 3:if(d=a.sent(),t=d.done)return[3,5];o=d.value,f=!1;try{h=s(o,2),v=h[0],y=h[1],"file"===(_=y).kind?i.push(v):"directory"===_.kind&&u.push(v)}finally{f=!0}a.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return g=a.sent(),n={error:g},[3,12];case 7:return a.trys.push([7,,10,11]),f||t||!(r=p.return)?[3,9]:[4,r.call(p)];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:return[2,{files:i,dirs:u}]}}))}))}function p(e){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,e.getFile()];case 1:return[4,t.sent().text()];case 2:return[2,t.sent()]}}))}))}function d(e){return i(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,p(e)];case 1:t=n.sent();try{return[2,JSON.parse(t)]}catch(e){return[2,void 0]}return[2]}}))}))}function h(e){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,e.getFile()];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,t.sent()]}}))}))}t.getSubEntriesFromDir=f,t.getFileText=p,t.getFileJson=d,t.getFileArrayBuffer=h;var v=function(e){function t(t){var n=e.call(this)||this;return n._rootDirHandle=t,n}return o(t,e),Object.defineProperty(t.prototype,"rootDirHandle",{get:function(){return this._rootDirHandle},enumerable:!1,configurable:!0}),t.prototype.getSubFilesAndDirs=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,f(this._rootDirHandle)];case 1:return[2,e.sent()]}}))}))},t.prototype.getDir=function(e){return i(this,void 0,void 0,(function(){var t,n,r,o,i,c,s;return a(this,(function(a){switch(a.label){case 0:t=this._rootDirHandle,a.label=1;case 1:a.trys.push([1,6,7,8]),n=u(e),r=n.next(),a.label=2;case 2:return r.done?[3,5]:(o=r.value,[4,null==t?void 0:t.getDirectoryHandle(o)]);case 3:if(!(t=a.sent()))return console.log("getDirectoryHandle ".concat(o," failed")),[2,void 0];a.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return i=a.sent(),c={error:i},[3,8];case 7:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(c)throw c.error}return[7];case 8:return[2,t]}}))}))},t.prototype.getFile=function(e,t){return i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return[4,this.getDir(e)];case 1:if(!(n=o.sent()))return[2,void 0];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,n.getFileHandle(t)];case 3:return[2,o.sent()];case 4:return r=o.sent(),console.error("未能获取当前文件 ".concat(e.join("/"),"/").concat(t," error: ").concat(r),r),[2,void 0];case 5:return[2]}}))}))},t}(l.Destroyable);t.LocalRootDir=v;var y=function(e){function t(t){var n=e.call(this)||this;return n._prefix=t,n._startRootDirId=0,n._dirMap=new Map,n}return o(t,e),Object.defineProperty(t.prototype,"prefix",{get:function(){return this._prefix},enumerable:!1,configurable:!0}),t.prototype.getRootDirId=function(e){return i(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),console.log("window.showDirectoryPicker begin"),[4,window.showDirectoryPicker({id:e,mode:"read"})];case 1:return t=i.sent(),console.log("window.showDirectoryPicker end",t),[3,3];case 2:return n=i.sent(),console.error("LocalFileServer getRootDirId failed: ".concat(n),n),[2,void 0];case 3:return t?(r=++this._startRootDirId,o="".concat(this._prefix).concat(r),this._dirMap.set(o,new v(t)),[2,o]):[2]}}))}))},t.prototype.getRootDir=function(e){return this._dirMap.get(e)},t.prototype.getFile=function(e){return i(this,void 0,void 0,(function(){var t,n,r,o,i,c;return a(this,(function(a){switch(a.label){case 0:return(t=e.split("/")).length<2?(console.warn("LocalFileServer getFile failed: ".concat(e)),[2,void 0]):(n=t[0],(r=this._dirMap.get(n))?(o=t.slice(1,t.length-1),i=t[t.length-1],[4,r.getFile(o,i)]):(console.warn("LocalFileServer getFile failed: ".concat(e)),[2,void 0]));case 1:return(c=a.sent())?[2,c]:(console.warn("LocalFileServer getFile failed: ".concat(e)),[2,void 0])}}))}))},t.prototype.getText=function(e){return i(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.getFile(e)];case 1:return(t=n.sent())?[4,p(t)]:[2,void 0];case 2:return[2,n.sent()]}}))}))},t.prototype.getArrayBuffer=function(e){return i(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.getFile(e)];case 1:return(t=n.sent())?[4,h(t)]:[2,void 0];case 2:return[2,n.sent()]}}))}))},t.prototype.getJson=function(e){return i(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.getFile(e)];case 1:return(t=n.sent())?[4,d(t)]:[2,void 0];case 2:return[2,n.sent()]}}))}))},t.prototype.getLocalFilePath=function(e,t,n){return i(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.getRootDirId(t)];case 1:return(n=a.sent())?(r=this.getRootDir(n))?[4,r.getSubFilesAndDirs()]:(console.warn("getRootDir error!"),[2,void 0]):(console.warn("getRootDirId error!"),[2,void 0]);case 2:return(o=a.sent()).files?0===(i=e?o.files.filter((function(t){return e.some((function(e){return t.endsWith(e)}))})):o.files).length?(console.warn("找不到符合要求的文件！"),[2,void 0]):[2,"https://".concat(n,"/").concat(i[0])]:(console.warn("getSubFilesAndDirs error! 找不到符合要求的文件！"),[2,void 0])}}))}))},t}(l.Destroyable);t.LocalFileServer=y,t.defaultLocalFileServer=new y("xe2_local"),t.defaultGetLocalFilePath=function(e,n,r){return i(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,t.defaultLocalFileServer.getLocalFilePath(e,n,r)];case 1:return[2,o.sent()]}}))}))}},1466:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var i=n(9125),a=n(9125),c=n(9125),s=n(9675),u=function(e){function t(t,n){void 0===t&&(t=1e3),void 0===n&&(n=s.defaultStartUpdateFunc);var r=e.call(this)||this;return r._currentTime=r.disposeVar((0,c.react)(0)),r._speed=1,r._duration=t,r._loop=!1,r.startUpdateFunc=n,r._updateBindThis=r._update.bind(r),r.dispose((function(){r._cancelStartUpdateFunc&&(r._cancelStartUpdateFunc(),r._cancelStartUpdateFunc=void 0)})),r._startTimeStamp=Number.NaN,r.dispose((function(){r._startPlayingEvent&&r._startPlayingEvent.reset(),r._stopPlayingEvent&&r._stopPlayingEvent.reset()})),r}return o(t,e),Object.defineProperty(t.prototype,"startPlayingEvent",{get:function(){return this._startPlayingEvent=this._startPlayingEvent||new a.Event,this._startPlayingEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stopPlayingEvent",{get:function(){return this._stopPlayingEvent=this._stopPlayingEvent||new a.Event,this._stopPlayingEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTimeChangedEvent",{get:function(){return this._currentTime.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loopChangedEvent",{get:function(){return this._loopChangedEvent=this._loopChangedEvent||new a.Event,this._loopChangedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(e){this._loop!==e&&(this._loop=e,this._loopChangedEvent&&this._loopChangedEvent.emit(this._loop))},enumerable:!1,configurable:!0}),t.prototype._update=function(e){if(Number.isNaN(this._startTimeStamp))console.warn("Number.isNaN(this._startTimeStamp)");else{var t=(e-this._startTimeStamp)*this._speed;this._setCurrentTimeInner(t)}},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._currentTime.value},set:function(e){this._setCurrentTimeInner(e),this._resetStartTime()},enumerable:!1,configurable:!0}),t.prototype._setCurrentTimeInner=function(e){this._currentTime.value!==e&&(this._duration<=0?this._currentTime.value=0:e<0?this.loop?this._currentTime.value=this._duration+e%this._duration:(this._currentTime.value=0,this.playing&&this._stopPlaying()):e>this._duration?this.loop?this._currentTime.value=e%this._duration:(this._currentTime.value=this._duration,this.playing&&this._stopPlaying()):this._currentTime.value=e)},Object.defineProperty(t.prototype,"durationChangedEvent",{get:function(){return this._durationChangedEvent||(this._durationChangedEvent=new a.Event),this._durationChangedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},set:function(e){var t;if(e<0)console.warn("duration sholud greater than 0!");else if(this._duration!==e){var n=this._duration;this._duration=e,this._currentTime.value>this._duration&&(this._currentTime.value=this._duration),null===(t=this._durationChangedEvent)||void 0===t||t.emit(this._duration,n)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speedChangedEvent",{get:function(){return this._speedChangedEvent||(this._speedChangedEvent=new a.Event),this._speedChangedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(e){var t;if(this._speed!==e&&0!==e){var n=this._speed;this._speed=e,this._resetStartTime(),null===(t=this._speedChangedEvent)||void 0===t||t.emit(this._speed,n)}},enumerable:!1,configurable:!0}),t.prototype._resetStartTime=function(){this._startTimeStamp=performance.now()-this._currentTime.value/this._speed},t.prototype._startPlaying=function(){var e,t;this._resetStartTime(),this._cancelStartUpdateFunc=this.startUpdateFunc(this._updateBindThis),null===(e=this._startPlayingEvent)||void 0===e||e.emit(this._currentTime.value),null===(t=this._playingChangedEvent)||void 0===t||t.emit(!0)},t.prototype._stopPlaying=function(){var e,t;if(!this._cancelStartUpdateFunc)throw new Error("this._cancelStartUpdateFunc is undefined!");this._cancelStartUpdateFunc(),this._cancelStartUpdateFunc=void 0,null===(e=this._stopPlayingEvent)||void 0===e||e.emit(this._currentTime.value),null===(t=this._playingChangedEvent)||void 0===t||t.emit(!1)},Object.defineProperty(t.prototype,"playingChangedEvent",{get:function(){return this._playingChangedEvent||(this._playingChangedEvent=new a.Event),this._playingChangedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return!!this._cancelStartUpdateFunc},set:function(e){!!this._cancelStartUpdateFunc!==e&&(e?this._startPlaying():this._stopPlaying())},enumerable:!1,configurable:!0}),t}(i.Destroyable);t.Player=u},7143:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DivBoxPicker=t.BoxPicker=void 0;var i=n(9125),a=n(9125),c=n(2416),s=n(9125),u=function(e){function t(){var t=e.call(this)||this;t._pickRectEvent=t.disposeVar(new a.Event),t._updateRectEvent=t.disposeVar(new a.Event),t._pointerActionEvent=t.disposeVar(new a.Event),t._active=t.disposeVar((0,s.react)(!1)),t._pickRect={left0:0,top0:0,left1:0,top1:0};var n=0,r=0,o=0,i=0;return t.dispose(t._pointerActionEvent.disposableOn((function(e){var a=e.type,c=e.left,s=e.top;"PointerDown"===a?(t._active.value=!0,n=c,r=s,o=c,i=s,t._setPickRect({left0:n,top0:r,left1:o,top1:i}),t._updateRectEvent.emit(t._pickRect)):"PointerMove"===a?t._active.value&&(o=c,i=s,t._setPickRect({left0:n,top0:r,left1:o,top1:i}),t._updateRectEvent.emit(t._pickRect)):"PointerUp"===a&&t._active.value&&(t._active.value=!1,o=c,i=s,t._setPickRect({left0:n,top0:r,left1:o,top1:i}),t._updateRectEvent.emit(t._pickRect),t._pickRectEvent.emit(t._pickRect))}))),t}return o(t,e),t.prototype._setPickRect=function(e){var t=e.left0,n=e.left1,r=e.top0,o=e.top1;this._pickRect.left0=t,this._pickRect.left1=n,this._pickRect.top0=r,this._pickRect.top1=o},t.prototype.pointerDown=function(e,t){this._pointerActionEvent.emit({type:"PointerDown",left:e,top:t})},t.prototype.pointerMove=function(e,t){this._pointerActionEvent.emit({type:"PointerMove",left:e,top:t})},t.prototype.pointerUp=function(e,t){this._pointerActionEvent.emit({type:"PointerUp",left:e,top:t})},t.prototype.reset=function(){this._setPickRect({left0:0,top0:0,left1:0,top1:0}),this._updateRectEvent.emit(this._pickRect),this._pickRectEvent.emit(this._pickRect)},Object.defineProperty(t.prototype,"activeEvent",{get:function(){return this._active.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRectEvent",{get:function(){return this._updateRectEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pickRectEvent",{get:function(){return this._pickRectEvent},enumerable:!1,configurable:!0}),t.getLeftTopAndSize=function(e,t){t=t||{left:0,top:0,width:0,height:0,forward:!0};var n=e.left0,r=e.top0,o=e.left1,i=e.top1;return t.width=Math.abs(n-o),t.height=Math.abs(r-i),t.left=Math.min(n,o),t.top=Math.min(r,i),t.forward=o>n,t},t.contains=function(e,t,n){var r=n.left,o=n.top,i=n.width,a=n.height;return e>r&&e<=r+i&&t>=o&&t<=o+a},t}(i.Destroyable);t.BoxPicker=u;var l=function(e){function t(t){var n=e.call(this)||this,r=n.disposeVar(new c.PointerClickDeprecated(t));n.dispose(r.downEvent.disposableOn((function(e,t,r){return r.altKey&&n.pointerDown(e,t)}))),n.dispose(r.moveEvent.disposableOn((function(e,t){return n.pointerMove(e,t)}))),n.dispose(r.upEvent.disposableOn((function(e,t){return n.pointerUp(e,t)})));var o=document.createElement("div");o.style.backgroundColor="rgba(0, 0, 0, 0)",o.style.border="2px dashed red",o.style.position="absolute",o.style.boxSizing="border-box",o.style.pointerEvents="none",o.style.height="0px",o.style.width="0px",o.style.left="0px",o.style.top="0px",o.style.display="none",t.appendChild(o),n.dispose((function(){return t.removeChild(o)})),n.dispose(n.activeEvent.disposableOn((function(e){o.style.display=e?"block":"none"})));var i=function(){n.reset()};t.addEventListener("contextmenu",i),n.dispose((function(){return t.removeEventListener("contextmenu",i)}));var a={left:0,top:0,width:0,height:0,forward:!1};return n.dispose(n.updateRectEvent.disposableOn((function(e){if(u.getLeftTopAndSize(e,a)){var t=a.left,n=a.top,r=a.width,i=a.height;o.style.height="".concat(0|i,"px"),o.style.width="".concat(0|r,"px"),o.style.left="".concat(0|t,"px"),o.style.top="".concat(0|n,"px")}}))),n}return o(t,e),t}(u);t.DivBoxPicker=l},4664:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DivPointerClick=void 0;var i=n(9125),a=n(1793),c=function(e){function t(t,n){var r=e.call(this)||this;r._div=t,r._pointerClick=r.disposeVar(new a.PointerClick);var o=r,i=o.div,c=o.pointerClick,s=function(e){return c.pointerDown(e)},u=function(e){return c.pointerMove(e)},l=function(e){return c.pointerOut(e)},f=function(e){return c.pointerUp(e)};return i.addEventListener("pointerdown",s,n),i.addEventListener("pointermove",u,n),i.addEventListener("pointerout",l,n),i.addEventListener("pointerup",f,n),r.dispose((function(){i.removeEventListener("pointerdown",s,n),i.removeEventListener("pointermove",u,n),i.removeEventListener("pointerout",l,n),i.removeEventListener("pointerup",f,n)})),r}return o(t,e),Object.defineProperty(t.prototype,"div",{get:function(){return this._div},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointerClick",{get:function(){return this._pointerClick},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clickEvent",{get:function(){return this.pointerClick.clickEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dbclickEvent",{get:function(){return this.pointerClick.dbclickEvent},enumerable:!1,configurable:!0}),t}(i.Destroyable);t.DivPointerClick=c},5408:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DomElementEvent=void 0;var i=n(9125),a=-1,c=function(e){function t(t,n,r,o){var i=e.call(this)||this;i._domElement=t,i._type=n,i.callback=o;var c=function(e){return e.__xbsj_listenerNo__=++a,e.__xbsj_listenerTime__=Date.now(),e.__xbsj_lastCurrentTarget__=e.currentTarget,i.emit(e),i.callback&&i.callback(e)};return i._domElement.addEventListener(i._type,c,r),i.dispose((function(){return i._domElement.removeEventListener(i._type,c,r)})),i}return o(t,e),t.getLastLisenNo=function(){return a},t.getCurrentTarget=function(e){return e.__xbsj_lastCurrentTarget__},t.getListenerNo=function(e){return e.__xbsj_listenerNo__},t.getListenerTime=function(e){return e.__xbsj_listenerTime__},t.on=function(e,n){var r=t.getLastLisenNo();return e.disposableOn((function(e){var o=t.getListenerNo(e);(void 0===o||o>r)&&n(e)}))},Object.defineProperty(t.prototype,"element",{get:function(){return this._domElement},enumerable:!1,configurable:!0}),t.create=function(e,n,r){return new t(e,n,r)},t}(i.Event);t.DomElementEvent=c},1793:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.PointerClick=void 0;var s=n(9125),u=n(9125),l=n(9125),f=n(9121),p=n(4680),d=n(5408),h=n(374),v=function(e){function t(){var t=e.call(this)||this;t._clickEvent=t.disposeVar(new u.Event),t._dbclickEvent=t.disposeVar(new u.Event),t._pointerdownEvent=t.disposeVar(new u.Event),t._pointerupEvent=t.disposeVar(new u.Event),t._pointermoveEvent=t.disposeVar(new u.Event),t._pointeroutEvent=t.disposeVar(new u.Event),t.dbClickDelayTime=300,t.nativeClickDelayTime=500,t.clickMovementTolerantPixelSize=3,t.debugging=!1,t._enabled=t.disposeVar((0,l.react)(!0));var n=t.disposeVar((0,p.createProcessingFromAsyncFunc)((function(e){return i(t,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(o){switch(o.label){case 0:t=function(){var t,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,(0,f.step)(e,(function(e){return new Promise((function(t,n){e.disposer.dispose(n),e.disposer.dispose(d.DomElementEvent.on(r._pointerdownEvent,t))}))}))];case 1:return t=a.sent(),o=(0,h.getDomEventCurrentTargetPos)(t),n.debugging&&console.log("鼠标按下 ".concat(o.toString())),[4,(0,f.step)(e,(function(e){return new Promise((function(t,n){e.disposer.dispose(n);var i=setTimeout((function(){return t(!0)}),r.nativeClickDelayTime);e.disposer.dispose((function(){return clearTimeout(i)})),e.disposer.dispose(d.DomElementEvent.on(r._pointermoveEvent,(function(e){var n=c((0,h.getDomEventCurrentTargetPos)(e),2),r=n[0],i=n[1],a=c(o,2),s=a[0],u=a[1];(Math.abs(r-s)>3||Math.abs(i-u)>3)&&t(!1)}))),e.disposer.dispose(d.DomElementEvent.on(r._pointeroutEvent,(function(){return t(!1)}))),e.disposer.dispose(d.DomElementEvent.on(r._pointerupEvent,(function(){return t(!0)})))}))}))];case 2:return a.sent()?[4,(0,f.step)(e,(function(e){return new Promise((function(t,n){e.disposer.dispose(n);var i=setTimeout((function(){return t("timeout")}),r.dbClickDelayTime);e.disposer.dispose((function(){return clearTimeout(i)})),e.disposer.dispose(d.DomElementEvent.on(r._pointermoveEvent,(function(e){var n=c((0,h.getDomEventCurrentTargetPos)(e),2),r=n[0],i=n[1],a=c(o,2),s=a[0],u=a[1];(Math.abs(r-s)>3||Math.abs(i-u)>3)&&t("moved")}))),e.disposer.dispose(d.DomElementEvent.on(r._pointerdownEvent,t)),e.disposer.dispose(d.DomElementEvent.on(r._pointeroutEvent,(function(){return t("pointouted")}))),e.disposer.dispose(d.DomElementEvent.on(r._pointerupEvent,(function(){return t("pointuped")})))}))}))]:(n.debugging&&console.log("取消1"),[2,"continue"]);case 3:return"string"==typeof(i=a.sent())?(n.debugging&&console.log("触发单击事件！取消双击监听！error: ".concat(i)),n._clickEvent.emit(t),[2,"continue"]):[4,(0,f.step)(e,(function(e){return new Promise((function(t,n){e.disposer.dispose(n);var i=setTimeout((function(){return t(!1)}),r.nativeClickDelayTime);e.disposer.dispose((function(){return clearTimeout(i)})),e.disposer.dispose(d.DomElementEvent.on(r._pointermoveEvent,(function(e){var n=c((0,h.getDomEventCurrentTargetPos)(e),2),r=n[0],i=n[1],a=c(o,2),s=a[0],u=a[1];(Math.abs(r-s)>3||Math.abs(i-u)>3)&&t(!1)}))),e.disposer.dispose(d.DomElementEvent.on(r._pointeroutEvent,(function(){return t(!1)}))),e.disposer.dispose(d.DomElementEvent.on(r._pointerupEvent,(function(){return t(!0)})))}))}))];case 4:return a.sent()?(n.debugging&&console.log("触发双击事件！"),n._dbclickEvent.emit(i),[2]):(n.debugging&&console.log("取消2"),[2,"continue"])}}))},n=this,o.label=1;case 1:return[5,t()];case 2:o.sent(),o.label=3;case 3:return[3,1];case 4:return[2]}}))}))}))),r=function(e){e?n.restart():n.isRunning&&n.cancel()};return r(t.enabled),t.dispose(t.enabledChanged.disposableOn(r)),t}return o(t,e),Object.defineProperty(t.prototype,"clickEvent",{get:function(){return this._clickEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dbclickEvent",{get:function(){return this._dbclickEvent},enumerable:!1,configurable:!0}),t.prototype.pointerDown=function(e){this._pointerdownEvent.emit(e)},t.prototype.pointerUp=function(e){this._pointerupEvent.emit(e)},t.prototype.pointerMove=function(e){this._pointermoveEvent.emit(e)},t.prototype.pointerOut=function(e){this._pointeroutEvent.emit(e)},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled.value},set:function(e){this._enabled.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabledChanged",{get:function(){return this._enabled.changed},enumerable:!1,configurable:!0}),t}(s.Destroyable);t.PointerClick=v},2416:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.PointerClickDeprecated=void 0;var a=n(1122),c=n(9125),s=n(374),u=n(9125),l=function(e){function t(t){var n=e.call(this)||this;n._clickEvent=new u.Event,n._dbclickEvent=new u.Event,n._downEvent=new u.Event,n._upEvent=new u.Event,n._moveEvent=new u.Event,n._debouncing=new a.DebouncingDeprecated(300),n.dispose((function(){n._clickEvent.destroy(),n._dbclickEvent.destroy(),n._downEvent.destroy(),n._upEvent.destroy(),n._moveEvent.destroy(),n._debouncing.destroy()}));var r=!1,o=[0,0],c=!1;n._debouncing.progressFunc=function(e){var t=i(e,2),r=i(t[0],3),o=r[0],a=r[1],c=r[2],s=t[1];1===s?n._clickEvent.emit(o,a,c):s>=2?n._dbclickEvent.emit(o,a,c):console.error("point click should not be here!")},n._debouncing.start(),n.dispose((function(){n._debouncing.isRunning&&n._debouncing.cancel(),n._debouncing.destroy()}));var l=function(e){r=!0;var t=i((0,s.getDomEventCurrentTargetPos)(e),2),a=t[0],c=t[1];o[0]=a,o[1]=c,n._downEvent.emit(a,c,e)},f=function(e){var t=i((0,s.getDomEventCurrentTargetPos)(e),2),o=t[0],a=t[1];r&&!c&&n._debouncing.debounce(o,a,e),r=!1,c=!1,n._upEvent.emit(o,a,e)},p=function(e){var t=i((0,s.getDomEventCurrentTargetPos)(e),2),a=t[0],u=t[1];if(r&&!c){var l=i(o,2),f=l[0],p=l[1];(Math.abs(a-f)>3||Math.abs(u-p)>3)&&(c=!0)}n._moveEvent.emit(a,u,e)},d=function(){r=!1,c=!1};return t.addEventListener("pointerdown",l),t.addEventListener("pointerup",f),t.addEventListener("pointermove",p),t.addEventListener("pointerout",d),n.dispose((function(){t.removeEventListener("pointerdown",l),t.removeEventListener("pointerup",f),t.removeEventListener("pointermove",p),t.removeEventListener("pointerout",d)})),n}return o(t,e),Object.defineProperty(t.prototype,"clickEvent",{get:function(){return this._clickEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dbclickEvent",{get:function(){return this._dbclickEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"downEvent",{get:function(){return this._downEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"upEvent",{get:function(){return this._upEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moveEvent",{get:function(){return this._moveEvent},enumerable:!1,configurable:!0}),t}(c.Destroyable);t.PointerClickDeprecated=l},1075:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PointerHover=void 0;var i=n(9125),a=n(9125),c=n(9121),s=function(e){function t(){var t=e.call(this)||this;t._hoverEvent=t.disposeVar(new a.Event),t._hoverOutEvent=t.disposeVar(new a.Event),t._pointerdownEvent=t.disposeVar(new a.Event),t._pointerupEvent=t.disposeVar(new a.Event),t._pointermoveEvent=t.disposeVar(new a.Event),t._pointeroutEvent=t.disposeVar(new a.Event),t.delayTime=800;var n,r=t.disposeVar((0,c.createTimeout)()),o=function(){n?t._hoverEvent.emit(n):console.warn("!lastPointerEvent")};return t.dispose(t._pointerdownEvent.disposableOn((function(e){t._hoverOutEvent.emit()}))),t.dispose(t._pointerupEvent.disposableOn((function(e){t._hoverOutEvent.emit()}))),t.dispose(t._pointermoveEvent.disposableOn((function(e){n=e,r.restart(void 0,o,t.delayTime),t._hoverOutEvent.emit()}))),t.dispose(t._pointeroutEvent.disposableOn((function(e){r.cancel(),t._hoverOutEvent.emit()}))),t}return o(t,e),Object.defineProperty(t.prototype,"hoverEvent",{get:function(){return this._hoverEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverOutEvent",{get:function(){return this._hoverOutEvent},enumerable:!1,configurable:!0}),t.prototype.pointerDown=function(e){this._pointerdownEvent.emit(e)},t.prototype.pointerUp=function(e){this._pointerupEvent.emit(e)},t.prototype.pointerMove=function(e){this._pointermoveEvent.emit(e)},t.prototype.pointerOut=function(e){this._pointeroutEvent.emit(e)},t}(i.Destroyable);t.PointerHover=s},9658:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.PointerHoverDeprecated=void 0;var a=n(9125),c=n(9125),s=n(1122),u=n(374),l=function(e){function t(t,n){void 0===n&&(n=1500);var r=e.call(this)||this;r._hoverEvent=new c.Event,r._hoverOutEvent=new c.Event;var o=new s.DebouncingDeprecated(n);r.dispose((function(){return o.destroy()}));var a,l=0,f=0;o.progressFunc=function(){return r._hoverEvent.emit(l,f,a)};var p=function(e){var t;!o.isRunning&&o.restart(),a=e,t=i((0,u.getDomEventCurrentTargetPos)(e),2),l=t[0],f=t[1],o.debounce(),r._hoverOutEvent.emit()},d=function(e){var t;!o.isRunning&&o.restart(),a=e,t=i((0,u.getDomEventCurrentTargetPos)(a),2),l=t[0],f=t[1],o.debounce(),r._hoverOutEvent.emit()},h=function(e){var t;!o.isRunning&&o.restart(),a=e,t=i((0,u.getDomEventCurrentTargetPos)(a),2),l=t[0],f=t[1],o.debounce(),r._hoverOutEvent.emit()},v=function(e){o.isRunning&&o.cancel(),r._hoverOutEvent.emit()};return t.addEventListener("pointerdown",p),t.addEventListener("pointerup",d),t.addEventListener("pointermove",h),t.addEventListener("pointerout",v),r.dispose((function(){t.removeEventListener("pointerdown",p),t.removeEventListener("pointerup",d),t.removeEventListener("pointermove",h),t.removeEventListener("pointerout",v)})),r}return o(t,e),Object.defineProperty(t.prototype,"hoverEvent",{get:function(){return this._hoverEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverOutEvent",{get:function(){return this._hoverOutEvent},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.PointerHoverDeprecated=l},374:(e,t)=>{function n(e,t){t=t||[];var r=e.parentNode;return r?n(r,t.concat(r)):t}function r(e){var t=e.composedPath&&e.composedPath()||e.path,r=e.target;if(null!=t)return t.indexOf(window)<0?t.concat(window):t;if(r===window)return[window];if(null===r)throw new Error("target === null");return[r].concat(n(r),window)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDomEventCurrentTargetPos=void 0,t.getDomEventCurrentTargetPos=function(e){for(var t=e.offsetX,n=e.offsetY,o=r(e),i=0;i<o.length;++i){var a=o[i];if(!(a!==e.currentTarget&&a instanceof HTMLElement))break;t+=a.clientLeft,n+=a.clientTop,t+=a.offsetLeft,n+=a.offsetTop}return[t,n]}},6352:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7143),t),o(n(4664),t),o(n(5408),t),o(n(1793),t),o(n(2416),t),o(n(1075),t),o(n(9658),t),o(n(374),t)},5953:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncingWithStartValues=t.Debouncing=void 0;var c=n(9675),s=n(7257),u=function(e){function t(){var t=e.call(this,(function(e,n,r){var o=e.errorFunc;try{var a=i((0,c.debounce)(n,r),2),s=a[0],u=a[1];return t._doFunc=s,u}catch(e){return o(e),function(){}}}))||this;return t}return o(t,e),t.prototype.do=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._doFunc&&this._doFunc.apply(this,a([],i(e),!1))},t}(s.Processing);t.Debouncing=u;var l=function(e){function t(t,n){var r=e.call(this,(function(e){var o=e.errorFunc;try{var a=i((0,c.debounce)(t,n),2),s=a[0],u=a[1];return r._doFunc=s,u}catch(e){return o(e),function(){}}}))||this;return r}return o(t,e),t.prototype.do=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._doFunc&&this._doFunc.apply(this,a([],i(e),!1))},t}(s.Processing);t.DebouncingWithStartValues=l},1741:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createFetchingWithStartValues=t.createFetching=t.cancelableFetch=t.cancelableFetchWithProgress=void 0;var i=n(941),a=n(1902),c=n(1742);function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=new AbortController,c=o.signal,s=r(t,2),u=s[0],l=s[1];if(null==l?void 0:l.signal)throw console.error("init?.signal"),new Error("init?.signal");(l=l||{}).signal&&console.warn("revocableFetch error: init.signal would be override!"),l.signal=c;var f=!1,p=fetch(u,l);return e&&(p=p.then((function(t){if(!t.ok)return t;if(!t.body)throw Error("ReadableStream not yet supported in this browser.");var n=t.headers.get("content-length");n||console.warn("response.headers.get('content-length') is undefined... cannot get contentLength!");var r=n?parseInt(n,10):0,o=0;return new Response(new ReadableStream({start:function(n){if(!t.body)throw new Error("!response.body");var i=t.body.getReader();!function t(){i.read().then((function(i){var a=i.done,c=i.value;if(a)n.close();else{if(!c)throw new Error("!value");if(!e)throw new Error("!progressFunc");o+=c.byteLength,e(o,r),n.enqueue(c),t()}})).catch((function(e){n.error(e)}))}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})})).catch((function(e){throw f?(e instanceof Error&&20!==e.code&&console.error("error.code !== 20"),console.log("fetching cancelled!"),new i.CancelError("fetching cancelled! error: ".concat(e))):(e instanceof Error&&20===e.code&&console.error("error.code === 20"),e)}))),(0,a.setPromiseCancel)(p,(function(){f=!0,o.abort()})),p}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.apply(void 0,o([void 0],r(e),!1))}t.cancelableFetchWithProgress=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return s.apply(void 0,o([e],r(t),!1))},t.cancelableFetch=u,t.createFetching=function(){return(0,c.createProcessingFromPromiseCreateFunc)(u)},t.createFetchingWithStartValues=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.createProcessingFromPromiseCreateFuncWithStartValues.apply(void 0,o([u],r(e),!1))}},7960:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createSleepingWithStartValues=t.createSleeping=t.sleep=void 0;var i=n(941),a=n(1742),c=n(1902);function s(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=void 0,a=new Promise((function(r,i){o=i,t=globalThis.setTimeout((function(){t=void 0,r(n)}),e)}));return(0,c.setPromiseCancel)(a,(function(e){t&&(clearTimeout(t),t=void 0),o&&o(null!=e?e:new i.CancelError("sleep cancel error!"))})),a}t.sleep=s,t.createSleeping=function(){return(0,a.createProcessingFromPromiseCreateFunc)(s)},t.createSleepingWithStartValues=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a.createProcessingFromPromiseCreateFuncWithStartValues.apply(void 0,o([s,e],r(t),!1))}},7626:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ThrottlingWithStartValues=t.Throttling=void 0;var c=n(9675),s=n(7257),u=function(e){function t(){var t=e.call(this,(function(e,n,r){var o=e.errorFunc;try{var a=i((0,c.throttle)(n,r),2),s=a[0],u=a[1];return t._doFunc=s,u}catch(e){return o(e),function(){}}}))||this;return t}return o(t,e),t.prototype.do=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._doFunc&&this._doFunc.apply(this,a([],i(e),!1))},t}(s.Processing);t.Throttling=u;var l=function(e){function t(t,n){var r=e.call(this,(function(e){var o=e.errorFunc;try{var a=i((0,c.throttle)(t,n),2),s=a[0],u=a[1];return r._doFunc=s,u}catch(e){return o(e),function(){}}}))||this;return r}return o(t,e),t.prototype.do=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._doFunc&&this._doFunc.apply(this,a([],i(e),!1))},t}(s.Processing);t.ThrottlingWithStartValues=l},3014:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Transition=void 0;var i=n(9125),a=n(9125),c=n(1466),s=function(e){function t(t){var n=e.call(this)||this;return n._stop=n.disposeVar((0,a.react)(0)),n._current=n.disposeVar((0,a.react)(0)),n._start=n.disposeVar((0,a.react)(0)),n._player=n.disposeVar(new c.Player(200)),n.dispose(n._player.currentTimeChangedEvent.disposableOn((function(e){var t=e/n._player.duration;t=t>1?1:t<0?0:t;var r=n._start.value,o=n._stop.value;n._current.value=r+(o-r)*t}))),n.duration=t,n}return o(t,e),Object.defineProperty(t.prototype,"current",{get:function(){return this._current.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentChanged",{get:function(){return this._current.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._start.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sourceChanged",{get:function(){return this._start.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._stop.value},set:function(e){this._start.value=this._current.value,this._stop.value=e,this._player.currentTime=0,this._player.playing=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetChanged",{get:function(){return this._stop.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._player.duration},set:function(e){this._player.duration=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(e){this._start.value=e,this._current.value=e,this._stop.value=e,this._player.playing=!1},t}(i.Destroyable);t.Transition=s},3092:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNextMicroTaskEvent=t.createNextAnimateFrameEvent=void 0;var r=n(9675);Object.defineProperty(t,"createNextAnimateFrameEvent",{enumerable:!0,get:function(){return r.createNextAnimateFrameEvent}}),Object.defineProperty(t,"createNextMicroTaskEvent",{enumerable:!0,get:function(){return r.createNextMicroTaskEvent}})},699:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getPromiseFromProcessing=void 0;var i=n(9125);t.getPromiseFromProcessing=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=-1;return[function(t){return a===e.runningId&&e.isRunning&&e.cancel(t)},new Promise((function(n,c){e.isRunning&&e.cancel(),e.reset();var s=new i.Destroyable;s.dispose(e.completeEvent.disposableOn((function(e){n(e),s.isDestroyed()?console.error("disposer is destroyed! ".concat(s)):s.destroy()}))),s.dispose(e.errorEvent.disposableOn((function(e){c(e),s.isDestroyed()?console.error("disposer is destroyed! ".concat(s)):s.destroy()}))),e.start.apply(e,o([],r(t),!1)),a=e.runningId}))]}},9121:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5953),t),o(n(3092),t),o(n(1741),t),o(n(699),t),o(n(2357),t),o(n(7960),t),o(n(1647),t),o(n(5508),t),o(n(7626),t),o(n(3014),t)},2357:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimateFrameWithStartValues=t.createAnimateFrame=t.createIntervalWithStartValues=t.createInterval=t.createTimeoutWithStartValues=t.createTimeout=t.createNextMicroTaskWithStartValues=t.createNextMicroTask=t.createNextAnimateFrameWithStartValues=t.createNextAnimateFrame=void 0;var i=n(9675),a=n(4680);function c(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return t.apply(void 0,o([],r(n),!1))}catch(t){e(t)}}t.createNextAnimateFrame=function(){return new a.Processing((function(e,t){var n=e.completeFunc,r=e.errorFunc;return(0,i.nextAnimateFrame)((function(){return c(r,(function(){t&&t(),n()}))}))}))},t.createNextAnimateFrameWithStartValues=function(e){return new a.Processing((function(t){var n=t.completeFunc,r=t.errorFunc;return(0,i.nextAnimateFrame)((function(){return c(r,(function(){e&&e(),n()}))}))}))},t.createNextMicroTask=function(){return new a.Processing((function(e,t){var n=e.completeFunc,r=e.errorFunc;return(0,i.nextMicroTask)((function(){c(r,(function(){t&&t(),n()}))}))}))},t.createNextMicroTaskWithStartValues=function(e){return new a.Processing((function(t){var n=t.completeFunc,r=t.errorFunc;return(0,i.nextMicroTask)((function(){c(r,(function(){e&&e(),n()}))}))}))},t.createTimeout=function(){return new a.Processing((function(e,t,n){var r=e.completeFunc,o=e.errorFunc;return(0,i.timeout)((function(){c(o,(function(){t&&t(),r()}))}),null!=n?n:1e3)}))},t.createTimeoutWithStartValues=function(e,t){return new a.Processing((function(n){var r=n.completeFunc,o=n.errorFunc;return(0,i.timeout)((function(){c(o,(function(){e&&e(),r()}))}),null!=t?t:1e3)}))},t.createInterval=function(){return new a.Processing((function(e,t,n){var r=e.errorFunc;return void 0===n&&(n=1e3),(0,i.interval)((function(){return c(r,t)}),n)}))},t.createIntervalWithStartValues=function(e,t){return void 0===t&&(t=1e3),new a.Processing((function(n){var r=n.errorFunc;return(0,i.interval)((function(){return c(r,e)}),t)}))},t.createAnimateFrame=function(){return new a.Processing((function(e,t){var n=e.errorFunc;return(0,i.animateFrame)((function(e){return c(n,t,e)}))}))},t.createAnimateFrameWithStartValues=function(e){return new a.Processing((function(t){var n=t.errorFunc;return(0,i.animateFrame)((function(t){return c(n,e,t)}))}))}},1647:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.step=void 0;var c=n(4680),s=n(699);t.step=function(e,t){for(var n=this,u=[],l=2;l<arguments.length;l++)u[l-2]=arguments[l];return e.promise((0,c.pairToPromise)(s.getPromiseFromProcessing.apply(void 0,a([(0,c.createProcessingFromAsyncFunc)((function(c){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];return r(n,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e.disposer.dispose((function(){c.isDestroyed()||c.cancel()})),[4,t.apply(void 0,a([c],i(s),!1))];case 1:return[2,n.sent()]}}))}))}))],i(u),!1))))}},5508:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.stepProcessing=void 0;var i=n(4680),a=n(699);t.stepProcessing=function(e,t){for(var n=[],c=2;c<arguments.length;c++)n[c-2]=arguments[c];return e.promise((0,i.pairToPromise)(a.getPromiseFromProcessing.apply(void 0,o([t],r(n),!1))))}},1122:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncingDeprecated=void 0;var a=n(6410),c=n(9675),s=function(e){function t(t){void 0===t&&(t=300);var n=e.call(this,(function(e){var t=e.progressFunc,r=(e.completeFunc,e.errorFunc,i((0,c.debounce)((function(){if(!n._lastDebounceValue)throw new Error("!this._lastDebounceValue");t([n._lastDebounceValue,n._debouncTimes]),n._debouncTimes=0}),n._delayTime),2)),o=r[0],a=r[1];return n._d=o,function(){a()}}))||this;return n._delayTime=t,n._debouncTimes=0,n}return o(t,e),Object.defineProperty(t.prototype,"delayTime",{get:function(){return this._delayTime},enumerable:!1,configurable:!0}),t.prototype.debounce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isRunning?(++this._debouncTimes,this._lastDebounceValue=e,this._d&&this._d()):console.warn("Debouncing is not running!")},t}(a.ProcessingDeprecated);t.DebouncingDeprecated=s},3474:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Fetching=void 0;var c=n(1922),s=n(941),u=function(e){function t(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.call(this,(function(e){for(var n=e.progressFunc,r=e.completeFunc,u=e.errorFunc,l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];var p={},d={loaded:0,total:0},h=o._fetchArgs||l;if(0===h.length)throw new Error("fetchArgs.length === 0");if(c.cancelableFetchDeprecated.apply(void 0,a([p,function(e,t){d.loaded=e,d.total=t,n(d)}],i(h),!1)).then(t).then(r).catch((function(e){e instanceof s.CancelError||u(e)})),!p.cancelFunc)throw new Error("!cancelResult.cancelFunc");return p.cancelFunc}))||this;return n.length>0&&(o._fetchArgs=n),o}return o(t,e),Object.defineProperty(t.prototype,"fetchArgs",{get:function(){return this._fetchArgs},enumerable:!1,configurable:!0}),t}(n(6410).ProcessingDeprecated);t.Fetching=u},8491:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntervalDeprecated=void 0;var i=n(1824),a=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,(function(e){var t=e.progressFunc;return e.completeFunc,e.errorFunc,r._intervalFunc=t,r._intervalID&&console.error("this._intervalID should be undefined!"),r.leading&&t(),r._intervalID=setInterval(t,r.intervalTime),function(){if(!r._intervalID)throw console.error("this._intervalID should not be undefined!"),new Error("this._intervalID should not be undefined!");clearInterval(r._intervalID),r._intervalID=void 0}}))||this;return r.intervalTime=t,r.leading=n,r.dispose(r.intervalTimeChanged.disposableOn((function(){r._intervalID&&r._intervalFunc&&(clearInterval(r._intervalID),r._intervalID=setInterval(r._intervalFunc,r.intervalTime))}))),r}return o(t,e),t}(n(6410).ProcessingDeprecated);t.IntervalDeprecated=a,(0,i.defineReactiveProp)(a,"leading",!0),(0,i.defineReactiveProp)(a,"intervalTime",500)},1148:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TimingDeprecated=void 0;var i=n(941),a=n(9675),c=function(){function e(e,t,n,r,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.startTime=e,this.duration=t,this.delay=n,this.proccessFunc=r,this.completeFunc=o,this._lastUpdateTimeStamp=0,this._processData={ratio:0,timeStamp:0,timeStampFromStart:0,timeStampFromLastUpdate:0}}return e.prototype.update=function(e){var t=(e-this.startTime)/this.duration;t>=0&&(this._processData.ratio=t,this._processData.timeStamp=e,this._processData.timeStampFromStart=e-this.startTime,this._processData.timeStampFromLastUpdate=e-this._lastUpdateTimeStamp,this._lastUpdateTimeStamp=e,this.proccessFunc&&this.proccessFunc(this._processData),t>=1&&this.completeFunc&&this.completeFunc())},e.prototype.start=function(){this.startTime=performance.now()+this.delay,this._lastUpdateTimeStamp=this.startTime},e}(),s=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n=0),void 0===r&&(r=a.defaultStartUpdateFunc);var o,i=this;function s(){o&&o()}return(i=e.call(this,(function(e){var t=e.progressFunc,n=e.completeFunc,r=(e.errorFunc,i.startUpdateFunc&&i.startUpdateFunc(i._base.update.bind(i._base))||void 0);return i._base.startTime=performance.now(),i._base.duration=i.duration,i._base.delay=i.delay,i._base.proccessFunc=t,i._base.completeFunc=function(){r&&r(),n()},i._base.start(),o=r,s}))||this)._base=new c,i.duration=t,i.delay=n,i.startUpdateFunc=r,i}return o(t,e),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._base.startTime},enumerable:!1,configurable:!0}),t}(i.ProcessingDeprecated);t.TimingDeprecated=s},7509:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionDeprecated=void 0;var i=n(9125),a=n(9125),c=n(1148),s=function(e){function t(t){var n=e.call(this)||this;return n._duration=t,n._target=0,n._current=0,n._start=0,n._timing=new c.TimingDeprecated(Number.POSITIVE_INFINITY),n._timing.progressFunc=function(e){var t=e.ratio;t=t<0?0:t>1?1:t;var r=n._start*(1-t)+n._target*t;n._current=r,n._currentChanged&&n._currentChanged.emit(n._target,n._current)},n.dispose((function(){n._timing.isRunning&&n._timing.cancel(),n._timing.destroy()})),n}return o(t,e),t.prototype.reset=function(e,t){void 0===t&&(t=e),this._timing.isRunning&&this._timing.cancel(),this._target=e,this._current=t,this._start=e},Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){if(this._target!==e){this._target=e,this._timing.isRunning&&this._timing.cancel(),this._timing.reset(),this._start=this._current;var t=Math.abs(this._target-this._start);this._timing.duration=t*this._duration,this._timing.start()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentChanged",{get:function(){return this._currentChanged||(this._currentChanged=new a.Event),this._currentChanged},enumerable:!1,configurable:!0}),t}(i.Destroyable);t.TransitionDeprecated=s},1922:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.cancelableFetchDeprecated=void 0;var i=n(941);function a(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=new AbortController,c=a.signal,s=r(n,2),u=s[0],l=s[1];if(null==l?void 0:l.signal)throw console.error("init?.signal"),new Error("init?.signal");(l=l||{}).signal=c;var f=!1;(0,i._executeSetCancelFuncOrCancelResult)(e,(function(){f=!0,a.abort()}));var p=fetch(u,l);return t&&(p=p.then((function(e){if(!e.ok)return e;if(!e.body)throw Error("ReadableStream not yet supported in this browser.");var n=e.headers.get("content-length"),r=n?parseInt(n,10):0,o=0;return new Response(new ReadableStream({start:function(n){if(!e.body)throw new Error("!response.body");var i=e.body.getReader();!function e(){i.read().then((function(i){var a=i.done,c=i.value;if(a)n.close();else{if(!c)throw new Error("!value");if(!t)throw new Error("!progressFunc");o+=c.byteLength,t(o,r),n.enqueue(c),e()}})).catch((function(e){n.error(e)}))}()}}),{status:e.status,statusText:e.statusText,headers:e.headers})})).catch((function(e){throw f?(e instanceof Error&&20!==e.code&&console.error("error.code !== 20"),console.log("fetching cancelled!"),new i.CancelError("fetching cancelled!")):(e instanceof Error&&20===e.code&&console.error("error.code === 20"),e)}))),p}t.cancelableFetchDeprecated=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>=1){if("function"==typeof e[0]||void 0===e[0]){var n={},i=a.apply(void 0,o([n],r(e),!1)),c=n.cancelFunc;if(!c)throw new Error("!cancelResult.cancelFunc");return[c,i]}return a.apply(void 0,o([],r(e),!1))}throw new Error("cancelableFetch args error!")}},9800:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1122),t),o(n(3474),t),o(n(8491),t),o(n(4759),t),o(n(1148),t),o(n(7509),t),o(n(1922),t)},4759:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sleepDeprecated=void 0;var r=n(941);t.sleepDeprecated=function(e,t){var n,o=void 0,i=new Promise((function(t,r){o=r,n=globalThis.setTimeout((function(){n=void 0,t()}),e)})),a=function(e){n&&(clearTimeout(n),n=void 0),o&&o(null!=e?e:new r.CancelError("sleep cancel error!"))};return"boolean"==typeof t&&t?[a,i]:t?((0,r._executeSetCancelFuncOrCancelResult)(t,a),i):void 0}},6410:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessingDeprecated=void 0;var c=n(9125),s=n(9125),u=function(e){function t(t,n,r,o,i,a,c,s){var u=e.call(this)||this;return u._startProcessingFunc=t,u.startFunc=n,u.progressFunc=r,u.completeFunc=o,u.cancelFunc=i,u.cancelledFunc=a,u.errorFunc=c,u.finishedFunc=s,u._processingID=-1,u._status="Initial",u.dispose((function(){var e;return null===(e=u._statusChangedEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._startEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._progressEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._completeEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._cancelEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._cancelledEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._errorEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){var e;return null===(e=u._finishedEvent)||void 0===e?void 0:e.destroy()})),u.dispose((function(){return u.reset()})),u}return o(t,e),Object.defineProperty(t.prototype,"startEvent",{get:function(){return this._startEvent=this._startEvent||new s.Event,this._startEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressEvent",{get:function(){return this._progressEvent=this._progressEvent||new s.Event,this._progressEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeEvent",{get:function(){return this._completeEvent=this._completeEvent||new s.Event,this._completeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelEvent",{get:function(){return this._cancelEvent=this._cancelEvent||new s.Event,this._cancelEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cancelledEvent",{get:function(){return this._cancelledEvent=this._cancelledEvent||new s.Event,this._cancelledEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent=this._errorEvent||new s.Event,this._errorEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finishedEvent",{get:function(){return this._finishedEvent=this._finishedEvent||new s.Event,this._finishedEvent},enumerable:!1,configurable:!0}),t.prototype._completeFunc=function(e,t){this.processingID===e&&"Running"===this._status&&(this._status="Completed",this.completeFunc&&this.completeFunc(t),this._completeEvent&&this._completeEvent.emit(t),this.finishedFunc&&this.finishedFunc({status:"Completed",value:t}),this._finishedEvent&&this._finishedEvent.emit({status:"Completed",value:t}))},t.prototype._cancelFunc=function(e){"Running"===this._status&&(this._status="Cancelling",this.cancelFunc&&this.cancelFunc(e),this._cancelEvent&&this._cancelEvent.emit(e))},t.prototype._cancelledFunc=function(e){"Cancelling"===this._status&&(this._status="Cancelled",this.cancelledFunc&&this.cancelledFunc(e),this._cancelledEvent&&this._cancelledEvent.emit(e),this.finishedFunc&&this.finishedFunc({status:"Cancelled",cancelError:e}),this._finishedEvent&&this._finishedEvent.emit({status:"Cancelled",cancelError:e}))},t.prototype._errorFunc=function(e,t){this.processingID===e&&"Running"===this._status&&(this._status="Error",this.errorFunc&&this.errorFunc(t),this._errorEvent&&this._errorEvent.emit(t),this.finishedFunc&&this.finishedFunc({status:"Error",error:t}),this._finishedEvent&&this._finishedEvent.emit({status:"Error",error:t}))},t.prototype._progressFunc=function(e,t){this.processingID===e&&"Running"===this._status&&(this.progressFunc&&this.progressFunc(t),this._progressEvent&&this._progressEvent.emit(t))},t.prototype._startFunc=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if("Initial"===this._status){this._status="Running";var r=++this._processingID,o={completeFunc:this._completeFunc.bind(this,r),errorFunc:this._errorFunc.bind(this,r),progressFunc:this._progressFunc.bind(this,r),cancelFunc:this._cancel.bind(this,r),processingID:r},c=this._startProcessingFunc.apply(this,a([o],i(t),!1));return this._forceCancelFunc=c,this.startFunc&&this.startFunc.apply(this,a([],i(t),!1)),this._startEvent&&(e=this._startEvent).emit.apply(e,a([],i(t),!1)),r}return console.warn("this._status !== 'Initial' but start again!"),-1},Object.defineProperty(t.prototype,"_status",{get:function(){return this.__status},set:function(e){if(this.__status!==e){var t=this.__status;this.__status=e,this._statusChangedEvent&&this._statusChangedEvent.emit(e,t)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processingID",{get:function(){return this._processingID},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusChangedEvent",{get:function(){return this._statusChangedEvent||(this._statusChangedEvent=new s.Event),this._statusChangedEvent},enumerable:!1,configurable:!0}),t.prototype.reset=function(e){"Running"===this._status&&this.cancel(e),"Cancelled"===this._status||"Error"===this._status||"Completed"===this._status?this._status="Initial":"Cancelling"===this._status&&console.warn("Cannot reset! (this._status === 'Cancelling')")},Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t.prototype.cancel=function(e,t){return void 0===t&&(t=this.processingID),this._cancel(t,e)},t.prototype._cancel=function(e,t){var n=this;if(this.processingID===e)if("Running"===this._status){if(!this._forceCancelFunc)throw new Error("this._forceCancelFunc is undefined!");this._cancelFunc(t);var r=this._forceCancelFunc(t);if(this._forceCancelFunc=void 0,r&&r instanceof Promise)return r.then((function(){n._cancelledFunc(t)}));this._cancelledFunc(t)}else console.warn("this._status !== 'Running' but cancel")},t.prototype.start=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return this._startFunc.apply(this,a([],i(e),!1))}catch(e){console.error("processing start error: ".concat(e))}},t.prototype.restart=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{return this.isRunning&&this.cancel(e),this.isFinished&&this.reset(e),this.isInitial?this._startFunc.apply(this,a([],i(t),!1)):(console.warn("restart failed!"),-1)}catch(e){console.error("processing restart error: ".concat(e))}},Object.defineProperty(t.prototype,"isCompleted",{get:function(){return"Completed"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCancelled",{get:function(){return"Cancelled"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCancelling",{get:function(){return"Cancelling"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isError",{get:function(){return"Error"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInitial",{get:function(){return"Initial"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return"Running"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFinished",{get:function(){return this.isCancelled||this.isCompleted||this.isError},enumerable:!1,configurable:!0}),t}(c.Destroyable);t.ProcessingDeprecated=u},8963:function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessingStarter=void 0;var i=n(9125),a=n(9675),c=n(8936),s=function(){function e(e){this._startParams=e,this._cancelled=!1,this._cancelsMap=new Map}return Object.defineProperty(e.prototype,"disposer",{get:function(){var e=this;return this._disposer||(this._disposer=new i.Destroyable,this._disposer.dispose((function(){return e._disposer=void 0}))),this._disposer},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){var t,n,o;if(!this._cancelled){this._cancelled=!0,null===(o=this._disposer)||void 0===o||o.destroy(),this._cancelError=e;try{for(var i=r(this._cancelsMap.values()),a=i.next();!a.done;a=i.next())(0,a.value)(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this._cancelsMap.clear()}},e.prototype.check=function(){var e;if(this._cancelled)throw null!==(e=this._cancelError)&&void 0!==e?e:new c.CancelError("cancel from CancelManager!")},Object.defineProperty(e.prototype,"cancelFuncsNum",{get:function(){return(0,a.reduce)(this._cancelsMap.keys(),(function(e){return e+1}),0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processingID",{get:function(){return this._startParams.processingID},enumerable:!1,configurable:!0}),e.prototype.promises=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.map((function(t){var n=o(t,2),r=n[0],i=n[1];return e._cancelsMap.set(i,r),i.finally((function(){return e._cancelsMap.delete(i)}))}))},e.prototype.promise=function(e){var t=this,n=o(e,2),r=n[0],i=n[1];return this._cancelsMap.set(i,r),i.finally((function(){return t._cancelsMap.delete(i)}))},e.prototype.promiseAny=function(e){var t=this,n=[],r=e.map((function(e){var r=o(e,2),i=r[0],a=r[1];return t._cancelsMap.set(a,i),n.push(i),a.finally((function(){return t._cancelsMap.delete(a)}))}));return Promise.any(r).finally((function(){return n.forEach((function(e){return e(new c.CancelError("cancel from promiseAny!"))}))}))},e.prototype.promiseAll=function(e){var t=this,n=[],r=e.map((function(e){var r=o(e,2),i=r[0],a=r[1];return t._cancelsMap.set(a,i),n.push(i),a.finally((function(){return t._cancelsMap.delete(a)}))}));return Promise.all(r).finally((function(){return n.forEach((function(e){return e(new c.CancelError("cancel from promiseAll!"))}))}))},e.prototype.promiseRace=function(e){var t=this,n=[],r=e.map((function(e){var r=o(e,2),i=r[0],a=r[1];return t._cancelsMap.set(a,i),n.push(i),a.finally((function(){return t._cancelsMap.delete(a)}))}));return Promise.race(r).finally((function(){return n.forEach((function(e){return e(new c.CancelError("cancel from promiseRace!"))}))}))},e.prototype.checkAndPromises=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.map((function(t){var n=o(t,2),r=n[0],i=n[1];return e._cancelsMap.set(i,r),i.finally((function(){return e._cancelsMap.delete(i),e.check()}))}))},e.prototype.checkAndPromise=function(e){var t=this;return e instanceof Promise?e.finally((function(){return t.check()})):this.promise(e).finally((function(){return t.check()}))},e.prototype.complete=function(e){var t;0!==this.cancelFuncsNum&&console.warn("complete: this.cancelFuncsNum(".concat(this.cancelFuncsNum,")不为0！")),null===(t=this._disposer)||void 0===t||t.destroy(),this._cancelsMap.clear(),this._startParams.completeFunc(e)},e.prototype.error=function(e){var t;null===(t=this._disposer)||void 0===t||t.destroy(),this._cancelsMap.clear(),this._startParams.errorFunc(e)},e.prototype.progressFunc=function(e){this._startParams.progressFunc(e)},e.prototype.forceCancel=function(e){return this._startParams.cancelFunc(e)},e}();t.ProcessingStarter=s},4150:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapAsyncFuncToCancelablePromise=t.cancelablePromise=t._executeSetCancelFuncOrCancelResult=void 0;var i=n(8936);function a(e,t){"function"==typeof e?e(t):e.cancelFunc=t}function c(e,t){return t instanceof Promise?function(e,t){var n=void 0,r=t.then((function(e){if(n)throw n;return e}));return a(e,(function(e){n=null!=e?e:new i.CancelError("_revocablePromise_forPromise cancel error!")})),r}(e,t):function(e,t){return new Promise((function(n,r){a(e,(function(e){r(null!=e?e:new i.CancelError("_revocablePromise_forExecutor cancel error!"))}));try{t(n,r)}catch(e){r(e)}}))}(e,t)}function s(e,t){for(var n=[],c=2;c<arguments.length;c++)n[c-2]=arguments[c];var s,u=void 0,l=t.apply(void 0,o([{cancelCheck:function(){if(u)throw u},registerCancelFunc:function(e){(s=s||[]).push(e)}}],r(n),!1));return a(e,(function(e){if(u=null!=e?e:new i.CancelError("wrapAsyncFuncToRevocablePromise cancel error!"),s)for(var t=s.length-1;t>=0;--t)(0,s[t])(e)})),l}t._executeSetCancelFuncOrCancelResult=a,t.cancelablePromise=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(e[0]instanceof Promise){var n=c(o={},e[0]),r=o.cancelFunc;if(!r)throw new Error("!cancelResult.cancelFunc");return[r,n]}}else if(2===e.length){var o;if(e[0]instanceof Object)return c(o=e[0],e[1])}throw new Error("args wrong!")},t.wrapAsyncFuncToCancelablePromise=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>=1){if("function"==typeof e[0]){var n={},i=s.apply(void 0,o([n],r(e),!1)),a=n.cancelFunc;if(!a)throw new Error("!cancelResult.cancelFunc");return[a,i]}return s.apply(void 0,o([],r(e),!1))}throw new Error("wrapAsyncFuncToCancelablePromise args error!")}},9790:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessing=void 0;var i=n(6410),a=n(8963);t.createProcessing=function(e){return new i.ProcessingDeprecated((function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var c=new a.ProcessingStarter(t);return e.apply(void 0,o([c],r(n),!1)).then(c.complete.bind(c)).catch(c.error.bind(c)),c.cancel.bind(c)}))}},941:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(9790),t),o(n(6410),t),o(n(8963),t),o(n(8936),t),o(n(2660),t),o(n(4150),t)},8936:function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(Error);t.CancelError=o},2660:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.NextMicroTaskEvent=t.NextMicroTask=t.NextAnimationFrame=t.getPromiseFromAsyncFunc=t.getPromiseFromProcessing=t.getProcessingFromPromise=void 0;var s=n(9125),u=n(9125),l=n(9790),f=n(6410);function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;return[function(t){return r===e.processingID&&e.isRunning&&e.cancel(t)},new Promise((function(n,o){e.isRunning&&e.cancel(),e.reset();var c=e.finishedEvent.disposableOn((function(e){"Error"===e.status?o(e.error):"Cancelled"===e.status?o(e.cancelError):"Completed"===e.status&&n(e.value),c()}));e.start.apply(e,a([],i(t),!1)),r=e.processingID}))]}t.getProcessingFromPromise=function(e){return new f.ProcessingDeprecated((function(t){var n=t.completeFunc,r=t.errorFunc,o=!1;return e.then((function(e){o||n(e)})).catch((function(e){o||r(e)})),function(){o=!0}}))},t.getPromiseFromProcessing=p,t.getPromiseFromAsyncFunc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=(0,l.createProcessing)(e),o=i(p.apply(void 0,a([r],i(t),!1)),2);return[o[0],o[1].finally((function(){return r.destroy()}))]};var d=function(e){function t(t){return e.call(this,(function(e){for(var n=e.completeFunc,r=e.errorFunc,o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var s=requestAnimationFrame((function(e){try{var c=t.apply(void 0,a([],i(o),!1));n(c)}catch(e){r(e)}}));return function(){return cancelAnimationFrame(s)}}))||this}return o(t,e),t}(f.ProcessingDeprecated);t.NextAnimationFrame=d;var h=function(e){function t(t){return e.call(this,(function(e){for(var n,r=e.completeFunc,o=e.errorFunc,c=[],s=1;s<arguments.length;s++)c[s-1]=arguments[s];return new Promise((function(e,t){n=t,e()})).then((function(){r(t.apply(void 0,a([],i(c),!1)))})).catch(o),function(){n&&n()}}))||this}return o(t,e),t}(f.ProcessingDeprecated);t.NextMicroTask=h;var v=function(e){function t(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=e.call(this)||this;i._event=new u.Event;try{for(var a=c(r),s=a.next();!s.done;s=a.next()){var l=s.value;i.dispose(l.disposableOn((function(){!f.isRunning&&f.restart()})))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var f=new h((function(){i._event.emit()}));return i.dispose((function(){return f.destroy()})),i}return o(t,e),Object.defineProperty(t.prototype,"event",{get:function(){return this._event},enumerable:!1,configurable:!0}),t}(s.Destroyable);t.NextMicroTaskEvent=v},5256:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelsManager=void 0;var a=n(9125),c=n(9675),s=n(4161),u=n(1902),l=function(e){function t(){var t=e.call(this)||this;return t._cancelled=!1,t._promiseSet=new Set,t}return o(t,e),Object.defineProperty(t.prototype,"disposer",{get:function(){return this._disposer=this._disposer||new a.Destroyable,this._disposer},enumerable:!1,configurable:!0}),t.prototype.destroyImp=function(){this.finally()},t.prototype.cancel=function(e){var t,n,r;if(!this._cancelled){this._cancelled=!0,null===(r=this._disposer)||void 0===r||r.destroy(),this._cancelError=e;try{for(var o=i(this._promiseSet),a=o.next();!a.done;a=o.next()){var c=a.value;(0,u.cancelPromise)(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this._promiseSet.clear()}},Object.defineProperty(t.prototype,"cancelFuncsNum",{get:function(){return(0,c.reduce)(this._promiseSet,(function(e){return e+1}),0)},enumerable:!1,configurable:!0}),t.prototype.finally=function(){this._disposer&&!this._disposer.isDestroyed()&&this._disposer.destroy(),this._promiseSet.clear()},t.prototype.check=function(){var e;if(this._cancelled)throw null!==(e=this._cancelError)&&void 0!==e?e:new s.CancelError("cancel from CancelManager!")},t.prototype.promise=function(e){var t=this;return this._promiseSet.add(e),e.finally((function(){return t._promiseSet.delete(e),t.check()}))},t.prototype.promiseAny=function(e){var t=this,n=[],r=e.map((function(e){return t._promiseSet.add(e),(0,u.isPromiseCancelable)(e)&&n.push((0,u.getPromiseCancel)(e)),e.finally((function(){return t._promiseSet.delete(e)}))}));return Promise.any(r).finally((function(){return n.forEach((function(e){return e(new s.CancelError("cancel from promiseAny!"))})),n.length=0}))},t.prototype.promiseAll=function(e){var t=this,n=[],r=e.map((function(e){return t._promiseSet.add(e),(0,u.isPromiseCancelable)(e)&&n.push((0,u.getPromiseCancel)(e)),e.finally((function(){return t._promiseSet.delete(e)}))}));return Promise.all(r).finally((function(){return n.forEach((function(e){return e(new s.CancelError("cancel from promiseAll!"))})),n.length=0}))},t.prototype.promiseRace=function(e){var t=this,n=[],r=e.map((function(e){return t._promiseSet.add(e),(0,u.isPromiseCancelable)(e)&&n.push((0,u.getPromiseCancel)(e)),e.finally((function(){return t._promiseSet.delete(e)}))}));return Promise.race(r).finally((function(){return n.forEach((function(e){return e(new s.CancelError("cancel from promiseRace!"))})),n.length=0}))},t}(a.Destroyable);t.CancelsManager=l},7257:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createStartFuncFromAsyncFunc=t.Processing=void 0;var c=n(9125),s=n(9125),u=n(4161),l=n(5256),f=n(1902),p=function(e){function t(t){var n=e.call(this)||this;return n._startFunc=t,n._status="Initial",n._runningId=-1,n.dispose((function(){return n.isRunning&&n.cancel()})),n}return o(t,e),Object.defineProperty(t.prototype,"errorEvent",{get:function(){return this._errorEvent||(this._errorEvent=new s.Event),this._errorEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeEvent",{get:function(){return this._completeEvent||(this._completeEvent=new s.Event),this._completeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorFunc",{get:function(){return this._errorFunc},set:function(e){this._errorFunc!==e&&(this._errorFunc=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeFunc",{get:function(){return this._completeFunc},set:function(e){this._completeFunc!==e&&(this._completeFunc=e)},enumerable:!1,configurable:!0}),t.prototype.start=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if("Initial"===this._status){var r=++this._runningId;this._status="Running",this._cancelFunc=this._startFunc.apply(this,a([{completeFunc:function(t){var n;r===e._runningId&&"Running"===e._status&&(e._status="Completed",e._completeFunc&&e._completeFunc(t),null===(n=e._completeEvent)||void 0===n||n.emit(t))},errorFunc:function(t){var n;r===e._runningId&&"Running"===e._status&&(e._status="Error",e._errorFunc&&e._errorFunc(t),null===(n=e._errorEvent)||void 0===n||n.emit(t))},runningingID:r}],i(t),!1))}},t.prototype.cancel=function(e){var t;if(void 0===e&&(e=new u.CancelError("")),"Running"===this._status){if(!this._cancelFunc)throw new Error("!this._cancelFunc");this._status="Error",this._errorFunc&&this._errorFunc(e),null===(t=this._errorEvent)||void 0===t||t.emit(e),this._cancelFunc(e),this._cancelFunc=void 0}},t.prototype.reset=function(){"Running"===this._status&&console.error("processing cannot reset while running. you can first cancel it!"),"Completed"!==this._status&&"Error"!==this._status||(this._status="Initial")},Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInitial",{get:function(){return"Initial"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return"Running"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleted",{get:function(){return"Completed"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isError",{get:function(){return"Error"===this._status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runningId",{get:function(){return this._runningId},enumerable:!1,configurable:!0}),t.prototype.restart=function(e){void 0===e&&(e=new u.CancelError(""));for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isRunning&&this.cancel(e),this.reset(),this.start.apply(this,a([],i(t),!1))},t.prototype.restartIfNotRunning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isRunning||(this.reset(),this.start.apply(this,a([],i(e),!1)))},t}(c.Destroyable);t.Processing=p,t.createStartFuncFromAsyncFunc=function(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=new l.CancelsManager,c=t.completeFunc,s=t.errorFunc,u=e.apply(void 0,a([o],i(n),!1)).then(c).catch(s).finally((function(){return o.destroy()}));return(0,f.setPromiseCancel)(u,o.cancel.bind(o)),function(e){return(0,f.cancelPromise)(u,e)}}}},1742:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessingFromAsyncFuncWithStartValues=t.createProcessingFromAsyncFunc=t.asyncFuncToCancelablePromise=t.cancelFuncToCancelablePromise=t.createProcessingFromPromiseCreateFuncWithStartValues=t.createProcessingFromPromiseCreateFunc=void 0;var i=n(5256),a=n(7257),c=n(1902);t.createProcessingFromPromiseCreateFunc=function(e){return t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(void 0,o([],r(t),!1));return(0,c.isPromiseCancelable)(i)?i:(0,c.createCancelablePromise)(i)},new a.Processing((0,a.createStartFuncFromAsyncFunc)((function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e.promise(t.apply(void 0,o([],r(n),!1)))})));var t},t.createProcessingFromPromiseCreateFuncWithStartValues=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new a.Processing((0,a.createStartFuncFromAsyncFunc)((function(n){return n.promise(e.apply(void 0,o([],r(t),!1)))})))}((function(){var n=e.apply(void 0,o([],r(t),!1));return(0,c.isPromiseCancelable)(n)?n:(0,c.createCancelablePromise)(n)}))},t.cancelFuncToCancelablePromise=function(e){var t,n=new Promise((function(n,r){t=function(){e(),r()}}));return(0,c.setPromiseCancel)(n,t),n},t.asyncFuncToCancelablePromise=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=new i.CancelsManager,s=e.apply(void 0,o([a],r(t),!1)).finally((function(){return a.destroy()}));return(0,c.setPromiseCancel)(s,a.cancel.bind(a)),s},t.createProcessingFromAsyncFunc=function(e){return new a.Processing((0,a.createStartFuncFromAsyncFunc)(e))},t.createProcessingFromAsyncFuncWithStartValues=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new a.Processing((0,a.createStartFuncFromAsyncFunc)((function(n){return e.apply(void 0,o([n],r(t),!1))})))}},4680:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1902),t),o(n(1742),t),o(n(7257),t),o(n(5256),t),o(n(4161),t)},1902:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getEventFromPromise=t.getPromiseFromEvent=t.createCancelablePromise=t.pairToPromise=t.cancelPromise=t.isPromiseCancelable=t.getPromiseCancel=t.setPromiseCancel=void 0;var o=n(9675),i=n(9125);function a(e,t){(0,o.getExtProp)(e,"_promise_cancel")&&console.warn("setPromiseCancel warn: promise has cancelFunc!"),(0,o.setExtProp)(e,"_promise_cancel",t)}function c(e){return(0,o.getExtProp)(e,"_promise_cancel")}t.setPromiseCancel=a,t.getPromiseCancel=c,t.isPromiseCancelable=function(e){return!!c(e)},t.cancelPromise=function(e,t){var n=c(e);return!!n&&(n(t),!0)},t.pairToPromise=function(e){var t=r(e,2),n=t[0],o=t[1];return a(o,n),o},t.createCancelablePromise=function(e){var t,n=new Promise((function(n,r){t=r,e.then(n).catch(r)}));return a(n,t),n},t.getPromiseFromEvent=function(e){var t,n,r=new Promise((function(r,o){n=e.disposableOn((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n&&n(),r(e)})),t=function(e){n&&n(),o(e)}}));return[t,r]},t.getEventFromPromise=function(e){var t=new i.Event,n=new i.Event;return e.then((function(e){t.isDestroyed()||t.emit(e)})).catch((function(e){n.isDestroyed()||n.emit(e)})),[t,n]}},4161:function(e,t){var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=void 0,t.CancelError=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Error.call.apply(Error,r([this],n(e),!1))}return Object.setPrototypeOf(e.prototype,Error.prototype),e}()},1286:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RefsManager=void 0;var i=n(9675),a=function(e){function t(t){var n=e.call(this)||this;n._sceneObjRefs=new Map,n._refs={},n._refsChagned=n.disposeVar(new i.Event);var r=function(e,t,r){if(r){var o=n.getLastSceneObject(r);if(c=n._sceneObjRefs.get(r)){var i=c.indexOf(e);-1===i?console.warn("this._sceneObjRefs中不存在当前对象(id: ".concat(e.id," type: ").concat(e.typeName,")！可能系统存在逻辑问题")):(c.splice(i,1),0===c.length&&n._sceneObjRefs.delete(r))}else console.warn("this._sceneObjRefs中不存在ref(".concat(r,"), 可能系统存在逻辑问题"));var a=n.getLastSceneObject(r);n._refs[r]=a,n._refsChagned.emit(a,o)}var c;t&&(o=n.getLastSceneObject(t),(c=n._sceneObjRefs.get(t))?(c.push(e),c.length>0&&console.warn("同时存在多个ref".concat(t,"相同的场景对象！\n").concat(c.map((function(e){return"".concat(e.id," ").concat(e.typeName,"\n")})).join(" ")))):n._sceneObjRefs.set(t,[e]),a=n.getLastSceneObject(t),n._refs[t]=a,n._refsChagned.emit(a,o))};return n.dispose(t.sceneObjCreatedEvent.disposableOn((function(e){var t=function(t,n){return r(e,t,n)};e.ref&&t(e.ref,void 0),e.refChanged.disposableOn(t)}))),n.dispose(t.sceneObjToDestroyEvent.disposableOn((function(e){e.ref&&r(e,void 0,e.ref)}))),n}return o(t,e),Object.defineProperty(t.prototype,"sceneObjRefs",{get:function(){return this._sceneObjRefs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refs",{get:function(){return this._refs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refsChanged",{get:function(){return this._refsChagned},enumerable:!1,configurable:!0}),t.prototype.getLastSceneObject=function(e){var t=this.getSceneObjects(e);if(t)return t[t.length-1]},t.prototype.getSceneObjects=function(e){var t=this._sceneObjRefs.get(e);if(t&&0!==t.length)return t},t}(i.Destroyable);t.RefsManager=a},61:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneObjectWithId=t.SceneObjectIdWatching=t.getSceneObjectReactFromId=t.SceneObjectFromId=void 0;var a=n(9675),c=n(7191),s=n(9125),u=n(9372),l=function(e){function t(t){var n=e.call(this)||this;n._id=t,n._sceneObject=n.disposeVar((0,s.react)(void 0)),n.dispose((function(){n._sceneObject.value=void 0}));var r=c.SceneObject.getSceneObjById(n._id);return r&&(n._sceneObject.value=r),n.dispose(c.SceneObject.context.sceneObjCreatedEvent.disposableOn((function(e){e.id===n._id&&(n._sceneObject.value=e)}))),n.dispose(c.SceneObject.context.sceneObjToDestroyEvent.disposableOn((function(e){e.id===n._id&&(n._sceneObject.value=void 0)}))),n}return o(t,e),Object.defineProperty(t.prototype,"sceneObject",{get:function(){return this._sceneObject.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjectChanged",{get:function(){return this._sceneObject.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t}(s.Destroyable);function f(e){var t=i((0,a.getReactFuncs)(e),3),n=t[0],r=(t[1],t[2]),o=(0,s.react)(void 0);return o.disposeVar(new u.ObjResettingWithEvent(r,(function(){var e=n();if(e){var t=new l(e),r=function(){o.value=t.sceneObject};return r(),t.dispose(t.sceneObjectChanged.disposableOn(r)),t}o.value=void 0}))),o}t.SceneObjectFromId=l,t.getSceneObjectReactFromId=f;var p=function(e){function t(t,n){var r=e.call(this)||this,o=r.disposeVar(f(t));return r.disposeVar(new u.ObjResettingWithEvent(o.changed,(function(){var e=o.value;if(e)return n(e)}))),r}return o(t,e),t}(s.Destroyable);t.SceneObjectIdWatching=p;var d=function(e){function t(t,n){var r=e.call(this)||this;r._id=t,r._sofi=r.disposeVar(new l(r._id));var o=function(){n.sceneObject=r._sofi.sceneObject};return o(),r.dispose(r._sofi.sceneObjectChanged.disposableOn(o)),r}return o(t,e),t}(s.Destroyable),h=function(e){function t(){var t=e.call(this)||this;return t._id=t.disposeVar((0,s.react)(void 0)),t._sceneObject=t.disposeVar((0,s.react)(void 0)),t._resetting=t.disposeVar(new u.ObjResettingWithEvent(t.idChanged,(function(){var e=t.id;if(void 0!==e&&""!==e)return new d(e,t);t.sceneObject=void 0}))),t}return o(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id.value},set:function(e){this._id.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idChanged",{get:function(){return this._id.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObject",{get:function(){return this._sceneObject.value},set:function(e){this._sceneObject.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjectChanged",{get:function(){return this._sceneObject.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetting",{get:function(){return this._resetting},enumerable:!1,configurable:!0}),t}(s.Destroyable);t.SceneObjectWithId=h},2040:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneObjectsContext=void 0;var c=n(9675),s=n(7104),u=n(585),l=n(1286),f=function(e){function t(){var t=e.call(this)||this;return t._sceneObjConstructorsMap=new Map,t._sceneObjs=new Map,t._sceneObjCreatedEvent=new c.Event,t._sceneObjToDestroyEvent=new c.Event,t._refsManager=t.disposeVar(new l.RefsManager(t)),t._environmentVariables={"xr-static":"xr-static"},t._environmentVariablesChanged=t.disposeVar(new c.Event),t}return o(t,e),Object.defineProperty(t.prototype,"typeNames",{get:function(){return this._sceneObjConstructorsMap.keys()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjs",{get:function(){return this._sceneObjs.values()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjCreatedEvent",{get:function(){return this._sceneObjCreatedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneObjToDestroyEvent",{get:function(){return this._sceneObjToDestroyEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refsManager",{get:function(){return this._refsManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$refs",{get:function(){return this._refsManager.refs},enumerable:!1,configurable:!0}),t.prototype.register=function(e,t,n){return this._sceneObjConstructorsMap.has(e)&&(console.warn("register warn: ".concat(e," has registered, object is: ")),console.warn(this._sceneObjConstructorsMap.get(e))),this._sceneObjConstructorsMap.set(e,t),n&&this.setProps(e,n),e},t.prototype._getSceneObjConstructor=function(e){return this._sceneObjConstructorsMap.get(e)||void 0},t.prototype.getProps=function(e){var t=this._getSceneObjConstructor(e);if(t)return(0,c.getExtProp)(t,"__sceneObjExtraInfo");console.warn("cannot get constructor from type: ".concat(e))},t.prototype.setProps=function(e,t){var n=this._getSceneObjConstructor(e);if(n){var r=(0,c.getExtProp)(n,"__sceneObjExtraInfo");r||(r={},(0,c.setExtProp)(n,"__sceneObjExtraInfo",r)),Object.assign(r,t)}else console.warn("cannot get constructor from type: ".concat(e))},t.prototype.getProp=function(e,t){var n=this.getProps(e);return n&&n[t]},t.prototype.setProp=function(e,t,n){var r;this.setProps(e,((r={})[t]=n,r))},t.prototype._addSceneObject=function(e){var t=this;this._sceneObjs.set(e.id,e),this._sceneObjCreatedEvent.emit(e),e.dispose((function(){return t._deleteSceneObject(e)}))},t.prototype._deleteSceneObject=function(e){this._sceneObjToDestroyEvent.emit(e),this._sceneObjs.delete(e.id)},t.prototype.createSceneObjectFromClass=function(e,t){if(!t||this._sceneObjs.has(t)){var n=(0,c.createGuid)();t&&console.warn("已存在相同id的对象！id自动变更！".concat(t," -> ").concat(n," 请注意：id变更可能导致引用失效！")),t=n}if(!t)throw new Error("id不能为空！");var r=new e(t);return r.id!==t&&(console.warn("sceneObj.id(".concat(r.id,") !== id(").concat(t,") sceneObjectType: ").concat(r.typeName)),console.warn("出现这种问题有可能是自定义的场景对象，没有在构造函数中传递id参数！示例如下："),console.warn("class MySceneObj extends ESSceneObject { constructor(id) { super(id); } }")),this._addSceneObject(r),r},t.prototype.createSceneObject=function(e,t){if("string"==typeof e){var n=this._getSceneObjConstructor(e);return n?this.createSceneObjectFromClass(n,t):void console.warn("Cannot find SceneObjectType: ".concat(e))}return this.createSceneObjectFromClass(e,t)},t.prototype.createSceneObjectFromJson=function(e){var t=this.createSceneObject(e.type,e.id);return t&&(t.json=e),t},t.prototype.getSceneObjectById=function(e){return this._sceneObjs.get(e)},t.prototype.getSceneObjectsByDevTags=function(e){var t,n,r=[],o=function(t){e.some((function(e){return t.devTags&&t.devTags.includes(e)}))&&r.push(t)};try{for(var a=i(this.sceneObjs),c=a.next();!c.done;c=a.next())o(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},Object.defineProperty(t.prototype,"environmentVariables",{get:function(){return this._environmentVariables},set:function(e){var t,n;try{for(var r=i(Object.entries(e)),o=r.next();!o.done;o=r.next()){var c=a(o.value,2),s=c[0],u=c[1];this.setEnv(s,u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"environmentVariablesChanged",{get:function(){return this._environmentVariablesChanged},enumerable:!1,configurable:!0}),t.prototype.setEnv=function(e,t){if(this._environmentVariables[e]!==t){var n=this._environmentVariables[e];this._environmentVariables[e]=t,this._environmentVariablesChanged.emit(e,t,n)}},t.prototype.getEnv=function(e){return this._environmentVariables[e]},t.prototype.getStrFromEnv=function(e){return(0,u.replaceStrWithEnv)(e)},t.prototype.createEnvStrReact=function(e,t){return(0,s.createEnvEvalStrReact)(e,t)},t.prototype.createEvnStrReact=function(e,t){return(0,s.createEnvEvalStrReact)(e,t)},t}(c.Destroyable);t.SceneObjectsContext=f},7104:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.createEnvEvalStrReact=void 0;var o=n(9372),i=n(9675),a=n(7191);t.createEnvEvalStrReact=function(e,t){var n=r((0,o.getReactFuncs)(e),3),c=n[0],s=(n[1],n[2]),u=(0,i.react)(void 0),l=function(){var e,n=null!==(e=c())&&void 0!==e?e:t;u.value=n&&a.SceneObject.context.getStrFromEnv(n)};return l(),s&&u.dispose(s.disposableOn(l)),u.dispose(a.SceneObject.context.environmentVariablesChanged.disposableOn(l)),u}},585:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceStrWithEnv=void 0;var r=n(7191);t.replaceStrWithEnv=function(e){for(;;){var t=e.replace(/\${(.*?)\}/,(function(e,t){var n=r.SceneObject.context.getEnv(t);return void 0===n?(console.warn("环境变量(".concat(t,")不存在，无法进行转换")),"{env-error}"):n}));if(t===e)break;e=t}return e}},7191:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneObject=void 0;var l=n(9675),f=n(9372),p=n(2040),d=function(e){function t(t){var n=e.call(this)||this;return n._components=n.disposeVar(new f.ObservableSet),void 0!==t&&("string"!=typeof t?console.warn("场景对象创建时的ID必须是字符串类型，而这里是id的类型是".concat(typeof t,"，值为").concat(t)):""===t.trim()?console.warn("场景对象创建时的ID不能是空字符串！"):t.trim()!==t&&console.warn("id前后有空字符串！id: ".concat(t))),n._id=null!=t?t:(0,l.createGuid)(),n._setDefaultName(),n}return o(t,e),Object.defineProperty(t,"sceneObjs",{get:function(){return t.context.sceneObjs},enumerable:!1,configurable:!0}),t.getSceneObjById=function(e){return t.context.getSceneObjectById(e)},t.getSceneObjsByDevTags=function(e){return t.context.getSceneObjectsByDevTags(e)},Object.defineProperty(t,"$refs",{get:function(){return t.context.refsManager.refs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultProps",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){console.error("当前正在试图修改场景对象(".concat(this.name,"/").concat(this.typeName,")的ID，只有在创建时才可以设置ID！后期修改无效！！！"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"components",{get:function(){return this._components},enumerable:!1,configurable:!0}),t.prototype._setDefaultName=function(){this.name="".concat(this.typeName,"_").concat((""+this.id).slice(-4))},t.prototype._innerGetJson=function(e){var t,n;void 0===e&&(e=!0);var r={id:this.id,type:this.typeName};try{for(var o=c(Object.keys(this.defaultProps)),i=o.next();!i.done;i=o.next()){var a=i.value;if(e){var s=this.defaultProps[a];(s instanceof l.ReactiveVariable?s.equals(this[a]):s===this[a])||(r[a]=this[a])}else r[a]=this[a]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},t.prototype._innerSetJson=function(e,t,n){var r,o;if(e instanceof Object&&(!e.type||e.type===this.typeName)){e.id&&e.id!==this.id&&console.warn("value.id === undefined || value.id".concat(e.id," !== this.id(").concat(this.id,")"));var i=t||[];i.push("id","type");var a=Object.keys(this.defaultProps).filter((function(e){return!i.includes(e)}));try{for(var s=c(a),u=s.next();!u.done;u=s.next()){var f=u.value;if(f in e)this[f]=null===e[f]?void 0:e[f];else if(null==n||!n){var p=this.defaultProps[f];p instanceof l.ReactiveVariable&&(p=p.value),this[f]=p}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}}else console.error("value.type && value.type".concat(e.type," !== this.typeName").concat(this.typeName))},t.prototype.setJsonWithoutDefaults=function(e){this._innerSetJson(e,void 0,!0)},t.prototype.setJsonWithDefaults=function(e){this._innerSetJson(e,void 0,!1)},t.prototype.getJsonWithDefaults=function(){return this._innerGetJson(!1)},t.prototype.getJsonWithoutDefaults=function(){return this._innerGetJson(!0)},Object.defineProperty(t.prototype,"jsonStr",{get:function(){return JSON.stringify(this.json,void 0,"    ")},set:function(e){try{this.json=e&&JSON.parse(e)||{}}catch(e){console.error("SceneObject解析json数据时发生错误！error: ".concat(e))}},enumerable:!1,configurable:!0}),t.prototype.addDevTag=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.devTags){var r=t.filter((function(t){return!e.devTags.includes(t)}));r.length>0&&(this.devTags=u(u([],s(this.devTags),!1),s(r),!1))}else this.devTags=t},t.prototype.deleteDevTag=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.devTags){var n=this.devTags.filter((function(t){return!e.includes(t)}));this.devTags=n}},Object.defineProperty(t.prototype,"selfCreatedEvent",{get:function(){var e=this;return this._selfCreatedEvent||(this._selfCreatedEvent=this.disposeVar(new l.Event),this.dispose(t.context.sceneObjCreatedEvent.disposableOn((function(t){if(!e._selfCreatedEvent)throw new Error("!this._createdEvent");t===e&&e._selfCreatedEvent.emit()})))),this._selfCreatedEvent},enumerable:!1,configurable:!0}),t.context=new p.SceneObjectsContext,t.register=t.context.register.bind(t.context),t.create=t.context.createSceneObject.bind(t.context),t.createFromClass=t.context.createSceneObjectFromClass.bind(t.context),t.createFromJson=t.context.createSceneObjectFromJson.bind(t.context),t}(l.Destroyable);t.SceneObject=d,function(e){e.createDefaultProps=function(){return{name:"未命名场景对象",ref:void 0,devTags:(0,l.reactArrayWithUndefined)(void 0),extras:(0,l.reactJson)(void 0)}}}(d=t.SceneObject||(t.SceneObject={})),t.SceneObject=d,(0,l.extendClassProps)(d.prototype,d.createDefaultProps),a(n(61),t)},6274:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.unLoading=t.UnLoading=void 0;var i=n(9675),a=function(e){function t(){var t=e.call(this)||this;return t._unloadEvent=t.disposeVar(new i.Event),window.addEventListener("beforeunload",(function(){t._unloadEvent.emit(),t.destroy()})),t}return o(t,e),t.prototype.unload=function(e){this.dispose(this._unloadEvent.disposableOn(e,unescape,!0))},t}(i.Destroyable);t.UnLoading=a,t.unLoading=new a},1528:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjResetting=t.ObjResettingWithEvent=void 0;var c=n(9675),s=function(e){function t(t,n,r,o){void 0===r&&(r=!0);var s=e.call(this)||this;s._resetEvent=t,s._createFunc=n,s._obj=s.disposeVar((0,c.react)(void 0));var u=s._resetEvent,l=s._createFunc,f=function(){s._obj.value&&(s._obj.value.destroy(),s._obj.value=void 0)};return s.dispose(f),r&&(s._obj.value=o?l.apply(void 0,a([],i(o),!1)):l()),s.dispose(u.disposableOn((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f(),s._obj.value=l.apply(void 0,a([],i(e),!1))}))),s}return o(t,e),Object.defineProperty(t.prototype,"obj",{get:function(){return this._obj.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"objChanged",{get:function(){return this._obj.changed},enumerable:!1,configurable:!0}),t}(c.Destroyable);t.ObjResettingWithEvent=s;var u=function(e){function t(t,n,r){void 0===n&&(n=!0);var o=e.call(this)||this;return o._createFunc=t,o._execOnInit=n,o._initParams=r,o._event=o.disposeVar(new c.Event),o._objResettingWithEvent=o.disposeVar(new s(o._event,o._createFunc,o._execOnInit,o._initParams)),o}return o(t,e),Object.defineProperty(t.prototype,"obj",{get:function(){return this._objResettingWithEvent.obj},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"objChanged",{get:function(){return this._objResettingWithEvent.objChanged},enumerable:!1,configurable:!0}),t.prototype.reset=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._event).emit.apply(e,a([],i(t),!1))},t}(c.Destroyable);t.ObjResetting=u},5459:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSet=void 0;var s=n(9675),u=function(e){function t(){var n=e.call(this)||this;return n._set=new Set,n._toChangeEvent=n.disposeVar(new s.Event),n._changedEvent=n.disposeVar(new s.Event),n.dispose((function(){0!==n._set.size&&(t.warnOnDestroying&&console.warn("this._set.size > 0"),n.clear())})),n}return o(t,e),Object.defineProperty(t.prototype,"toChange",{get:function(){return this._toChangeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changed",{get:function(){return this._changedEvent},enumerable:!1,configurable:!0}),t.prototype.add=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var o=i(n),a=o.next();!a.done;a=o.next()){var c=a.value;this._toChangeEvent.emit([],[c]),this._set.add(c),this._changedEvent.emit([],[c])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.delete=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{for(var o=i(n),a=o.next();!a.done;a=o.next()){var c=a.value;this._toChangeEvent.emit([c],[]),this._set.delete(c),this._changedEvent.emit([c],[])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.disposableAdd=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.add.apply(this,c([],a(t),!1)),function(){return e.delete.apply(e,c([],a(t),!1))}},Object.defineProperty(t.prototype,"size",{get:function(){return this._set.size},enumerable:!1,configurable:!0}),t.prototype.clear=function(){var e=c([],a(this._set),!1);this._toChangeEvent.emit([],e),this._set.clear(),this._changedEvent.emit([],e)},t.prototype.values=function(){return this._set.values()},t.warnOnDestroying=!0,t}(s.Destroyable);t.ObservableSet=u},1758:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReactFuncs=void 0;var r=n(9675);Object.defineProperty(t,"getReactFuncs",{enumerable:!0,get:function(){return r.getReactFuncs}})},9372:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1528),t),o(n(5459),t),o(n(1758),t)},9125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SmartListenerPipe=t.SmartListenerHandler=t.ListenerPipe=t.Event=t.EventListenerHandler=t.DoublyLinkedList=t.react=t.ReactiveVariable=t.ObjPool=t.Destroyable=void 0;var r=n(9675);Object.defineProperty(t,"Destroyable",{enumerable:!0,get:function(){return r.Destroyable}});var o=n(9675);Object.defineProperty(t,"ObjPool",{enumerable:!0,get:function(){return o.ObjPool}});var i=n(9675);Object.defineProperty(t,"ReactiveVariable",{enumerable:!0,get:function(){return i.ReactiveVariable}}),Object.defineProperty(t,"react",{enumerable:!0,get:function(){return i.react}});var a=n(9675);Object.defineProperty(t,"DoublyLinkedList",{enumerable:!0,get:function(){return a.DoublyLinkedList}}),Object.defineProperty(t,"EventListenerHandler",{enumerable:!0,get:function(){return a.EventListenerHandler}}),Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return a.Event}}),Object.defineProperty(t,"ListenerPipe",{enumerable:!0,get:function(){return a.ListenerPipe}}),Object.defineProperty(t,"SmartListenerHandler",{enumerable:!0,get:function(){return a.SmartListenerHandler}}),Object.defineProperty(t,"SmartListenerPipe",{enumerable:!0,get:function(){return a.SmartListenerPipe}})},4169:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defined=void 0,t.defined=function(e){return null!=e}},1100:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4169),t),o(n(8778),t)},8778:(e,t)=>{function n(e,t){return e instanceof Promise?e.then(t):Promise.resolve(e).then(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.when=void 0,t.when=n,n.defer=function(){var e={},t=new Promise((function(t,n){e.resolve=t,e.reject=n}));return e.promise=t,e},n.resolve=function(e){return Promise.resolve(e)}},1824:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defineReactiveProp=void 0;var r=n(9125);t.defineReactiveProp=function(e,t,n,o){var i,a="_"+t,c="_"+t+"Changed",s=t+"Changed";Object.defineProperties(e.prototype,((i={})[t]={get:function(){return void 0===this[a]&&void 0!==n&&(this[a]=n),this[a]},set:function(e){if(void 0===this[a]&&void 0!==n&&(this[a]=n),o?!o(this[a],e):this[a]!==e){var t=this[a];this[a]=e,this[c]&&this[c].emit(e,t)}}},i[s]={get:function(){var e=this;return void 0===this[c]&&(this[c]=new r.Event,void 0!==this.dispose&&this.dispose((function(){return e[c].destroy()}))),this[c]}},i))}},4849:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1824),t)},9741:(e,t)=>{function n(e,t){return void 0===t&&(t=[0,0]),t[0]=-e[1],t[1]=e[0],t}function r(e,t,n){return void 0===n&&(n=[0,0]),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function o(e,t){void 0===t&&(t=[0,0]);var n=function(e){return Math.sqrt(function(e){return e[0]*e[0]+e[1]*e[1]}(e))}(e);return t[0]=e[0]/n,t[1]=e[1]/n,t}function i(e,t){return void 0===t&&(t=[0,0]),t[0]=-e[0],t[1]=-e[1],t}function a(e,t,n){return void 0===n&&(n=[0,0]),n[0]=e[0]*t,n[1]=e[1]*t,n}function c(e,t,n){return void 0===n&&(n=[0,0]),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function s(e,t){var n,r,o=(r=t,(n=e)[0]*r[0]+n[1]*r[1]),i=Math.acos(o);return 1/Math.cos(i/2)}function u(e,t,n){return void 0===n&&(n=[0,0]),n[0]=e,n[1]=t,n}Object.defineProperty(t,"__esModule",{value:!0}),t.extrudePolyline=void 0;var l=[0,0],f=[0,0],p=[0,0],d=[0,0],h=[0,0],v=[0,0],y=[0,0],_=[0,0];function g(e,t,u,l,f,p){var g=r(e,t,_),b=n(o(g,g),d),m=r(u,e,_),w=n(o(m,m),v),O=i(b,h),P=i(w,y),j=c(b,w);o(j,j);var E,x,C=(x=w,(E=b)[0]*x[1]-E[1]*x[0]);if(Math.abs(C)<.1)c(F=a(j,l,_),e,F),p.push(F[0],F[1]),f.push(p.length/2),p.push(e[0],e[1]),f.push(p.length/2),a(D=i(j,_),l,D),c(D,e,D),p.push(D[0],D[1]),f.push(p.length/2);else if(C<0){c(F=a(b,l,_),e,F),p.push(F[0],F[1]);var S=a(j,l,_);c(S,e,S),p.push(S[0],S[1]),c(D=a(w,l,_),e,D),p.push(D[0],D[1]),f.push(p.length/2),p.push(e[0],e[1]),f.push(p.length/2),T=(T=s(P,O))>3?3:T,a(A=i(j,_),T*l,A),c(A,e,A),p.push(A[0],A[1]),f.push(p.length/2)}else{var T,F,D;c(F=a(j,(T=(T=s(b,w))>3?3:T)*l,_),e,F),p.push(F[0],F[1]),f.push(p.length/2),p.push(e[0],e[1]),f.push(p.length/2),c(D=a(O,l,_),e,D),p.push(D[0],D[1]);var A,k=i(j,_);a(k,l,k),c(k,e,k),p.push(k[0],k[1]),c(A=a(P,l,_),e,A),p.push(A[0],A[1]),f.push(p.length/2)}}var b=[];t.extrudePolyline=function(e,t,s,h,y,m){void 0===s&&(s=!1),h=null!=h?h:[],y=null!=y?y:[],m=null!=m?m:[];var w=b;w.length=0,function(e,t,s,h,y){if(void 0===s&&(s=!1),e.length%2!=0)throw new Error("positions.length % 2 !== 0");h=null!=h?h:[],y=null!=y?y:[];var b=e,m=b.length/2;if(!(m<2)){if(s){if(!(m>=3))throw new Error("loop should have >= 3 vertex!");var w=u(b[0],b[1],l),O=u(b[2],b[3],p);g(w,u(b[2*(m-1)+0],b[2*(m-1)+1],f),O,t,y,h)}else{w=u(b[0],b[1],l);var P=r(O=u(b[2],b[3],p),w,_),j=n(o(P,P),v);c(x=a(j,t,_),w,x),h.push(x[0],x[1]),y.push(h.length/2),h.push(w[0],w[1]),y.push(h.length/2),a(C=i(j,_),t,C),c(C,w,C),h.push(C[0],C[1]),y.push(h.length/2)}if(m>=3)for(var E=1;E<m-1;++E)w=u(b[2*E+0],b[2*E+1],l),O=u(b[2*(E+1)+0],b[2*(E+1)+1],p),g(w,u(b[2*(E-1)+0],b[2*(E-1)+1],f),O,t,y,h);if(s){if(!(m>=3))throw new Error("loop should have >= 3 vertex!");w=u(b[2*(m-1)+0],b[2*(m-1)+1],l),O=u(b[0],b[1],p),g(w,u(b[2*(m-2)+0],b[2*(m-2)*1],f),O,t,y,h)}else{var x,C,S=r(w=u(b[2*(m-1)+0],b[2*(m-1)+1],l),u(b[2*(m-2)+0],b[2*(m-2)+1],f),_),T=n(o(S,S),d);c(x=a(T,t,_),w,x),h.push(x[0],x[1]),y.push(h.length/2),h.push(w[0],w[1]),y.push(h.length/2),a(C=i(T,_),t,C),c(C,w,C),h.push(C[0],C[1]),y.push(h.length/2)}}}(e,.5*t,s,h,w),function(e,t,n,r,o){if(r=r||[],o=o||[],e.length%2!=0)throw new Error("extrudedPositions.length % 2 !== 0");if(n.length%3!=0)throw new Error("extrudesSegments.length % 3 !== 0");for(var i=n.length/3,a=0,c=0;c<i;++c){for(var s=n[3*c+0],u=n[3*c+1],l=n[3*c+2],f=a;f<s;++f)r.push(0,0);if(s-a>=2)for(var p=a+1;p<s;++p)o.push(s,p,p-1);r.push(0,.5);for(var d=u;d<l;++d)r.push(0,1);if(l-u>=2)for(var h=u+1;h<l;++h)o.push(s,h-1,h);a=l}for(a=0,c=0;c<i-1;++c){var v=n[3*c+0]-1,y=n[3*c+1]-1,_=n[3*c+2]-1,g=n[3*c+2],b=n[3*(c+1)+0],m=n[3*(c+1)+1];o.push(v,y,b),o.push(v,b,g),o.push(y,_,m),o.push(y,m,b)}t&&(v=n[3*(i-1)+0]-1,y=n[3*(i-1)+1]-1,_=n[3*(i-1)+2]-1,g=0,b=n[0],m=n[1],o.push(v,y,b),o.push(v,b,g),o.push(y,_,m),o.push(y,m,b))}(h,s,w,y,m)}},3656:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(9741),t)},7308:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Gif=void 0;var i=n(9675),a=n(4680),c=n(4680),s=n(2001),u=n(9778),l=function(e){function t(t){var n=e.call(this)||this;return n._url=n.disposeVar((0,i.react)("")),n._loadGifFramesProcessing=n.disposeVar((0,c.createProcessingFromPromiseCreateFunc)((function(e){return(0,a.createCancelablePromise)((0,u.loadGifFrames)(e))}))),n._player=n.disposeVar(new s.GifPlayer(t)),n._player.autoPlayOnLoad=!0,n._loadGifFramesProcessing.completeFunc=function(e){var t=e.gifFrames;return n._player.gifFrames=t},n.dispose(n._url.changed.disposableOn((function(e){n._player.gifFrames=void 0,n._loadGifFramesProcessing.restart(new a.CancelError("reload gif(".concat(e,")")),e)}))),n}return o(t,e),Object.defineProperty(t.prototype,"player",{get:function(){return this._player},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url.value},set:function(e){this._url.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedEvent",{get:function(){return this._loadGifFramesProcessing.completeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._player.gifSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeChanged",{get:function(){return this._player.gifSizeChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._player.gifDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"durationChanged",{get:function(){return this._player.gifDurationChanged},enumerable:!1,configurable:!0}),t}(i.Destroyable);t.Gif=l},2001:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.GifPlayer=void 0;var c=n(9675);function s(e,t,n){return e<t?t:e>n?n:e}var u=function(e){function t(t,n,r){void 0===n&&(n=!0);var o=e.call(this)||this;o._container=t,o._gifFrames=o.disposeVar((0,c.react)(void 0)),o._gifDurations=[],o._gifDuration=o.disposeVar((0,c.react)(0)),o._gifSize=o.disposeVar((0,c.react)([0,0],(function(e,t){return e.every((function(e,n){return e===t[n]}))}),(function(e){return a([],i(e),!1)}))),o._autoPlayOnLoad=o.disposeVar((0,c.react)(!0)),o.loop=!0;var u=document.createElement("canvas");o._gifCanvas=u,u.style.width="100%",u.style.height="100%";var l,f=u.getContext("2d");o._container&&o._container.appendChild(u),o.dispose((function(){return o._container&&o._container.removeChild(u)})),o.dispose(o._gifFrames.changed.disposableOn((function(e){if(!e||0===e.length)return u.width=0,void(u.height=0);var t=e[0].dims,n=t.width,r=t.height;o._gifSize.value=[n,r];var i=e.length,a=0;o._gifDurations.length=0;for(var c=0;c<i;++c)a+=e[c].delay,o._gifDurations.push(a);o._gifDuration.value=o._gifDurations[o._gifDurations.length-1],u.width=n,u.height=r,l=f.createImageData(n,r),o.currentTimeChangedEvent.emit(o.currentTime,o.currentTime),o._autoPlayOnLoad.value&&(o.currentTime=0,o.playing=!0)})));var p=-1;return o.dispose(o.currentTimeChangedEvent.disposableOn((function(e){var t=s(e/o.duration,0,1),n=o.gifDuration*t,r=o._gifFrames.value;if(r&&r.length>0){var a=o._getFrame(n);if(a===p)return;p=a;var u=r[a];if(0!==u.disposalType&&1!==u.disposalType&&2!==u.disposalType&&(0,c.oneTimeWarning)("gif parsed get disposalType ".concat(u.disposalType,"... frame: ").concat(a," size: ").concat(JSON.stringify(u.dims)),"gif parsed get disposalType ".concat(u.disposalType,"...")),!l||0!==a&&2!==u.disposalType||l.data.fill(0),l){var d=i(o._gifSize.value,2),h=d[0],v=d[1],y=u.dims,_=y.width,g=y.height,b=y.left,m=y.top;if(g>v)throw new Error("height > canvasHeight");for(var w=0;w<g;++w)for(var O=0;O<_;++O){var P=w*_+O,j=(m+w)*h+(b+O),E=l.data,x=u.patch,C=x[4*P+3]/255;E[4*j+0]=E[4*j+0]*(1-C)+x[4*P+0]*C|0,E[4*j+1]=E[4*j+1]*(1-C)+x[4*P+1]*C|0,E[4*j+2]=E[4*j+2]*(1-C)+x[4*P+2]*C|0,E[4*j+3]=0|s(E[4*j+3]+x[4*P+3],0,255)}f.putImageData(l,0,0)}}else(0,c.oneTimeWarning)("gif资源未加载！无法播放！")}))),o.dispose(o._gifDuration.changed.disposableOn((function(){o.duration=o.gifDuration}))),o._autoPlayOnLoad.value=n,o._gifFrames.value=r,o}return o(t,e),Object.defineProperty(t.prototype,"gifCanvas",{get:function(){return this._gifCanvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gifFrames",{get:function(){return this._gifFrames.value},set:function(e){this._gifFrames.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gifFramesChanged",{get:function(){return this._gifFrames.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gifSize",{get:function(){return this._gifSize.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gifSizeChanged",{get:function(){return this._gifSize.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gifDuration",{get:function(){return this._gifDuration.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gifDurationChanged",{get:function(){return this._gifDuration.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoPlayOnLoad",{get:function(){return this._autoPlayOnLoad.value},set:function(e){this._autoPlayOnLoad.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoPlayOnLoadChanged",{get:function(){return this._autoPlayOnLoad.changed},enumerable:!1,configurable:!0}),t.prototype._getFrame=function(e){for(var t=this._gifDurations.length,n=0;n<t;++n)if(e<=this._gifDurations[n])return n;throw new Error("should not be here")},t}(n(1466).Player);t.GifPlayer=u},4190:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(9778),t),o(n(2001),t),o(n(7308),t)},9778:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadGifFrames=void 0;var i=n(9704);t.loadGifFrames=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return[4,o.sent().arrayBuffer()];case 2:return t=o.sent(),n=(0,i.parseGIF)(t),r=(0,i.decompressFrames)(n,!0),[2,{gif:n,gifFrames:r,arrayBuffer:t}]}}))}))}},4855:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),(0,n(6549).registerScript)(),o(n(8753),t),o(n(6434),t),o(n(2372),t),o(n(6408),t),o(n(1571),t),o(n(1466),t),o(n(6352),t),o(n(9121),t),o(n(9800),t),o(n(4680),t),o(n(7257),t),o(n(7191),t),o(n(9372),t),o(n(1100),t),o(n(4849),t),o(n(4370),t),o(n(8309),t),o(n(1195),t),o(n(2075),t),o(n(200),t),o(n(453),t),o(n(7213),t),o(n(6274),t),o(n(3656),t),o(n(5806),t),o(n(6549),t),o(n(9979),t),o(n(4190),t)},4370:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadBASIS=t.CompressedTextureBuffer=void 0;var r=n(9928);Object.defineProperty(t,"CompressedTextureBuffer",{enumerable:!0,get:function(){return r.CompressedTextureBuffer}});var o=n(2075),i=n(8778),a=n(4169),c=n(9675),s=Error,u=new o.TaskProcessor("transcodeBASISToTexture",Number.POSITIVE_INFINITY);t.loadBASIS=function(e,t){if(!e)throw new s("resourceOrUrlOrBuffer is required.");var n;if(n=e instanceof ArrayBuffer||ArrayBuffer.isView(e)?i.when.resolve(e):(0,c.fetchArrayBuffer)(e),(0,a.defined)(n))return n.then((function(e){if((0,a.defined)(e)){var n=[];e instanceof ArrayBuffer?n.push(e):(0===e.byteOffset&&e.byteLength===e.buffer.byteLength||(e=e.slice(0,e.length)),n.push(e.buffer));var r={data:e,textureFormat:t};return u.scheduleTask(r,n)}})).then((function(e){return e||console.error("compressedTextureBuffer is undefined!"),r.CompressedTextureBuffer.clone(e)}))}},8309:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadCRN=void 0;var r=n(9928),o=n(2075),i=n(8778),a=n(4169),c=n(9675),s=Error,u=new o.TaskProcessor("transcodeCRNToDXT",Number.POSITIVE_INFINITY);t.loadCRN=function(e){if(!(0,a.defined)(e))throw new s("resourceOrUrlOrBuffer is required.");var t;if(t=e instanceof ArrayBuffer||ArrayBuffer.isView(e)?i.when.resolve(e):(0,c.fetchArrayBuffer)(e),(0,a.defined)(t))return t.then((function(e){if((0,a.defined)(e)){var t=[];return e instanceof ArrayBuffer?t.push(e):(0===e.byteOffset&&e.byteLength===e.buffer.byteLength||(e=e.slice(0,e.length)),t.push(e.buffer)),u.scheduleTask(e,t)}})).then((function(e){return e||console.error("compressedTextureBuffer is undefined!"),r.CompressedTextureBuffer.clone(e)}))}},1078:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasImagePoi=void 0;var a=n(9675),c=n(9121),s=n(9913),u=n(3814);function l(e,t){var n=i(t,3),r=n[0],o=n[1],c=n[2],s="".concat(r,"-").concat(o,"-").concat(c),l=(0,a.getExtProp)(e,s);return l||(l=(0,u.imageToCanvas)(e),(0,u.setCanvasUniformColor)(l,t),(0,a.setExtProp)(e,s,l)),l}var f=function(e){function t(t,n,r,o,i){void 0===r&&(r=[32,32]),void 0===o&&(o=[.5,1,0,0]),void 0===i&&(i="#F00F");var a=e.call(this,t)||this;a._image=n,a._size=r,a._originRatioAndOffset=o,a._defaultColorStr=i,a._tooltip="",a._title="",a.__scale=[1,1],a._tooltipAlpha=0,a._bgColor=[.3,.3,.3,.8],a._bgColorHexStr=(0,u.getColorHexStr)(a._bgColor),a._fgColor=[1,1,1,1],a._fgColorHexStr=(0,u.getColorHexStr)(a._fgColor);var s=new c.Transition(100),l=new c.Transition(100);a.dispose((function(){s.destroy(),l.destroy()}));var f=function(){if(a._clickEvent&&!a._clickEvent.empty){var e=(1+.08*l.current)*(1+.08*s.current);a._scale=[e,e],a._tooltipAlpha=s.current}};return a.dispose(a.activedChanged.disposableOn((function(e){l.target=e?1:0,a.needRedraw()}))),a.dispose(a.hoveredChanged.disposableOn((function(e){s.target=e?1:0,a.needRedraw()}))),a.dispose(a.selectedChanged.disposableOn((function(){a.needRedraw()}))),a.dispose(l.currentChanged.disposableOn(f)),a.dispose(s.currentChanged.disposableOn(f)),a}return o(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){var t=i(e,2),n=t[0],r=t[1],o=i(this._size,2),a=o[0],c=o[1];a===n&&c===r||(this._size[0]=n,this._size[1]=r,this.needRedraw(),this.needPickRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_scale",{get:function(){return this.__scale},set:function(e){var t=i(e,2),n=t[0],r=t[1],o=i(this.__scale,2),a=o[0],c=o[1];a===n&&c===r||(this.__scale[0]=n,this.__scale[1]=r,this.needRedraw(),this.needPickRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fgColor",{get:function(){return this._fgColor},set:function(e){if(!this._fgColor.every((function(t,n){return e[n]===t}))){var t=i(e,4),n=t[0],r=t[1],o=t[2],a=t[3];this._fgColor.splice(0,4,n,r,o,a),this._fgColorHexStr=(0,u.getColorHexStr)(this._fgColor),this.needRedraw()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bgColor",{get:function(){return this._bgColor},set:function(e){if(!this._bgColor.every((function(t,n){return e[n]===t}))){var t=i(e,4),n=t[0],r=t[1],o=t[2],a=t[3];this._bgColor.splice(0,4,n,r,o,a),this._bgColorHexStr=(0,u.getColorHexStr)(this._bgColor),this.needRedraw()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originRatioAndOffset",{get:function(){return this._originRatioAndOffset},set:function(e){var t=i(this._originRatioAndOffset,4),n=t[0],r=t[1],o=t[2],a=t[3],c=i(e,4),s=c[0],u=c[1],l=c[2],f=c[3];n===s&&r===u&&o===l&&a===f||(this._originRatioAndOffset.splice(0,4,s,u,l,f),this.needRedraw(),this.needPickRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},set:function(e){this._image!==e&&(this._image=e,this.needRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultColorStr",{get:function(){return this._defaultColorStr},set:function(e){this._defaultColorStr!==e&&(this._defaultColorStr=e,this.needRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},set:function(e){this._tooltip!==e&&(this._tooltip=e,this.needRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e,this.needRedraw())},enumerable:!1,configurable:!0}),t.prototype.draw=function(e){if(this._show){var t=i(this._winPos,2),n=t[0],r=t[1],o=this._size[0]*this.__scale[0],a=this._size[1]*this.__scale[1],c=(0,u.getDrawRect)([n,r],this._size,this.__scale,this._originRatioAndOffset),s=c.left,f=c.top,p=e.globalAlpha;if(e.globalAlpha=this.opacity,this._image){if(this.selected){var d=l(this._image,[1,0,0]),h=(0,u.getDrawRect)([n,r+3],[o+6,a+6],[1,1],this._originRatioAndOffset),v=h.left,y=h.top;e.drawImage(d,v,y,o+6,a+6)}if(this.actived){var _=i(this._fgColor,4),g=_[0],b=_[1],m=_[2],w=(_[3],d=l(this._image,[g,b,m]),(0,u.getDrawRect)([n,r+4],[o+8,a+8],[1,1],this._originRatioAndOffset)),O=w.left,P=w.top;e.drawImage(d,O,P,o+8,a+8)}if(this.hovered){var j=i(this._bgColor,4),E=(g=j[0],b=j[1],m=j[2],j[3],l(this._image,[g,b,m])),x=(0,u.getDrawRect)([n,r+2],[o+4,a+4],[1,1],this._originRatioAndOffset),C=x.left,S=x.top;e.drawImage(E,C,S,o+4,a+4)}e.drawImage(this._image,s,f,o,a)}else e.fillStyle=this._fgColorHexStr,e.fillRect(s,f,o,a);if(""!==this._title&&(0,u.drawTextBlock)(e,n+20,r-16,[0,.5,0,0],this._title,"14px Arial",4,this._fgColorHexStr,this._bgColorHexStr),e.globalAlpha=p,this._hovered&&""!==this._tooltip){var T=e.globalAlpha;e.globalAlpha=this._tooltipAlpha,(0,u.drawTextBlock)(e,n,r-42,[.5,1,0,0],this._tooltip,"12px Arial",4,this._fgColorHexStr,this._bgColorHexStr),e.globalAlpha=T}}},t.prototype.drawForPick=function(e,t){if(this._show){var n=i(this._winPos,2),r=n[0],o=n[1],a=t("default"),c=this._size[0]*this.__scale[0],s=this._size[1]*this.__scale[1],l=(0,u.getDrawRect)([r,o],this._size,this.__scale,this._originRatioAndOffset),f=l.left,p=l.top;e.fillStyle=a,e.fillRect(f,p,c,s)}},t}(s.CanvasPoi);t.CanvasImagePoi=f},9913:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPoi=void 0;var i=n(9125),a=function(e){function t(t,n,r){void 0===n&&(n=[0,0]),void 0===r&&(r=0);var o=e.call(this,t)||this;return o._winPos=n,o._depth=r,o.dispose(o.winPosAndDepthChanged.disposableOn((function(){o.needRedraw(),o.needPickRedraw()}))),o}return o(t,e),Object.defineProperty(t.prototype,"winPos",{get:function(){return this._winPos},set:function(e){this._winPos[0]===e[0]&&this._winPos[1]===e[1]||(this._winPos[0]=e[0],this._winPos[1]=e[1],this._winPosAndDepthChanged&&this._winPosAndDepthChanged.emit(this._winPos,this._depth))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._depth},set:function(e){this._depth!==e&&(this._depth=e,this._winPosAndDepthChanged&&this._winPosAndDepthChanged.emit(this._winPos,this._depth))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"winPosAndDepthChanged",{get:function(){return this._winPosAndDepthChanged||(this._winPosAndDepthChanged=new i.Event),this._winPosAndDepthChanged},enumerable:!1,configurable:!0}),t}(n(1644).CanvasPrimitive);t.CanvasPoi=a},8831:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPointPoi=void 0;var a=n(9121),c=n(9125),s=n(9913),u=n(3814),l=function(e){function t(t){var n=e.call(this,t)||this;n._width=16,n._text="",n._fillStyle="#0F0",n._scale=1,n.dispose(n.scaleChanged.disposableOn((function(e){n.needRedraw(),n.needPickRedraw()})));var r=n.disposeVar(new a.Transition(100)),o=n.disposeVar(new a.Transition(100)),i=function(){n._clickEvent&&!n._clickEvent.empty&&(n.scale=(1+.1*o.current)*(1+.2*r.current))};return n.dispose(o.currentChanged.disposableOn(i)),n.dispose(r.currentChanged.disposableOn(i)),n.dispose(n.activedChanged.disposableOn((function(e){o.target=e?1:0,n.needRedraw()}))),n.dispose(n.hoveredChanged.disposableOn((function(e){r.target=e?1:0,n.needRedraw()}))),n.dispose(n.selectedChanged.disposableOn((function(e){n.needRedraw()}))),n}return o(t,e),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale!==e&&(this._scale=e,this._scaleChanged&&this._scaleChanged.emit(e,this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleChanged",{get:function(){return this._scaleChanged||(this._scaleChanged=new c.Event),this._scaleChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.needRedraw(),this.needPickRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e,this.needRedraw())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillStyle",{get:function(){return this._fillStyle},set:function(e){this._fillStyle!==e&&(this._fillStyle=e,this.needRedraw())},enumerable:!1,configurable:!0}),t.prototype.draw=function(e){if(this._show){var t=i(this._winPos,2),n=t[0],r=t[1],o=e.globalAlpha;e.globalAlpha=this.opacity;var a=this._width*this._scale;this.selected&&(0,u.drawPoint)(e,n,r+3,a+3,"#F00"),this.actived&&this._clickEvent&&!this._clickEvent.empty&&(0,u.drawPoint)(e,n,r+5,a+5,"#FFF"),this.hovered?(0,u.drawPoint)(e,n,r+3,a+3,"#000A"):(0,u.drawPoint)(e,n,r+1,a+1,"#000A"),(0,u.drawPoint)(e,n,r,a,this._fillStyle);var c=this._scale>1.2?"bold 14px Arial":"bold 10px Arial";(0,u.drawText)(e,n,r-a,this._text,c,"#000"),e.globalAlpha=o}},t.prototype.drawForPick=function(e,t){if(this._show){var n=i(this._winPos,2),r=n[0],o=n[1],a=this._width*this._scale,c=t("default");(0,u.drawPoint)(e,r,o,a,c)}},t}(s.CanvasPoi);t.CanvasPointPoi=l},1644:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPrimitive=void 0;var i=n(9675),a=n(9125),c=n(9125),s=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;r._canvasPrimitivesContext=t,r._id=(0,i.createGuid)(),r._actived=!1,r._hovered=!1,r._selected=!1,r._opacity=1,r._show=!0;var o=n.needRedraw,a=void 0===o||o,s=n.needPickRedraw,u=void 0===s||s;return a&&(r._needRedrawEvent=new c.Event),u&&(r._needPickRedrawEvent=new c.Event),r._canvasPrimitivesContext.addPoi(r),r.dispose((function(){return r._canvasPrimitivesContext.removePoi(r)})),r.dispose(r.showChanged.disposableOn((function(){r.needRedraw(),r.needPickRedraw()}))),r.dispose(r.opacityChanged.disposableOn((function(){return r.needRedraw()}))),r}return o(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._canvasPrimitivesContext},enumerable:!1,configurable:!0}),t.prototype.needRedraw=function(){this._needRedrawEvent?this._needRedrawEvent.emit():console.warn("no needRedrawEvent!")},t.prototype.needPickRedraw=function(){this._needPickRedrawEvent?this._needPickRedrawEvent.emit():console.warn("no needPickRedrawEvent!")},t.prototype.hasClickEvent=function(){return!!this._clickEvent},Object.defineProperty(t.prototype,"clickEvent",{get:function(){return this._clickEvent=this._clickEvent||new c.Event,this._clickEvent},enumerable:!1,configurable:!0}),t.prototype.hasClickOutEvent=function(){return!!this._clickOutEvent},Object.defineProperty(t.prototype,"clickOutEvent",{get:function(){return this._clickOutEvent=this._clickOutEvent||new c.Event,this._clickOutEvent},enumerable:!1,configurable:!0}),t.prototype.hasDbclickEvent=function(){return!!this._dbclickEvent},Object.defineProperty(t.prototype,"dbclickEvent",{get:function(){return this._dbclickEvent=this._dbclickEvent||new c.Event,this._dbclickEvent},enumerable:!1,configurable:!0}),t.prototype.hasDbclickOutEvent=function(){return!!this._dbclickOutEvent},Object.defineProperty(t.prototype,"dbclickOutEvent",{get:function(){return this._dbclickOutEvent=this._dbclickOutEvent||new c.Event,this._dbclickOutEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actived",{get:function(){return this._actived},set:function(e){this._actived!==e&&(this._actived=e,this._activedChanged&&this._activedChanged.emit(e,this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activedChanged",{get:function(){return this._activedChanged=this._activedChanged||new c.Event,this._activedChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hovered",{get:function(){return this._hovered},set:function(e){this._hovered!==e&&(this._hovered=e,this._hoveredChanged&&this._hoveredChanged.emit(e,this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoveredChanged",{get:function(){return this._hoveredChanged=this._hoveredChanged||new c.Event,this._hoveredChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected!==e&&(this._selected=e,this._selectedChanged&&this._selectedChanged.emit(e,this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChanged",{get:function(){return this._selectedChanged=this._selectedChanged||new c.Event,this._selectedChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this._opacityChanged&&this._opacityChanged.emit(e,this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacityChanged",{get:function(){return this._opacityChanged=this._opacityChanged||new c.Event,this._opacityChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"show",{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,this._showChanged&&this._showChanged.emit(e,this))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showChanged",{get:function(){return this._showChanged=this._showChanged||new c.Event,this._showChanged},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.CanvasPrimitive=s},276:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasPrimitivesContext=void 0;var a=n(9675),c=n(9121),s=n(9125),u=n(2246),l=function(e,t){return t.depth-e.depth},f=function(e){function t(){var t=e.call(this)||this;t._pois=[],t._size=[0,0],t._needRedraw=!1,t._needPickRedraw=!1,t._pickColorManager=new u.PickColorMananger;var n=document.createElement("canvas");n.style.width="100%",n.style.height="100%",t._canvasElement=n;var r=n.getContext("2d");if(null===r)throw new Error("cannot get context 2d!");return t._ctx=r,t._offscreenCanvasElement=document.createElement("canvas"),t._offscreenCtx=t._offscreenCanvasElement.getContext("2d"),t._offscreenCtx.imageSmoothingEnabled=!1,t._offscreenCanvasElement2=document.createElement("canvas"),t._offscreenCtx2=t._offscreenCanvasElement2.getContext("2d"),t._offscreenCtx2.imageSmoothingEnabled=!1,t.disposeVar((0,c.createAnimateFrameWithStartValues)((function(){var e=i(t._size,2),n=e[0],r=e[1],o=t._canvasElement,a=o.clientWidth,c=o.clientHeight;n===a&&r===c||(t._size[0]=a,t._size[1]=c,t._canvasElement.width=a,t._canvasElement.height=c,t._offscreenCanvasElement.width=a,t._offscreenCanvasElement.height=c,t._offscreenCanvasElement2.width=a,t._offscreenCanvasElement2.height=c,t._dirty()),t._needRedraw&&(t._needRedraw=!1,t._draw())}))).start(),t}return o(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pois",{get:function(){return this._pois},enumerable:!1,configurable:!0}),t.prototype._dirty=function(){this._needRedraw=!0,this._needPickRedraw=!0},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.addPoi=function(e){var t=this;if(void 0===(0,a.getExtProp)(e,"listenHandler"))if(-1===this._pois.indexOf(e)){this._pois.push(e),this._dirty();var n=e._needRedrawEvent;if(n){var r=n.on((function(){t._needRedraw=!0}));(0,a.setExtProp)(e,"needRedrawEventHandler",r)}var o=e._needPickRedrawEvent;if(o){var i=o.on((function(){t._needPickRedraw=!0}));(0,a.setExtProp)(e,"needPickRedrawEventHandler",i)}}else console.error("同一个poi加了多次！");else console.error("可能有poi重复加载poiManager中！")},t.prototype.removePoi=function(e){var t=this._pois.indexOf(e);if(-1!==t){this._pois.splice(t,1),this._dirty();var n=e._needRedrawEvent;if(n){var r=(0,a.getExtProp)(e,"needRedrawEventHandler");r?n.off(r):console.error("poi没有listenHandler！")}var o=e._needPickRedrawEvent;if(o){var i=(0,a.getExtProp)(e,"needPickRedrawEventHandler");i?o.off(i):console.error("poi没有listenHandler！")}}else console.error("删除一个不存在的poi！")},t.prototype._draw=function(){var e=this;this._pois.sort(l);var t=i(this._size,2),n=t[0],r=t[1];this._ctx.clearRect(0,0,n,r),this._pois.forEach((function(t){return t.draw(e._ctx)}))},t.prototype.pick=function(e,t,n,r){return this._needPickRedraw&&(this._needPickRedraw=!1,this._pickDraw()),this._getPickInfo(e,t,n,r)},t.prototype._pickDraw=function(){var e=this;this._pickColorManager.reset(),this._pois.sort(l);var t=i(this._size,2),n=t[0],r=t[1];this._offscreenCtx.clearRect(0,0,n,r),this._pois.forEach((function(t){t.drawForPick(e._offscreenCtx,(function(n){var r=i(e._pickColorManager.createPickColor(t,n),3),o=r[0],a=r[1],c=r[2];return"rgb(".concat(o,", ").concat(a,", ").concat(c,")")}))}))},t.prototype._getPickInfo=function(e,t,n,r){for(var o=this._offscreenCtx.getImageData(e,t,n,r),a=[],c=o.data.length/4,s=0;s<c;++s){var u=o.data[4*s+0],l=o.data[4*s+1],f=o.data[4*s+2];if(255===o.data[4*s+3]){var p=this._pickColorManager.getPickInfoFromColor(u,l,f);if(p&&p.poi&&!a.includes(p)){var d=!0,h=i(this._size,2),v=h[0],y=h[1];this._offscreenCtx2.clearRect(0,0,v,y),p.poi.drawForPick(this._offscreenCtx2,(function(e){return"rgb(255, 255, 255)"}));var _=this._offscreenCtx2.getImageData(e,t,n,r),g=_.data[4*s+0],b=_.data[4*s+1],m=_.data[4*s+2];_.data[4*s+3],255===g&&255===b&&255===m||(d=!1),d&&a.push(p)}}}return a},t}(s.Destroyable);t.CanvasPrimitivesContext=f},2246:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.PickColorMananger=t.uint8sToUint32=t.uint32ToUint8s=void 0;var a=n(9125),c=new ArrayBuffer(4),s=new Uint32Array(c),u=new Uint8Array(c);function l(e){if(e>=16777215)throw new Error("uint32 > 0xFFFFFF");return s[0]=e,[u[0],u[1],u[2]]}function f(e,t,n){return u[0]=e,u[1]=t,u[2]=n,u[3]=0,s[0]}t.uint32ToUint8s=l,t.uint8sToUint32=f;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pickColors=new Array(16777215),t._pickColorIndex=0,t}return o(t,e),t.prototype.reset=function(){for(var e=0;e<this._pickColorIndex;++e){var t=this._pickColors[e];if(!t)throw console.error("this._pickColors[i] should not be undefined!"),new Error("this._pickColors[i] should not be undefined!");t.poi=null,t.tag=""}this._pickColorIndex=0},t.prototype.createPickColor=function(e,t){var n=this._pickColorIndex;++this._pickColorIndex;var r=this._pickColors[n];r?(r.poi=e,r.tag=t):this._pickColors[n]={poi:e,tag:t};var o=i(l(n),3);return[o[0],o[1],o[2]]},t.prototype.getPickInfoFromColor=function(e,t,n){var r=f(e,t,n);if(r>=this._pickColorIndex)console.error("index >= this._pickColorIndex");else{var o=this._pickColors[r];if(o)return o;console.error("!this._pickColors[index]")}},t.prototype.destroyImp=function(){this.reset()},t}(a.Destroyable);t.PickColorMananger=p},3814:function(e,t){var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function r(e,t,r,o){var i=n(e,2),a=i[0],c=i[1],s=n(o,4),u=s[0],l=s[1],f=s[2],p=s[3],d=t[0]*r[0],h=t[1]*r[1],v=a-(d*u+f),y=c-(h*l+p);return{left:v,top:y,right:v+d,bottom:y+h}}function o(e,t,n,r,o,i){e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.arcTo(t+r,n,t+r,n+i,i),e.lineTo(t+r,n+o-i),e.arcTo(t+r,n+o,t+r-i,n+o,i),e.lineTo(t+i,n+o),e.arcTo(t,n+o,t,n+o-i,i),e.lineTo(t,n+i),e.arcTo(t,n,t+i,n,i)}function i(e){return("00"+e.toString(16).toUpperCase()).substr(-2)}Object.defineProperty(t,"__esModule",{value:!0}),t.getColorHexStr=t.uint8ToHexStr=t.drawTextBlock=t.setCanvasUniformColor=t.imageToCanvas=t.drawText=t.drawRoundRectPath=t.drawPoint=t.getDrawRect=void 0,t.getDrawRect=r,t.drawPoint=function(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(t-.5*r,n-.5*r),e.arc(t,n-r,.7071067811865475*r,.75*Math.PI,.25*Math.PI),e.lineTo(t,n),e.fillStyle=o,e.fill()},t.drawRoundRectPath=o,t.drawText=function(e,t,n,r,o,i){e.font=o;var a=e.measureText(r),c=a.actualBoundingBoxLeft+a.actualBoundingBoxRight,s=Number.isFinite(a.fontBoundingBoxAscent)?a.fontBoundingBoxAscent:a.actualBoundingBoxAscent,u=Number.isFinite(a.fontBoundingBoxDescent)?a.fontBoundingBoxDescent:a.actualBoundingBoxDescent,l=s+u;e.fillStyle=i,e.fillText(r,t-.5*c,n+.5*l-u)},t.imageToCanvas=function(e){var t=e.width,n=e.height,r=t instanceof SVGAnimatedLength?t.baseVal.SVG_LENGTHTYPE_PX:t,o=n instanceof SVGAnimatedLength?n.baseVal.SVG_LENGTHTYPE_PX:n,i=document.createElement("canvas");i.width=r,i.height=o;var a=i.getContext("2d");if(!a)throw new Error("!cavnasCtx");return a.drawImage(e,0,0,r,o),i},t.setCanvasUniformColor=function(e,t){var r=e.width,o=e.height,i=e.getContext("2d");if(!i)throw new Error("!cavnasCtx");for(var a=n(t.map((function(e){return 255*e|0})),3),c=a[0],s=a[1],u=a[2],l=i.getImageData(0,0,r,o),f=l.data,p=0;p<f.length;p+=4)f[p]=c,f[p+1]=s,f[p+2]=u;i.putImageData(l,0,0)},t.drawTextBlock=function(e,t,n,i,a,c,s,u,l){void 0===i&&(i=[.5,1,0,0]),void 0===c&&(c="12px Arial"),void 0===s&&(s=2),void 0===u&&(u="#FFF"),void 0===l&&(l="#000A"),e.font=c;var f=e.measureText(a),p=f.actualBoundingBoxLeft+f.actualBoundingBoxRight+2*s,d=f.fontBoundingBoxAscent+f.fontBoundingBoxDescent+2*s,h=r([t,n],[p,d],[1,1],i),v=h.left,y=h.top,_=h.bottom;e.fillStyle=l,o(e,v,y,p,d,s),e.fill(),e.fillStyle=u,e.fillText(a,v+s,_-s-f.fontBoundingBoxDescent)},t.uint8ToHexStr=i,t.getColorHexStr=function(e){var t=n(e.map((function(e){return 255*e|0})),4),r=t[0],o=t[1],a=t[2],c=t[3];return"#".concat(i(r)).concat(i(o)).concat(i(a)).concat(i(c))}},6301:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1078),t),o(n(9913),t),o(n(8831),t),o(n(1644),t),o(n(276),t),o(n(3814),t),o(n(2246),t)},5780:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.BorderedPosFloatDiv=t.createBottomTriangleElement=t.createCloseDiv=void 0;var a=n(9125),c=n(9417),s=["top","bottom","left","right"];function u(e,t,n){var r,o=document.createElement("div");return o.style.cssText="position: absolute; ".concat((r=n,Object.entries(r).map((function(e){var t=i(e,2),n=t[0],r=t[1];return s.includes(n)?"".concat(n,": ").concat(r,"px; "):""})).join(""))," background-color: ").concat(e,"; border-radius: ").concat(t,"px;"),o.innerHTML='<svg viewBox="0 0 1024 1024" style="display: block;" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2420" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32"><defs><style type="text/css"></style></defs><path d="M512 128C300.8 128 128 300.8 128 512s172.8 384 384 384 384-172.8 384-384S723.2 128 512 128zM512 832c-179.2 0-320-140.8-320-320s140.8-320 320-320 320 140.8 320 320S691.2 832 512 832z" p-id="2421" fill="#ffffff"></path><path d="M672 352c-12.8-12.8-32-12.8-44.8 0L512 467.2 396.8 352C384 339.2 364.8 339.2 352 352S339.2 384 352 396.8L467.2 512 352 627.2c-12.8 12.8-12.8 32 0 44.8s32 12.8 44.8 0L512 556.8l115.2 115.2c12.8 12.8 32 12.8 44.8 0s12.8-32 0-44.8L556.8 512l115.2-115.2C684.8 384 684.8 364.8 672 352z" p-id="2422" fill="#ffffff"></path></svg>',o}function l(e,t,n){void 0===n&&(n="rgba(0,0,0,0.7)");var r=document.createElement("div");r.style.cssText="margin: 0 auto; width: ".concat(e,"px; height: ").concat(t,"px; position: relative; pointer-events: none;");var o=document.createElement("div");return o.style.cssText="position: absolute; left: 0px; top: 0px; width: 0; height: 0; border-left: ".concat(.5*e,"px solid transparent; border-right: ").concat(.5*e,"px solid transparent; border-top: ").concat(t,"px solid ").concat(n,";"),r.appendChild(o),[r,o]}t.createCloseDiv=u,t.createBottomTriangleElement=l;var f=function(e){function t(){var t=e.call(this)||this;t._colorStr="rgba(0, 0, 0, 0.7)",t._divColorChanged=new a.Event,t._borderRadius=10;var n=document.createElement("div");n.style.cssText="position: relative; background-color: ".concat(t._colorStr,"; border-radius: ").concat(t._borderRadius,"px; padding: 5px; pointer-events: all;"),t._borderDiv=n;var r=u(t._colorStr,10,{top:3,right:3}),o=i(l(2*t._borderRadius,2*t._borderRadius,t._colorStr),2),c=o[0],s=o[1],f=document.createElement("div");t._innerContentDiv=f,n.appendChild(f),n.appendChild(r),t.contentDiv.appendChild(n),t.contentDiv.appendChild(c),r.style.opacity="0.1",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.1"},r.onclick=function(){t._closeEvent&&t._closeEvent.emit()},t._closeDiv=r,t.dispose(t._divColorChanged.disposableOn((function(){s.style.borderTopColor=t._colorStr,n.style.backgroundColor=t._colorStr,c.style.width="".concat(2*t._borderRadius,"px"),c.style.height="".concat(2*t._borderRadius,"px"),s.style.borderLeft="".concat(t._borderRadius,"px"),s.style.borderRight="".concat(t._borderRadius,"px"),s.style.borderTop="".concat(2*t._borderRadius,"px")})));var p=function(e){"Escape"===e.key&&t._closeEvent&&t._closeEvent.emit()};return document.body.addEventListener("keydown",p,!0),t.dispose((function(){document.removeEventListener("keydown",p,!0)})),t}return o(t,e),Object.defineProperty(t.prototype,"borderDiv",{get:function(){return this._borderDiv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerContentDiv",{get:function(){return this._innerContentDiv},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.show=!1,this.opacity=0,this._closeDiv.style.opacity="0.1",e.prototype.reset.call(this)},Object.defineProperty(t.prototype,"colorStr",{get:function(){return this._colorStr},set:function(e){this._colorStr!==e&&(this._colorStr=e,this._divColorChanged.emit())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"borderRadius",{get:function(){return this._borderRadius},set:function(e){this._borderRadius!==e&&(this._borderRadius=e,this._divColorChanged.emit())},enumerable:!1,configurable:!0}),t}(c.PosFloatDiv);t.BorderedPosFloatDiv=f},3798:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.CursorInfo=t.CursorFloatDiv=void 0;var a=n(9125),c=n(6352),s=n(6398),u=function(e){function t(){var t=e.call(this)||this;return t.contentDiv.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.contentDiv.style.borderRadius="3px",t.contentDiv.style.color="rgb(255, 255, 255)",t.contentDiv.style.padding="1px 5px 1px 5px",t.contentDiv.style.fontSize="12px",t.contentDiv.style.whiteSpace="nowrap",t.contentDiv.innerText="未定义光标信息！",t.originRatioX=0,t.originRatioY=0,t.originOffsetX=-16,t}return o(t,e),t}(s.PosFloatDiv);t.CursorFloatDiv=u;var l=function(e){function t(t,n){var r=e.call(this)||this;r._pointerOut=r.disposeVar((0,a.react)(!1)),r._show=r.disposeVar((0,a.react)(!0)),r._cursorDiv=new s.DivPoi(n,t),r.dispose((function(){return r._cursorDiv.destroy()}));var o=function(e){var t=i((0,c.getDomEventCurrentTargetPos)(e),2),n=t[0],o=t[1];r._cursorDiv.floatDiv.winPos=[n,o]};t.addEventListener("pointermove",o),r.dispose((function(){return t.removeEventListener("pointermove",o)}));var u=function(){r._cursorDiv.show=r.show&&r._pointerOut.value};return u(),r.dispose(r.showChanged.disposableOn(u)),r.dispose(r._pointerOut.changed.disposableOn(u)),r}return o(t,e),Object.defineProperty(t.prototype,"show",{get:function(){return this._show.value},set:function(e){this._show.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showChanged",{get:function(){return this._show.changed},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._pointerOut.value=!1},Object.defineProperty(t.prototype,"cursorDiv",{get:function(){return this._cursorDiv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._cursorDiv.floatDiv.contentDiv.innerText},set:function(e){this._cursorDiv.floatDiv.contentDiv.innerText=e},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.CursorInfo=l},4057:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DivPoi=void 0;var i=n(9125),a=n(9125),c=n(9573),s=function(e){function t(t,n){var r=e.call(this)||this;return r._customDivClass=t,r._divContainer=n,r._show=!1,r.dispose((function(){r.show=!1})),r}return o(t,e),t.prototype._updateDivPoi=function(){if(this._show){var e=this.floatDiv;e.element.parentElement||this._divContainer.appendChild(e.element)}else{var t=this._floatDiv;t&&t.element.parentElement&&this._divContainer.removeChild(t.element)}},Object.defineProperty(t.prototype,"show",{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,this._updateDivPoi(),this._showChanged&&this._showChanged.emit(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"floatDiv",{get:function(){var e=this;if(!this._floatDiv){var t=(0,c.getFloatDivPool)(this._customDivClass).create();this.dispose((function(){(0,c.getFloatDivPool)(e._customDivClass).destroy(t)})),this._floatDiv=t}return this._floatDiv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showChanged",{get:function(){return this._showChanged||(this._showChanged=new i.Event),this._showChanged},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.DivPoi=s},9573:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getFloatDivPool=t.FloatDiv=void 0;var a=n(9125),c=n(9125),s=n(9125),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._show=!0,t._opacity=1,t._winPos=[0,0],t}return o(t,e),Object.defineProperty(t.prototype,"winPos",{get:function(){return this._winPos},set:function(e){var t=i(e,2),n=t[0],r=t[1],o=i(this._winPos,2),a=o[0],c=o[1];n===a&&r===c||(this._winPos[0]=n,this._winPos[1]=r,this._winPosChanged&&this._winPosChanged.emit(this._winPos))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"winPosChanged",{get:function(){return this._winPosChanged=this._winPosChanged||new a.Event,this._winPosChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this._opacityChanged&&this._opacityChanged.emit(this._opacity))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacityChanged",{get:function(){return this._opacityChanged=this._opacityChanged||new a.Event,this._opacityChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"show",{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,this._showChanged&&this._showChanged.emit(this._show))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showChanged",{get:function(){return this._showChanged=this._showChanged||new a.Event,this._showChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"closeEvent",{get:function(){return this._closeEvent||(this._closeEvent=new a.Event),this._closeEvent},enumerable:!1,configurable:!0}),t}(c.Destroyable);t.FloatDiv=u;var l=new WeakMap;t.getFloatDivPool=function(e){if(!l.has(e)){var t=new s.ObjPool((function(){return new e}),(function(e){return e.reset()}));l.set(e,t)}return l.get(e)}},560:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameBorderedPosFloatDiv=void 0;var i=n(9125),a=function(e){function t(){var t=e.call(this)||this,n=document.createElement("iframe");n.style.cssText="width: 100%; height: 100%; border-width: 0px; border-radius: 5px; display: block;",n.src="http://www.weather.com.cn/live/index.shtml",t._iframe=n,t.innerContentDiv.appendChild(n);var r=function(e){e.source===t._iframe.contentWindow&&(t._iframeMessageEvent?t._iframeMessageEvent.emit(e):console.warn("iframe消息接收到未处理！data: ".concat(e.data)))};return window.addEventListener("message",r),t.dispose((function(){window.removeEventListener("message",r)})),t}return o(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.src=""},Object.defineProperty(t.prototype,"src",{get:function(){return this._iframe.src},set:function(e){this._iframe.src!==e&&(this._iframe.src=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iframe",{get:function(){return this._iframe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iframeMessageEvent",{get:function(){return this._iframeMessageEvent=this._iframeMessageEvent||new i.Event,this._iframeMessageEvent},enumerable:!1,configurable:!0}),t}(n(5780).BorderedPosFloatDiv);t.IFrameBorderedPosFloatDiv=a},9417:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.PosFloatDiv=void 0;var a=n(9125),c=function(e){function t(){var t=e.call(this)||this;t._originOffsetX=0,t._originOffsetY=0,t._originRatioX=.5,t._originRatioY=1,t._divChanged=new a.Event;var n=document.createElement("div");n.style.cssText="width: 0px; height: 0px; position: absolute; opacity: 1.0; visibility: visible;";var r=document.createElement("div");r.style.cssText="position: absolute; left: ".concat(-t._originOffsetX,"px; top: ").concat(-t._originOffsetY,"px; transform: translateX(-").concat(100*t._originRatioX,"%) translateY(-").concat(100*t._originRatioY,"%); margin: 0; padding: 0; pointer-events: none;");var o=document.createElement("div");t._contentDiv=o,r.appendChild(o),n.appendChild(r);var c=function(e){e.stopPropagation()};return n.addEventListener("pointermove",c),n.addEventListener("pointerdown",c),n.addEventListener("pointerup",c),t.dispose((function(){n.removeEventListener("pointermove",c),n.removeEventListener("pointerdown",c),n.removeEventListener("pointerup",c)})),t._div=n,t.dispose(t._divChanged.disposableOn((function(){r.style.left="".concat(-t._originOffsetX,"px"),r.style.top="".concat(-t._originOffsetY,"px"),r.style.transform="translateX(-".concat(100*t._originRatioX,"%) translateY(-").concat(100*t._originRatioY,"%)")}))),t.dispose(t.winPosChanged.disposableOn((function(e){var n=i(e,2),r=n[0],o=n[1];t._div.style.left="".concat(r,"px"),t._div.style.top="".concat(o,"px")}))),t.dispose(t.opacityChanged.disposableOn((function(e){t._div.style.opacity="".concat(e)}))),t.dispose(t.showChanged.disposableOn((function(e){t._div.style.visibility=e?"visible":"hidden"}))),t}return o(t,e),Object.defineProperty(t.prototype,"contentDiv",{get:function(){return this._contentDiv},enumerable:!1,configurable:!0}),t.prototype.reset=function(){},Object.defineProperty(t.prototype,"originOffsetX",{get:function(){return this._originOffsetX},set:function(e){this._originOffsetX!==e&&(this._originOffsetX=e,this._divChanged.emit())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originOffsetY",{get:function(){return this._originOffsetY},set:function(e){this._originOffsetY!==e&&(this._originOffsetY=e,this._divChanged.emit())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originRatioX",{get:function(){return this._originRatioX},set:function(e){this._originRatioX!==e&&(this._originRatioX=e,this._divChanged.emit())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originRatioY",{get:function(){return this._originRatioY},set:function(e){this._originRatioY!==e&&(this._originRatioY=e,this._divChanged.emit())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._div},enumerable:!1,configurable:!0}),t}(n(9573).FloatDiv);t.PosFloatDiv=c},3238:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolTipDiv=void 0;var a=function(e){function t(){var t=e.call(this)||this;t._text="";var n=document.createElement("div");t._div=n,n.style.cssText="width: 0px; height: 0px; position: absolute; opacity: 1.0; visibility: visible; transition: opacity 0.5s;";var r=document.createElement("div");r.style.cssText="position: absolute; left: 0px; bottom: 0px; transform: translateX(-50%); margin: 0; padding: 0; pointer-events: none;";var o=document.createElement("div");return o.style.cssText="position: relative; background-color: rgba(0, 0, 0, 0.7); border-radius: 5px; padding: 3px; pointer-events: all; color: white; white-space: nowrap;",o.innerText=t._text,t._div.appendChild(r),r.appendChild(o),t._contentContainer=o,t._div=n,t.dispose(t.winPosChanged.disposableOn((function(e){var n=i(e,2),r=n[0],o=n[1];t._div.style.left="".concat(r,"px"),t._div.style.top="".concat(o-50,"px")}))),t.dispose(t.opacityChanged.disposableOn((function(e){t._div.style.opacity="".concat(e)}))),t.dispose(t.showChanged.disposableOn((function(e){t._div.style.visibility=e?"visible":"hidden"}))),t}return o(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._div},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.opacity=1,this.show=!0},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e,this._contentContainer.innerText=e)},enumerable:!1,configurable:!0}),t}(n(9573).FloatDiv);t.ToolTipDiv=a},6398:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(9417),t),o(n(4057),t),o(n(9573),t),o(n(5780),t),o(n(560),t),o(n(3238),t),o(n(3798),t)},1195:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6301),t),o(n(6398),t)},6380:(e,t)=>{function n(e,t,n){for(var r=0;r<n;++r)if(e[r]!==t[r])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.equalsPenSplineVertexType=void 0,t.equalsPenSplineVertexType=function(e,t,r){return n(e.position,t.position,r)&&(e.leftPosition===t.leftPosition===void 0||e.leftPosition&&t.leftPosition&&n(e.leftPosition,t.leftPosition,r)||!1)&&(e.rightPosition===t.rightPosition===void 0||e.rightPosition&&t.rightPosition&&n(e.rightPosition,t.rightPosition,r)||!1)}},1073:(e,t)=>{function n(e,t){var n=e*e,r=n*e,o=e+e+e,i=n+n+n,a=r+r+r,c=1-o+i-r,s=o-(i+i)+a,u=i-a,l=r;return t?(t[0]=c,t[1]=s,t[2]=u,t[3]=l,t):[c,s,u,l]}Object.defineProperty(t,"__esModule",{value:!0}),t.computBezierSpline3BaseFactors=t.bezierSpline3=t.bezierSpline3WithBaseFactor=t.getBezierSpline3BaseFactor=void 0,t.getBezierSpline3BaseFactor=n,t.bezierSpline3WithBaseFactor=function(e,t,n,r,o,i,a){for(var c=null!=a?a:new Array(t),s=0;s<t;++s)c[s]=e[0]*n[s]+e[1]*r[s]+e[2]*o[s]+e[3]*i[s];return c},t.bezierSpline3=function(e,t,r,o,i,a,c){for(var s=n(e),u=null!=c?c:new Array(t),l=0;l<t;++l)u[l]=s[0]*r[l]+s[1]*o[l]+s[2]*i[l]+s[3]*a[l];return u},t.computBezierSpline3BaseFactors=function(e){for(var t=new Array(e+1),r=1/e,o=0,i=0;i<e;++i)t[i]=n(o),o+=r;return t}},5806:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1073),t),o(n(6380),t),o(n(5249),t)},5249:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vertexArrayToBezierSpline3Positions=void 0;var r=n(1073),o=(0,r.computBezierSpline3BaseFactors)(20);t.vertexArrayToBezierSpline3Positions=function(e,t,n,i){var a,c,s=e.length;if(s<=1)return e.map((function(e){return e.position}));for(var u=20===i?o:(0,r.computBezierSpline3BaseFactors)(i),l=n?s:s-1,f=new Array(l*i+1),p=0;p<l;++p){var d=e[p],h=e[p+1===s?0:p+1],v=d.position,y=null!==(a=d.rightPosition)&&void 0!==a?a:d.position,_=null!==(c=h.leftPosition)&&void 0!==c?c:h.position,g=h.position,b=p*i;f[b]=v;for(var m=1;m<i;++m)f[b+m]=(0,r.bezierSpline3WithBaseFactor)(u[m],t,v,y,_,g)}return f[l*i]=e[n?0:s-1].position,f}},6549:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.registerScript=t.getNameAndExtFromFileName=t.getDirAndFileNameFromPath=t.getCurrentScriptPath=void 0;var o=n(7191);function i(){return document.currentScript.src}function a(e){var t=/(.*)[\/\\](.*)/.exec(e);return t&&t.length>=3?[t[1],t[2]]:void 0}function c(e){var t=/(.*)\.(.*)/.exec(e);return t&&t.length>=3?[t[1],t[2]]:void 0}t.getCurrentScriptPath=i,t.getDirAndFileNameFromPath=a,t.getNameAndExtFromFileName=c,t.registerScript=function(){var e,t,n=i(),s=r(null!==(e=a(n))&&void 0!==e?e:["",""],2),u=s[0],l=s[1],f=r(null!==(t=c(l))&&void 0!==t?t:["",""],2),p=f[0],d=f[1];p?(o.SceneObject.context.setEnv("".concat(p,"-script-path"),n),o.SceneObject.context.setEnv("".concat(p,"-script-dir"),u),o.SceneObject.context.setEnv("".concat(p,"-script-name"),p),o.SceneObject.context.setEnv("".concat(p,"-script-ext"),d)):console.warn("getCurrentScriptPath error: ".concat(p))}},1671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5449:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3294:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;var s=n(9675),u=n(129),l=n(3160),f=n(8619),p=function(e){function t(n){var r=e.call(this)||this;return r._root=r.disposeVar(new u.TreeItem(r,!0,"_ROOT")),r._itemChildrenChanged=r.disposeVar(new s.Event),r._itemChildrenToChange=r.disposeVar(new s.Event),r._itemsAdded=r.disposeVar(new s.Event),r._itemsDeleted=r.disposeVar(new s.Event),r._itemsChanged=r.disposeVar(new s.Event),r._transactionStack=0,r._addedItems=new Set,r._deletedItems=new Set,r._selectedItems=r.disposeVar(new s.ObservableArray),r._itemDivHeight=r.disposeVar((0,s.react)(t.defaultItemDivHeight)),r._forceRedrawEvent=r.disposeVar(new s.Event),r._uiTree=r.disposeVar(new l.UiTree(r)),r._root._tree.value=r,r.dispose(r._itemChildrenToChange.disposableOn((function(e,t){var n,o,a,c;if(e.children){try{for(var s=i(t),u=s.next();!u.done;u=s.next()){for(var l=u.value,f=l.start,p=l.deleteCount,d=l.items,h=f;h<f+p;++h){var v=e.children.get(h);r._deletedItems.has(v)?console.error("this._deletedItems.has(currentItem(".concat(v.id,"))")):r._deletedItems.add(v)}try{for(var y=(a=void 0,i(d)),_=y.next();!_.done;_=y.next())v=_.value,r._deletedItems.has(v)?r._deletedItems.delete(v):r._addedItems.add(v)}catch(e){a={error:e}}finally{try{_&&!_.done&&(c=y.return)&&c.call(y)}finally{if(a)throw a.error}}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}r._execTransaction()}else console.error("!item.children")}))),void 0!==n&&(r.itemDivHeight=n),r}return o(t,e),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this._selectedItems},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastSelectedItem",{get:function(){return this._selectedItems.length>0?this._selectedItems.get(this._selectedItems.length-1):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemDivHeight",{get:function(){return this._itemDivHeight.value},set:function(e){this._itemDivHeight.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemDivHeightChanged",{get:function(){return this._itemDivHeight.changed},enumerable:!1,configurable:!0}),t.prototype.forceRedraw=function(){this._forceRedrawEvent.emit()},Object.defineProperty(t.prototype,"uiTree",{get:function(){return this._uiTree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._root.children},enumerable:!1,configurable:!0}),t.prototype.getDescendants=function(e){return this._root.getDescendants(e)},t.prototype.getTreeItemFromId=function(e){var t,n,r=void 0;try{for(var o=i(this.getDescendants()),a=o.next();!a.done;a=o.next()){var c=a.value;if(c.id===e){r=c;break}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},t.prototype._startTransaction=function(){0===this._transactionStack&&(this._deletedItems.size>0&&(console.warn("this._deletedItems.size > 0"),this._deletedItems.clear()),this._addedItems.size>0&&(console.warn("this._addedItems.size > 0"),this._addedItems.clear())),++this._transactionStack},t.prototype._stopTransaction=function(){--this._transactionStack,this._execTransaction()},t.prototype._execTransaction=function(){0===this._transactionStack&&(this._deletedItems.size>0&&(this._itemsDeleted.emit(c([],a(this._deletedItems),!1)),this._deletedItems.clear()),this._addedItems.size>0&&(this._itemsAdded.emit(c([],a(this._addedItems),!1)),this._addedItems.clear()))},Object.defineProperty(t.prototype,"itemChildrenChanged",{get:function(){return this._itemChildrenChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemChildrenToChange",{get:function(){return this._itemChildrenToChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsChanged",{get:function(){return this._itemsChanged},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsAdded",{get:function(){return this._itemsAdded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemsDeleted",{get:function(){return this._itemsDeleted},enumerable:!1,configurable:!0}),t.defaultItemDivHeight=24,t.canMoveToTreeItem=f.canMoveToTreeItem,t.moveToTreeItem=f.moveToTreeItem,t.canMoveToTreeItems=f.canMoveToTreeItems,t.moveToTreeItems=f.moveToTreeItems,t}(s.Destroyable);t.Tree=p},129:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeItem=void 0;var u=n(9675),l=n(8619),f=n(3271),p=function(e){function t(n,r,o){void 0===r&&(r=!1);var i=e.call(this)||this;return i._tree=n,i._hasChildren=r,i._parent=i.disposeVar((0,u.react)(void 0)),i._level=i.disposeVar((0,u.react)(0)),i._uiTreeObject=i.disposeVar(new f.UiTreeObject(i)),i._id=null!=o?o:(0,u.createGuid)(),"_ROOT"!==i._id&&t.wm.has(i._id)&&console.warn("创建了id(".concat(i._id,")相同的树节点，会导致之前的树节点无法索引！")),t.wm.set(i._id,i),i.dispose((function(){"_ROOT"===i._id||t.wm.has(i._id)?t.wm.delete(i._id):console.warn("树节点(".concat(i._id,")不在wm树上！"))})),i.dispose(i._parent.changed.disposableOn((function(){i._updateLevel()}))),i.dispose(i._level.changed.disposableOn((function(){var e,t;if(i.children)try{for(var n=a(i.children),r=n.next();!r.done;r=n.next())r.value._updateLevel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}))),t.allTreeItems.set(i._id,i),i.dispose((function(){t.allTreeItems.delete(i._id)})),i}return o(t,e),t.getFromId=function(e){return t.wm.get(e)},Object.defineProperty(t.prototype,"uiTreeObject",{get:function(){return this._uiTreeObject},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype._updateLevel=function(){this.parent&&(this._level.value=this.parent.level+1)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentChanged",{get:function(){return this._parent.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){var e=this;if(this._hasChildren){if(!this._children){var t=this.disposeVar(new u.ObservableArray);this._children=t,this.dispose(t.toChangeEvent.disposableOn((function(t,n){var r,o,i,c;try{for(var s=a(t),u=s.next();!u.done;u=s.next()){for(var l=u.value,f=l.start,p=l.deleteCount,d=l.items,h=f;h<f+p;++h)n.get(h)._parent.value=void 0;try{for(var v=(i=void 0,a(d)),y=v.next();!y.done;y=v.next()){var _=y.value;if(_.parent)throw console.error("请检查新增的treeItem是否正在使用！"),new Error("item.parent should not exist!");_._parent.value=e}}catch(e){i={error:e}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(i)throw i.error}}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}})));var n=new Set,r=new Set;this.dispose(t.toChangeEvent.disposableOn((function(t,o){var i,c,s,u,l,f,p;if(e.tree){n.clear(),r.clear();try{for(var d=a(t),h=d.next();!h.done;h=d.next()){for(var v=h.value,y=v.start,_=v.deleteCount,g=v.items,b=y;b<y+_;++b)n.add(o.get(b));try{for(var m=(s=void 0,a(g)),w=m.next();!w.done;w=m.next()){var O=w.value;r.add(O)}}catch(e){s={error:e}}finally{try{w&&!w.done&&(u=m.return)&&u.call(m)}finally{if(s)throw s.error}}}}catch(e){i={error:e}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(i)throw i.error}}try{for(var P=a(n),j=P.next();!j.done;j=P.next())O=j.value,r.has(O)&&(n.delete(O),r.delete(O))}catch(e){l={error:e}}finally{try{j&&!j.done&&(f=P.return)&&f.call(P)}finally{if(l)throw l.error}}null===(p=e.tree)||void 0===p||p.itemChildrenToChange.emit(e,t,n,r)}}))),this.dispose(t.changedEvent.disposableOn((function(){var t;null===(t=e.tree)||void 0===t||t.itemChildrenChanged.emit(e)}))),this.dispose(t.toChangeEvent.disposableOn((function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e._childrenToChangeEvent&&(t=e._childrenToChangeEvent).emit.apply(t,s([],c(n),!1))}))),this.dispose(t.changedEvent.disposableOn((function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e._childrenChangedEvent&&(t=e._childrenChangedEvent).emit.apply(t,s([],c(n),!1))})))}return this._children}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childrenResetedEvent",{get:function(){return this._childrenResetedEvent||(this._childrenResetedEvent=new u.Event),this._childrenResetedEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childrenToChangeEvent",{get:function(){return this._childrenToChangeEvent||(this._childrenToChangeEvent=new u.Event),this._childrenToChangeEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childrenChangedEvent",{get:function(){return this._childrenChangedEvent||(this._childrenChangedEvent=new u.Event),this._childrenChangedEvent},enumerable:!1,configurable:!0}),t.prototype.resetChildren=function(e){void 0===e&&(e=!1),this._children&&(this._children.length=0),this._hasChildren=e,this._childrenResetedEvent&&this._childrenResetedEvent.emit(e)},t.prototype.getDescendants=function(e){var t,n,r,o,a,c;return i(this,(function(i){switch(i.label){case 0:n=[],r=[],(t=this).children&&t.children.length>0&&(!e||e(t))&&(n.push(0),r.push(t.children)),i.label=1;case 1:return n.length>0?(o=n[n.length-1],a=r[r.length-1],[4,c=a.get(o)]):[3,3];case 2:return i.sent(),o<a.length-1?++n[n.length-1]:(r.pop(),n.pop()),c.children&&c.children.length>0&&(!e||e(c))&&(n.push(0),r.push(c.children)),[3,1];case 3:return[2]}}))},t.prototype.getAncestors=function(e){var t;return i(this,(function(n){switch(n.label){case 0:t=this.parent,n.label=1;case 1:return t?[4,t]:[3,3];case 2:return n.sent(),e&&!e(t)?[3,3]:(t=t.parent,[3,1]);case 3:return[2]}}))},t.prototype.isDescendantOf=function(e){var t,n;try{for(var r=a(this.getAncestors()),o=r.next();!o.done;o=r.next())if(o.value===e)return!0}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return!1},t.prototype.isAncestorOf=function(e){return e.isDescendantOf(this)},Object.defineProperty(t.prototype,"level",{get:function(){return this._level.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levelChanged",{get:function(){return this._level.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tree",{get:function(){return this._tree},enumerable:!1,configurable:!0}),t.prototype.canMoveTo=function(e,t){return(0,l.canMoveToTreeItem)(this,e,t)},t.prototype.moveTo=function(e,t){(0,l.moveToTreeItem)(this,e,t)},t.prototype.detachFromParent=function(){if(this.parent&&this.parent.children){var e=this.parent.children.indexOf(this);this.parent.children.splice(e,1)}},t.prototype.insertNewTreeItem=function(e,t){if(t&&t.tree!==this.tree)return console.warn("newTreeItem.tree !== this.tree"),!1;if(this.children&&e.startsWith("Inner"))return t&&this.children.push(t),!0;if("Inner"===e)return!1;var n=this.parent;if(!n||!n.children)return!1;var r=n.children.indexOf(this);return e.endsWith("Before")?t&&n.children.splice(r,0,t):e.endsWith("After")&&t&&n.children.splice(r+1,0,t),!0},t.wm=new Map,t.allTreeItems=new Map,t}(u.Destroyable);t.TreeItem=p},3160:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.UiTree=void 0;var c=n(9675),s=n(9121),u=function(e){function t(t){var n=e.call(this)||this;n._tree=t,n._redrawEvent=n.disposeVar(new c.Event),n._containerScrollTop=n.disposeVar((0,c.react)(0)),n._containerClientHeight=n.disposeVar((0,c.react)(-1)),n._container=n.disposeVar((0,c.react)(void 0)),n._redrawInfo={topFreeSpaceHeight:0,topUnvisibleItemNum:0,middleTreeItems:[],bottomFreeSpaceHeight:0,bottomUnvisibleItemNum:0};var r,o=n._containerClientHeight,i=n._containerScrollTop,u=n._tree._forceRedrawEvent,l=n.disposeVar((0,c.createNextAnimateFrameEvent)(n._tree.itemDivHeightChanged,n._tree.itemChildrenChanged,n._tree.itemsChanged,o.changed,i.changed,u)),f=n.redrawInfo,p=function(e){var t=e.uiTreeObject;return!(!e.children||t&&t.collapsed)};return n.dispose(l.disposableOn((function(){var e,t,r,s;if(f.topFreeSpaceHeight=0,f.topUnvisibleItemNum=0,f.middleTreeItems.length=0,f.bottomFreeSpaceHeight=0,f.bottomUnvisibleItemNum=0,n._containerClientHeight.value>=0){var u=(0,c.length)(n._tree.getDescendants(p)),l=n._tree.itemDivHeight,d=l*u,h=(0,c.max)([(0,c.min)([(0,c.max)([d-o.value,0]),i.value]),0]),v=h/l|0,y=0|Math.ceil((h-v*l+o.value)/l);v>0&&(f.topUnvisibleItemNum=v,f.topFreeSpaceHeight=v*n._tree.itemDivHeight);var _=v+y,g=0;try{for(var b=a(n._tree.getDescendants(p)),m=b.next();!m.done;m=b.next()){var w=m.value;if(g>=_)break;g>=v&&f.middleTreeItems.push(w),++g}}catch(t){e={error:t}}finally{try{m&&!m.done&&(t=b.return)&&t.call(b)}finally{if(e)throw e.error}}var O=u-v-y;O>0&&(f.bottomUnvisibleItemNum=O,f.bottomFreeSpaceHeight=O*n._tree.itemDivHeight)}else try{for(var P=a(n._tree.getDescendants(p)),j=P.next();!j.done;j=P.next())w=j.value,f.middleTreeItems.push(w)}catch(e){r={error:e}}finally{try{j&&!j.done&&(s=P.return)&&s.call(P)}finally{if(r)throw r.error}}n._redrawEvent.emit(f)}))),n.dispose((function(){return r&&(r.destroy(),r=void 0)})),n.dispose(n.containerChanged.disposableOn((function(e){r&&(r.destroy(),r=void 0),e&&(r=(0,s.createAnimateFrame)()).start((function(){var t=e,r=t.scrollTop,o=t.clientHeight;void 0===r||void 0===o?(0,c.oneTimeWarning)("createUiTreeWithContainer error: conainter has no scrollTop or clientHeight property!"):(n.containerScrollTop=r,n.containerClientHeight=o)}))}))),n}return o(t,e),Object.defineProperty(t.prototype,"container",{get:function(){return this._container.value},set:function(e){this._container.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerChanged",{get:function(){return this._container.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redrawInfo",{get:function(){return this._redrawInfo},enumerable:!1,configurable:!0}),t.prototype.getTreeItemPos=function(e){var t,n,r=0,o=!1;try{for(var i=a(this._tree.getDescendants((function(e){var t=e.uiTreeObject;return!(!e.children||t&&t.collapsed)}))),c=i.next();!c.done;c=i.next()){if(c.value===e){o=!0;break}++r}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o?[r,r*this._tree.itemDivHeight]:void 0},t.prototype.collapseAll=function(){var e,t;console.log("collapseAll");try{for(var n=a(this.tree.root.getDescendants()),r=n.next();!r.done;r=n.next())r.value.uiTreeObject.collapsed=!0}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},Object.defineProperty(t.prototype,"tree",{get:function(){return this._tree},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redrawEvent",{get:function(){return this._redrawEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerScrollTop",{get:function(){return this._containerScrollTop.value},set:function(e){this._containerScrollTop.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerScrollTopChanged",{get:function(){return this._containerScrollTop.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerClientHeight",{get:function(){return this._containerClientHeight.value},set:function(e){this._containerClientHeight.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"containerClientHeightChanged",{get:function(){return this._containerClientHeight.changed},enumerable:!1,configurable:!0}),t.prototype.getAllItems=function(e){var t,n,r,o,c,s;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,7]),t=a(this._tree.getDescendants()),n=t.next(),i.label=1;case 1:return n.done?[3,4]:(r=n.value,e&&!e(r)?[3,3]:[4,r]);case 2:i.sent(),i.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return o=i.sent(),c={error:o},[3,7];case 6:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(c)throw c.error}return[7];case 7:return[2]}}))},t.prototype.getAllSelectedItems=function(){return this.getAllItems((function(e){return e.uiTreeObject.selected}))},t.prototype.getAllCheckedLeafItems=function(){return this.getAllItems((function(e){return!e.children&&"checked"===e.uiTreeObject.checkedStatus}))},t.prototype.clearAllSelectedItems=function(e){var t,n;try{for(var r=a(this.getAllSelectedItems()),o=r.next();!o.done;o=r.next()){var i=o.value;e&&e.includes(i)||(i.uiTreeObject.selected=!1)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t}(c.Destroyable);t.UiTree=u},3271:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.UiTreeObject=void 0;var a=n(9675),c={checked:1,unchecked:2,indeterminate:3},s=["checked","unchecked","indeterminate"],u=function(e){function t(t){var n=e.call(this)||this;n._treeItem=t,n._collapsed=n.disposeVar((0,a.react)(!1)),n._checkedStatus=n.disposeVar((0,a.react)("unchecked")),n._selected=n.disposeVar((0,a.react)(!1)),n._moveToPositionMode=n.disposeVar((0,a.react)("none")),n._updateCheckedStatusFromChildrenEvent=n.disposeVar(new a.Event);var r=function(){return n._treeItem.tree&&n._treeItem.tree.itemsChanged.emit([n._treeItem])};n.dispose(n._collapsed.changed.disposableOn(r)),n.dispose(n._checkedStatus.changed.disposableOn(r)),n.dispose(n._selected.changed.disposableOn(r)),n.dispose(n._moveToPositionMode.changed.disposableOn(r)),n.dispose(n._checkedStatus.changed.disposableOn((function(){return n._treeItem.parent&&n._treeItem.parent.uiTreeObject.updateCheckedStatusFromChildren()}))),n.dispose(n._treeItem.childrenChangedEvent.disposableOn((function(){n.updateCheckedStatusFromChildren()})));var o=n.disposeVar((0,a.createNextAnimateFrameEvent)(n._updateCheckedStatusFromChildrenEvent));return n.dispose(o.disposableOn((function(){if(n._treeItem.children){var e=0;(0,a.forEachWithBreak)(n._treeItem.children,(function(t){return 3==(e|=c[t.uiTreeObject.checkedStatus])})),e>0&&(n._checkedStatus.value=s[e-1])}}))),n.dispose(n._treeItem.childrenResetedEvent.disposableOn((function(e){e||"indeterminate"!==n.checkedStatus||(n._checkedStatus.value="unchecked")}))),n.dispose(n._selected.changed.disposableOn((function(e){var t=n._treeItem.tree;t&&function(e,t,r){if(void 0===r&&(r=!0),t)e.selectedItems.push(n._treeItem);else{var o=e.selectedItems.indexOf(n._treeItem);-1===o?r&&console.error("selectedItems index -1"):e.selectedItems.splice(o,1)}}(t,e)}))),n.dispose((function(){return n.selected=!1})),n}return o(t,e),Object.defineProperty(t.prototype,"treeItem",{get:function(){return this._treeItem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collapsed",{get:function(){return this._collapsed.value},set:function(e){this._collapsed.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collapsedChanged",{get:function(){return this._collapsed.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkedStatus",{get:function(){return this._checkedStatus.value},enumerable:!1,configurable:!0}),t.prototype.check=function(e){var t,n,r=e?"checked":"unchecked";if(this._checkedStatus.value!==r&&(this._checkedStatus.value=r,this._treeItem.children))try{for(var o=i(this._treeItem.children),a=o.next();!a.done;a=o.next())a.value.uiTreeObject.check(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},t.prototype.updateCheckedStatusFromChildren=function(){this._updateCheckedStatusFromChildrenEvent.emit()},Object.defineProperty(t.prototype,"checkedStatusChanged",{get:function(){return this._checkedStatus.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected.value},set:function(e){this._selected.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedChanged",{get:function(){return this._selected.changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moveToPositionMode",{get:function(){return this._moveToPositionMode.value},set:function(e){this._moveToPositionMode.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moveToPositionModeChanged",{get:function(){return this._moveToPositionMode.changed},enumerable:!1,configurable:!0}),t}(a.Destroyable);t.UiTreeObject=u},200:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1671),t),o(n(8619),t),o(n(5449),t),o(n(3294),t),o(n(129),t),o(n(3160),t),o(n(3271),t)},8619:function(e,t,n){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.moveToTreeItems=t.canMoveToTreeItems=t.moveToTreeItem=t.canMoveToTreeItem=void 0;var o=n(9675);function i(e,t,n){if(e.tree!==t.tree||e===t||e.isAncestorOf(t))return!1;if(e.tree!==t.tree)return!1;if(!e.parent)return!1;if(!e.parent.children)throw console.error("当前节点的父节点没有子节点？这是不可能的！"),new Error("当前节点的父节点没有子节点？这是不可能的！");return!(t===e||e.isAncestorOf(t)||"inner"!==n&&!t.parent||"inner"===n&&!t.children)}function a(e,t,n){if(e.tree&&t.tree&&e.tree===t.tree)if(e.parent){if(!e.parent.children)throw console.error("当前节点的父节点没有子节点？这是不可能的！"),new Error("当前节点的父节点没有子节点？这是不可能的！");if(t!==e)if(e.isAncestorOf(t))console.warn("当前节点不能拖放到它自身的后代节点之上！");else if("inner"===n||t.parent)if("inner"!==n||t.children){e.tree._startTransaction();var r=e.parent.children.indexOf(e);if(e.parent.children.splice(r,1),"inner"!==n){var o=t.parent;if(!o||!o.children)throw new Error("!parent");var i=o.children.indexOf(t);"before"===n?o.children.splice(i,0,e):"after"===n&&o.children.splice(i+1,0,e)}else t.children.push(e);e.tree._stopTransaction()}else console.warn("无法移动到目标节点的子节点中，因为目标节点不是组节点！");else console.warn("目标节点没有父节点，无法拖放！");else console.warn("自身不能拖放到自身！")}else console.warn("当前节点没有父节点，那么该节点无法被移动！")}t.canMoveToTreeItem=i,t.moveToTreeItem=a,t.canMoveToTreeItems=function(e,t,n){return(0,o.every)(e,(function(e){return i(e,t,n)}))},t.moveToTreeItems=function(e,t,n){var o,c;try{for(var s=r(e),u=s.next();!u.done;u=s.next()){var l=u.value;i(l,t,n)?a(l,t,n):console.warn("treeItem(id: ".concat(l.id,") cannot move..."))}}catch(e){o={error:e}}finally{try{u&&!u.done&&(c=s.return)&&c.call(s)}finally{if(o)throw o.error}}}},9979:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SmartWorker=t.findTransferableObjectsFromArgs=void 0;var s=n(9675),u=n(9125);function l(e,t){var n,r,o,c,s,u,f,p;if("number"==typeof e||"string"==typeof e||"boolean"==typeof e||void 0===e);else if(e instanceof String||e instanceof Boolean||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof File||e instanceof FileList);else if(e instanceof ArrayBuffer)-1===t.indexOf(e)&&t.push(e);else if(ArrayBuffer.isView(e))-1===t.indexOf(e.buffer)&&t.push(e.buffer);else if(e instanceof ImageBitmap)-1===t.indexOf(e)&&t.push(e);else if(e instanceof ImageData);else if(e instanceof Map)try{for(var d=i(e),h=d.next();!h.done;h=d.next())l(h.value,t)}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}else if(e instanceof Set)try{for(var v=i(e),y=v.next();!y.done;y=v.next())l(y.value,t)}catch(e){o={error:e}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(o)throw o.error}}else if(Array.isArray(e))try{for(var _=i(e),g=_.next();!g.done;g=_.next())l(g.value,t)}catch(e){s={error:e}}finally{try{g&&!g.done&&(u=_.return)&&u.call(_)}finally{if(s)throw s.error}}else{if(!(e instanceof Object))throw console.error("有不可使用的传递的类型！"),new Error("有不可使用的传递的类型！");try{for(var b=i(Object.entries(e)),m=b.next();!m.done;m=b.next()){var w=a(m.value,2);w[0],l(w[1],t)}}catch(e){f={error:e}}finally{try{m&&!m.done&&(p=b.return)&&p.call(b)}finally{if(f)throw f.error}}}}function f(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{var o=[];try{for(var a=i(n),c=a.next();!c.done;c=a.next())l(c.value,o)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o}catch(e){return}}t.findTransferableObjectsFromArgs=f;var p=function(e){function t(){var t=e.call(this)||this;t._resultEvent=new s.Event,t._lastExecId=-1;var n=URL.createObjectURL(new Blob(["\n\n    function _findTransferableObjectsFromArg(arg, transferableObjects) {\n        if (typeof arg === 'number' || typeof arg === 'string' || typeof arg === 'boolean' || typeof arg === 'undefined') {\n        }\n        else if (arg instanceof String ||\n            arg instanceof Boolean ||\n            arg instanceof Date ||\n            arg instanceof RegExp ||\n            arg instanceof Blob ||\n            arg instanceof File ||\n            arg instanceof FileList) {\n        }\n        else if (arg instanceof ArrayBuffer) {\n            if (-1 === transferableObjects.indexOf(arg)) {\n                transferableObjects.push(arg);\n            }\n        }\n        else if (ArrayBuffer.isView(arg)) {\n            if (-1 === transferableObjects.indexOf(arg.buffer)) {\n                transferableObjects.push(arg.buffer);\n            }\n        }\n        else if (arg instanceof ImageBitmap) {\n            if (-1 === transferableObjects.indexOf(arg)) {\n                transferableObjects.push(arg);\n            }\n        }\n        else if (arg instanceof ImageData) {\n        }\n        else if (arg instanceof Map) {\n            for (let a of arg) {\n                _findTransferableObjectsFromArg(a, transferableObjects);\n            }\n        }\n        else if (arg instanceof Set) {\n            for (let a of arg) {\n                _findTransferableObjectsFromArg(a, transferableObjects);\n            }\n        }\n        else if (Array.isArray(arg)) {\n            for (let a of arg) {\n                _findTransferableObjectsFromArg(a, transferableObjects);\n            }\n        }\n        else if (arg instanceof Object) {\n            for (let [k, v] of Object.entries(arg)) {\n                _findTransferableObjectsFromArg(v, transferableObjects);\n            }\n        }\n        else {\n            console.error(`有不可使用的传递的类型！`);\n            throw new Error(`有不可使用的传递的类型！`);\n        }\n    }\n    \n                function findTransferableObjectsFromArgs(...args) {\n        try {\n            const transferableObjects = [];\n            for (let arg of args) {\n                _findTransferableObjectsFromArg(arg, transferableObjects);\n            }\n            return transferableObjects;\n        }\n        catch (error) {\n            return undefined;\n        }\n    }\n    \n                function progressFunc(execId, value) {\n        // @ts-ignore\n        const workerGlobal = globalThis;\n        const transferableObjects = findTransferableObjectsFromArgs(value);\n        const finalResult = {\n            type: 'function_progress',\n            execId,\n            progress: value,\n        };\n        if (transferableObjects) {\n            workerGlobal.postMessage(finalResult, transferableObjects);\n        }\n        else {\n            workerGlobal.postMessage(finalResult);\n        }\n    }\n    \n                onmessage = function onmessageFunc(messageEvent) {\n                // DedicatedWorkerGlobalScope\n                // @ts-ignore\n                const workerGlobal = globalThis;\n                const { execId, type, name, args } = messageEvent.data;\n                if (type === 'function' || type === 'progressFunc') {\n                    try {\n                        // @ts-ignore\n                        const func = workerGlobal[name];\n                        if (typeof func !== 'function') {\n                            console.error(`typeof func !== 'function'`);\n                            throw new Error(`typeof func !== 'function'`);\n                        }\n                        let resultOrResultPromise;\n                        if (type === 'progressFunc') {\n                            // @ts-ignore\n                            workerGlobal._cancelFuncsMap = workerGlobal._cancelFuncsMap || new Map();\n                            // @ts-ignore\n                            const cancelFuncsMap = workerGlobal._cancelFuncsMap;\n                            const localProgressFunc = (value) => {\n                                progressFunc(execId, value);\n                            };\n                            let resolve_;\n                            let reject_;\n                            resultOrResultPromise = new Promise((resolve, reject) => {\n                                resolve_ = resolve;\n                                reject_ = reject;\n                            });\n                            let finished = false;\n                            const completeFunc = (value) => {\n                                finished = true;\n                                if (cancelFuncsMap.has(execId)) {\n                                    cancelFuncsMap.delete(execId);\n                                }\n                                resolve_(value);\n                            };\n                            const errorFunc = (error) => {\n                                finished = true;\n                                if (cancelFuncsMap.has(execId)) {\n                                    cancelFuncsMap.delete(execId);\n                                }\n                                reject_(error);\n                            };\n                            const cancelFunc = func(localProgressFunc, completeFunc, errorFunc, ...args);\n                            if (typeof cancelFunc === 'function') {\n                                if (!finished) {\n                                    cancelFuncsMap.set(execId, cancelFunc);\n                                }\n                            }\n                            else {\n                                console.warn(`typeof cancelFunc !== 'function'`);\n                            }\n                        }\n                        else if (type === 'function') {\n                            resultOrResultPromise = func(...args);\n                        }\n                        if (resultOrResultPromise instanceof Promise) {\n                            resultOrResultPromise.then(result => {\n                                const transferableObjects = findTransferableObjectsFromArgs(result);\n                                const finalResult = {\n                                    type: 'function_result',\n                                    execId,\n                                    result,\n                                };\n                                transferableObjects && workerGlobal.postMessage(finalResult, transferableObjects) || workerGlobal.postMessage(finalResult);\n                            }).catch(error => {\n                                const finalResult = {\n                                    type: 'function_result',\n                                    execId,\n                                    error,\n                                };\n                                workerGlobal.postMessage(finalResult);\n                            });\n                        }\n                        else {\n                            const result = resultOrResultPromise;\n                            const finalResult = {\n                                type: 'function_result',\n                                execId,\n                                result,\n                            };\n                            const transferableObjects = findTransferableObjectsFromArgs(result);\n                            transferableObjects && workerGlobal.postMessage(finalResult, transferableObjects) || workerGlobal.postMessage(finalResult);\n                        }\n                    }\n                    catch (error) {\n                        const finalResult = {\n                            type: 'function_result',\n                            execId,\n                            error,\n                        };\n                        workerGlobal.postMessage(finalResult);\n                    }\n                }\n                else if (type === 'progressFunc_cancel') {\n                    // @ts-ignore\n                    workerGlobal._cancelFuncsMap = workerGlobal._cancelFuncsMap || new Map();\n                    // @ts-ignore\n                    const cancelFuncsMap = workerGlobal._cancelFuncsMap;\n                    // const execId = args[0];\n                    if (typeof execId !== 'number') {\n                        console.error(`typeof execId !== 'number'`);\n                    }\n                    else {\n                        const cancelFunc = cancelFuncsMap.get(execId);\n                        if (cancelFunc) {\n                            cancelFunc(`progressFunc cancel execId: ${execId}`);\n                        }\n                        else {\n                            // 找不到的原因可能是：\n                            // 1 进度函数的返回值不对，不是一个取消函数！\n                            // 2 进度函数已经被取消，再次执行取消时，就会警告！\n                            console.warn(`cancelFuncsMap cannot find execId: ${execId}`);\n                        }\n                    }\n                }\n                else {\n                    console.error('未知type！');\n                }\n            }\n    "]));return t.dispose((function(){return URL.revokeObjectURL(n)})),t._worker=new Worker(n),t.dispose((function(){return t._worker.terminate()})),t._worker.onmessage=function(e){t._resultEvent.emit(e)},t}return o(t,e),t.prototype.execWorkerFunc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=f(t);if(r)return this.execWorkerFuncWithTransferableObjects.apply(this,c([e,r],a(t),!1));throw console.error("存在无法传递的数据，请检查参数！"),new Error("存在无法传递的数据，请检查参数！")},t.prototype.execWorkerFuncWithTransferableObjects=function(e,t){var n=this;void 0===t&&(t=[]);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t)return new Promise((function(o,i){n._execWorkerFuncWithTransferableObjects.apply(n,c([e,o,i,t],a(r),!1))}));throw console.error("存在无法传递的数据，请检查参数！"),new Error("存在无法传递的数据，请检查参数！")},t.prototype._execWorkerFuncWithTransferableObjects=function(e,t,n,r){void 0===r&&(r=[]);for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var a=++this._lastExecId,c={execId:a,type:"function",name:e,args:o};this._worker.postMessage(c,r);var s=this._resultEvent.disposableOn((function(e){var r=e.data;r.execId===a&&("function_result"===r.type?(s(),"error"in r?n(r.error):t(r.result)):"function_progress"===r.type&&console.error("messageData.type === 'function_progress'"))}))},t.prototype.execWorkerProgressFunc=function(e,t,n,r){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var s=f(o);if(s)return this.execWorkerProgressFuncWithTransferableObjects.apply(this,c([e,t,n,r,s],a(o),!1));throw console.error("存在无法传递的数据，请检查参数！"),new Error("存在无法传递的数据，请检查参数！")},t.prototype.execWorkerProgressFuncWithTransferableObjects=function(e,t,n,r,o){void 0===o&&(o=[]);for(var i=[],s=5;s<arguments.length;s++)i[s-5]=arguments[s];return this._execWorkerProgressFuncWithTransferableObjects.apply(this,c([e,t,n,r,o],a(i),!1))},t.prototype._execWorkerProgressFuncWithTransferableObjects=function(e,t,n,r,o){var i=this;void 0===o&&(o=[]);for(var a=[],c=5;c<arguments.length;c++)a[c-5]=arguments[c];var s=++this._lastExecId,u={execId:s,type:"progressFunc",name:e,args:a};this._worker.postMessage(u,o);var l=this._resultEvent.disposableOn((function(e){var o=e.data;o.execId===s&&("function_result"===o.type?(l&&(l(),l=void 0),"error"in o?r(o.error):n(o.result)):"function_progress"===o.type&&t&&t(o.progress))}));return function(){l&&(l(),l=void 0),i._worker.postMessage({execId:s,type:"progressFunc_cancel",name:"funcName",args:[]})}},t.prototype.eval=function(e){return this.execWorkerFuncWithTransferableObjects("eval",[],e)},t.prototype.importScripts=function(e){return this.execWorkerFuncWithTransferableObjects("importScripts",[],e)},t.prototype.createGlobalFunc=function(e,t){return this.execWorkerFuncWithTransferableObjects("eval",[],"globalThis['".concat(null!=t?t:e.name,"'] = ").concat(e.toString(),";undefined;"))},t}(u.Destroyable);t.SmartWorker=p},9675:e=>{e.exports=vtxf["xr-base-utils"]},3194:e=>{e.exports=vtxf["xr-math"]}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=593;var r=n(4855);(vtxf=void 0===vtxf?{}:vtxf)["xr-utils"]=r})();